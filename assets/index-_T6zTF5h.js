(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Me={},hi=[],jt=()=>{},hd=()=>!1,ss=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),fl=e=>e.startsWith("onUpdate:"),et=Object.assign,hl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Wg=Object.prototype.hasOwnProperty,Ce=(e,t)=>Wg.call(e,t),fe=Array.isArray,gi=e=>Pr(e)==="[object Map]",as=e=>Pr(e)==="[object Set]",au=e=>Pr(e)==="[object Date]",ge=e=>typeof e=="function",Fe=e=>typeof e=="string",Tt=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",gd=e=>(Pe(e)||ge(e))&&ge(e.then)&&ge(e.catch),pd=Object.prototype.toString,Pr=e=>pd.call(e),qg=e=>Pr(e).slice(8,-1),vd=e=>Pr(e)==="[object Object]",gl=e=>Fe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ji=dl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ls=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Gg=/-\w/g,yt=ls(e=>e.replace(Gg,t=>t.slice(1).toUpperCase())),Kg=/\B([A-Z])/g,ei=ls(e=>e.replace(Kg,"-$1").toLowerCase()),us=ls(e=>e.charAt(0).toUpperCase()+e.slice(1)),zs=ls(e=>e?`on${us(e)}`:""),an=(e,t)=>!Object.is(e,t),ho=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},md=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},yd=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let lu;const cs=()=>lu||(lu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function We(e){if(fe(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Fe(i)?Zg(i):We(i);if(r)for(const o in r)t[o]=r[o]}return t}else if(Fe(e)||Pe(e))return e}const Yg=/;(?![^(]*\))/g,Xg=/:([^]+)/,Jg=/\/\*[^]*?\*\//g;function Zg(e){const t={};return e.replace(Jg,"").split(Yg).forEach(n=>{if(n){const i=n.split(Xg);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function rt(e){let t="";if(Fe(e))t=e;else if(fe(e))for(let n=0;n<e.length;n++){const i=rt(e[n]);i&&(t+=i+" ")}else if(Pe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Qg(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Fe(t)&&(e.class=rt(t)),n&&(e.style=We(n)),e}const ep="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tp=dl(ep);function _d(e){return!!e||e===""}function np(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=ds(e[i],t[i]);return n}function ds(e,t){if(e===t)return!0;let n=au(e),i=au(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Tt(e),i=Tt(t),n||i)return e===t;if(n=fe(e),i=fe(t),n||i)return n&&i?np(e,t):!1;if(n=Pe(e),i=Pe(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!ds(e[s],t[s]))return!1}}return String(e)===String(t)}function ip(e,t){return e.findIndex(n=>ds(n,t))}const wd=e=>!!(e&&e.__v_isRef===!0),nn=e=>Fe(e)?e:e==null?"":fe(e)||Pe(e)&&(e.toString===pd||!ge(e.toString))?wd(e)?nn(e.value):JSON.stringify(e,bd,2):String(e),bd=(e,t)=>wd(t)?bd(e,t.value):gi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],o)=>(n[Fs(i,o)+" =>"]=r,n),{})}:as(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Fs(n))}:Tt(t)?Fs(t):Pe(t)&&!fe(t)&&!vd(t)?String(t):t,Fs=(e,t="")=>{var n;return Tt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Je;class Sd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Je;try{return Je=this,t()}finally{Je=n}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function $d(e){return new Sd(e)}function pl(){return Je}function go(e,t=!1){Je&&Je.cleanups.push(e)}let De;const js=new WeakSet;class xd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,js.has(this)&&(js.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,uu(this),Td(this);const t=De,n=Et;De=this,Et=!0;try{return this.fn()}finally{Cd(this),De=t,Et=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)yl(t);this.deps=this.depsTail=void 0,uu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?js.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ya(this)&&this.run()}get dirty(){return ya(this)}}let Ed=0,Zi,Qi;function kd(e,t=!1){if(e.flags|=8,t){e.next=Qi,Qi=e;return}e.next=Zi,Zi=e}function vl(){Ed++}function ml(){if(--Ed>0)return;if(Qi){let t=Qi;for(Qi=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Zi;){let t=Zi;for(Zi=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Td(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Cd(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),yl(i),rp(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function ya(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ad(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ad(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===cr)||(e.globalVersion=cr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ya(e))))return;e.flags|=2;const t=e.dep,n=De,i=Et;De=e,Et=!0;try{Td(e);const r=e.fn(e._value);(t.version===0||an(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{De=n,Et=i,Cd(e),e.flags&=-3}}function yl(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)yl(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function rp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Et=!0;const Nd=[];function ln(){Nd.push(Et),Et=!1}function un(){const e=Nd.pop();Et=e===void 0?!0:e}function uu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=De;De=void 0;try{t()}finally{De=n}}}let cr=0;class op{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fs{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!De||!Et||De===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==De)n=this.activeLink=new op(De,this),De.deps?(n.prevDep=De.depsTail,De.depsTail.nextDep=n,De.depsTail=n):De.deps=De.depsTail=n,Id(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=De.depsTail,n.nextDep=void 0,De.depsTail.nextDep=n,De.depsTail=n,De.deps===n&&(De.deps=i)}return n}trigger(t){this.version++,cr++,this.notify(t)}notify(t){vl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ml()}}}function Id(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Id(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Co=new WeakMap,Wn=Symbol(""),_a=Symbol(""),dr=Symbol("");function Ze(e,t,n){if(Et&&De){let i=Co.get(e);i||Co.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new fs),r.map=i,r.key=n),r.track()}}function Qt(e,t,n,i,r,o){const s=Co.get(e);if(!s){cr++;return}const a=l=>{l&&l.trigger()};if(vl(),t==="clear")s.forEach(a);else{const l=fe(e),u=l&&gl(n);if(l&&n==="length"){const c=Number(i);s.forEach((d,f)=>{(f==="length"||f===dr||!Tt(f)&&f>=c)&&a(d)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),u&&a(s.get(dr)),t){case"add":l?u&&a(s.get("length")):(a(s.get(Wn)),gi(e)&&a(s.get(_a)));break;case"delete":l||(a(s.get(Wn)),gi(e)&&a(s.get(_a)));break;case"set":gi(e)&&a(s.get(Wn));break}}ml()}function sp(e,t){const n=Co.get(e);return n&&n.get(t)}function ni(e){const t=ke(e);return t===e?t:(Ze(t,"iterate",dr),vt(e)?t:t.map(Ke))}function hs(e){return Ze(e=ke(e),"iterate",dr),e}const ap={__proto__:null,[Symbol.iterator](){return Us(this,Symbol.iterator,Ke)},concat(...e){return ni(this).concat(...e.map(t=>fe(t)?ni(t):t))},entries(){return Us(this,"entries",e=>(e[1]=Ke(e[1]),e))},every(e,t){return Kt(this,"every",e,t,void 0,arguments)},filter(e,t){return Kt(this,"filter",e,t,n=>n.map(Ke),arguments)},find(e,t){return Kt(this,"find",e,t,Ke,arguments)},findIndex(e,t){return Kt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Kt(this,"findLast",e,t,Ke,arguments)},findLastIndex(e,t){return Kt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Kt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hs(this,"includes",e)},indexOf(...e){return Hs(this,"indexOf",e)},join(e){return ni(this).join(e)},lastIndexOf(...e){return Hs(this,"lastIndexOf",e)},map(e,t){return Kt(this,"map",e,t,void 0,arguments)},pop(){return Di(this,"pop")},push(...e){return Di(this,"push",e)},reduce(e,...t){return cu(this,"reduce",e,t)},reduceRight(e,...t){return cu(this,"reduceRight",e,t)},shift(){return Di(this,"shift")},some(e,t){return Kt(this,"some",e,t,void 0,arguments)},splice(...e){return Di(this,"splice",e)},toReversed(){return ni(this).toReversed()},toSorted(e){return ni(this).toSorted(e)},toSpliced(...e){return ni(this).toSpliced(...e)},unshift(...e){return Di(this,"unshift",e)},values(){return Us(this,"values",Ke)}};function Us(e,t,n){const i=hs(e),r=i[t]();return i!==e&&!vt(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.done||(o.value=n(o.value)),o}),r}const lp=Array.prototype;function Kt(e,t,n,i,r,o){const s=hs(e),a=s!==e&&!vt(e),l=s[t];if(l!==lp[t]){const d=l.apply(e,o);return a?Ke(d):d}let u=n;s!==e&&(a?u=function(d,f){return n.call(this,Ke(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const c=l.call(s,u,i);return a&&r?r(c):c}function cu(e,t,n,i){const r=hs(e);let o=n;return r!==e&&(vt(e)?n.length>3&&(o=function(s,a,l){return n.call(this,s,a,l,e)}):o=function(s,a,l){return n.call(this,s,Ke(a),l,e)}),r[t](o,...i)}function Hs(e,t,n){const i=ke(e);Ze(i,"iterate",dr);const r=i[t](...n);return(r===-1||r===!1)&&bl(n[0])?(n[0]=ke(n[0]),i[t](...n)):r}function Di(e,t,n=[]){ln(),vl();const i=ke(e)[t].apply(e,n);return ml(),un(),i}const up=dl("__proto__,__v_isRef,__isVue"),Pd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tt));function cp(e){Tt(e)||(e=String(e));const t=ke(this);return Ze(t,"has",e),t.hasOwnProperty(e)}class Od{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(r?o?wp:Bd:o?Dd:Rd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const s=fe(t);if(!r){let l;if(s&&(l=ap[n]))return l;if(n==="hasOwnProperty")return cp}const a=Reflect.get(t,n,je(t)?t:i);if((Tt(n)?Pd.has(n):up(n))||(r||Ze(t,"get",n),o))return a;if(je(a)){const l=s&&gl(n)?a:a.value;return r&&Pe(l)?Ao(l):l}return Pe(a)?r?Ao(a):gs(a):a}}class Md extends Od{constructor(t=!1){super(!1,t)}set(t,n,i,r){let o=t[n];if(!this._isShallow){const l=kn(o);if(!vt(i)&&!kn(i)&&(o=ke(o),i=ke(i)),!fe(t)&&je(o)&&!je(i))return l||(o.value=i),!0}const s=fe(t)&&gl(n)?Number(n)<t.length:Ce(t,n),a=Reflect.set(t,n,i,je(t)?t:r);return t===ke(r)&&(s?an(i,o)&&Qt(t,"set",n,i):Qt(t,"add",n,i)),a}deleteProperty(t,n){const i=Ce(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&Qt(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Tt(n)||!Pd.has(n))&&Ze(t,"has",n),i}ownKeys(t){return Ze(t,"iterate",fe(t)?"length":Wn),Reflect.ownKeys(t)}}class dp extends Od{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const fp=new Md,hp=new dp,gp=new Md(!0);const wa=e=>e,Hr=e=>Reflect.getPrototypeOf(e);function pp(e,t,n){return function(...i){const r=this.__v_raw,o=ke(r),s=gi(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=r[e](...i),c=n?wa:t?No:Ke;return!t&&Ze(o,"iterate",l?_a:Wn),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Vr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vp(e,t){const n={get(r){const o=this.__v_raw,s=ke(o),a=ke(r);e||(an(r,a)&&Ze(s,"get",r),Ze(s,"get",a));const{has:l}=Hr(s),u=t?wa:e?No:Ke;if(l.call(s,r))return u(o.get(r));if(l.call(s,a))return u(o.get(a));o!==s&&o.get(r)},get size(){const r=this.__v_raw;return!e&&Ze(ke(r),"iterate",Wn),r.size},has(r){const o=this.__v_raw,s=ke(o),a=ke(r);return e||(an(r,a)&&Ze(s,"has",r),Ze(s,"has",a)),r===a?o.has(r):o.has(r)||o.has(a)},forEach(r,o){const s=this,a=s.__v_raw,l=ke(a),u=t?wa:e?No:Ke;return!e&&Ze(l,"iterate",Wn),a.forEach((c,d)=>r.call(o,u(c),u(d),s))}};return et(n,e?{add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear")}:{add(r){!t&&!vt(r)&&!kn(r)&&(r=ke(r));const o=ke(this);return Hr(o).has.call(o,r)||(o.add(r),Qt(o,"add",r,r)),this},set(r,o){!t&&!vt(o)&&!kn(o)&&(o=ke(o));const s=ke(this),{has:a,get:l}=Hr(s);let u=a.call(s,r);u||(r=ke(r),u=a.call(s,r));const c=l.call(s,r);return s.set(r,o),u?an(o,c)&&Qt(s,"set",r,o):Qt(s,"add",r,o),this},delete(r){const o=ke(this),{has:s,get:a}=Hr(o);let l=s.call(o,r);l||(r=ke(r),l=s.call(o,r)),a&&a.call(o,r);const u=o.delete(r);return l&&Qt(o,"delete",r,void 0),u},clear(){const r=ke(this),o=r.size!==0,s=r.clear();return o&&Qt(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=pp(r,e,t)}),n}function _l(e,t){const n=vp(e,t);return(i,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Ce(n,r)&&r in i?n:i,r,o)}const mp={get:_l(!1,!1)},yp={get:_l(!1,!0)},_p={get:_l(!0,!1)};const Rd=new WeakMap,Dd=new WeakMap,Bd=new WeakMap,wp=new WeakMap;function bp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sp(e){return e.__v_skip||!Object.isExtensible(e)?0:bp(qg(e))}function gs(e){return kn(e)?e:wl(e,!1,fp,mp,Rd)}function $p(e){return wl(e,!1,gp,yp,Dd)}function Ao(e){return wl(e,!0,hp,_p,Bd)}function wl(e,t,n,i,r){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Sp(e);if(o===0)return e;const s=r.get(e);if(s)return s;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function pi(e){return kn(e)?pi(e.__v_raw):!!(e&&e.__v_isReactive)}function kn(e){return!!(e&&e.__v_isReadonly)}function vt(e){return!!(e&&e.__v_isShallow)}function bl(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function er(e){return!Ce(e,"__v_skip")&&Object.isExtensible(e)&&md(e,"__v_skip",!0),e}const Ke=e=>Pe(e)?gs(e):e,No=e=>Pe(e)?Ao(e):e;function je(e){return e?e.__v_isRef===!0:!1}function Te(e){return Ld(e,!1)}function Io(e){return Ld(e,!0)}function Ld(e,t){return je(e)?e:new xp(e,t)}class xp{constructor(t,n){this.dep=new fs,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ke(t),this._value=n?t:Ke(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||vt(t)||kn(t);t=i?t:ke(t),an(t,n)&&(this._rawValue=t,this._value=i?t:Ke(t),this.dep.trigger())}}function te(e){return je(e)?e.value:e}function ye(e){return ge(e)?e():te(e)}const Ep={get:(e,t,n)=>t==="__v_raw"?e:te(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return je(r)&&!je(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function zd(e){return pi(e)?e:new Proxy(e,Ep)}class kp{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new fs,{get:i,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Tp(e){return new kp(e)}function Cp(e){const t=fe(e)?new Array(e.length):{};for(const n in e)t[n]=Fd(e,n);return t}class Ap{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return sp(ke(this._object),this._key)}}class Np{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Se(e,t,n){return je(e)?e:ge(e)?new Np(e):Pe(e)&&arguments.length>1?Fd(e,t,n):Te(e)}function Fd(e,t,n){const i=e[t];return je(i)?i:new Ap(e,t,n)}class Ip{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new fs(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return kd(this,!0),!0}get value(){const t=this.dep.track();return Ad(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Pp(e,t,n=!1){let i,r;return ge(e)?i=e:(i=e.get,r=e.set),new Ip(i,r,n)}const Wr={},Po=new WeakMap;let Dn;function Op(e,t=!1,n=Dn){if(n){let i=Po.get(n);i||Po.set(n,i=[]),i.push(e)}}function Mp(e,t,n=Me){const{immediate:i,deep:r,once:o,scheduler:s,augmentJob:a,call:l}=n,u=y=>r?y:vt(y)||r===!1||r===0?en(y,1):en(y);let c,d,f,h,S=!1,b=!1;if(je(e)?(d=()=>e.value,S=vt(e)):pi(e)?(d=()=>u(e),S=!0):fe(e)?(b=!0,S=e.some(y=>pi(y)||vt(y)),d=()=>e.map(y=>{if(je(y))return y.value;if(pi(y))return u(y);if(ge(y))return l?l(y,2):y()})):ge(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){ln();try{f()}finally{un()}}const y=Dn;Dn=c;try{return l?l(e,3,[h]):e(h)}finally{Dn=y}}:d=jt,t&&r){const y=d,D=r===!0?1/0:r;d=()=>en(y(),D)}const E=pl(),k=()=>{c.stop(),E&&E.active&&hl(E.effects,c)};if(o&&t){const y=t;t=(...D)=>{y(...D),k()}}let C=b?new Array(e.length).fill(Wr):Wr;const _=y=>{if(!(!(c.flags&1)||!c.dirty&&!y))if(t){const D=c.run();if(r||S||(b?D.some((U,z)=>an(U,C[z])):an(D,C))){f&&f();const U=Dn;Dn=c;try{const z=[D,C===Wr?void 0:b&&C[0]===Wr?[]:C,h];C=D,l?l(t,3,z):t(...z)}finally{Dn=U}}}else c.run()};return a&&a(_),c=new xd(d),c.scheduler=s?()=>s(_,!1):_,h=y=>Op(y,!1,c),f=c.onStop=()=>{const y=Po.get(c);if(y){if(l)l(y,4);else for(const D of y)D();Po.delete(c)}},t?i?_(!0):C=c.run():s?s(_.bind(null,!0),!0):c.run(),k.pause=c.pause.bind(c),k.resume=c.resume.bind(c),k.stop=k,k}function en(e,t=1/0,n){if(t<=0||!Pe(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,je(e))en(e.value,t,n);else if(fe(e))for(let i=0;i<e.length;i++)en(e[i],t,n);else if(as(e)||gi(e))e.forEach(i=>{en(i,t,n)});else if(vd(e)){for(const i in e)en(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&en(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Or(e,t,n,i){try{return i?e(...i):e()}catch(r){ps(r,t,n)}}function Vt(e,t,n,i){if(ge(e)){const r=Or(e,t,n,i);return r&&gd(r)&&r.catch(o=>{ps(o,t,n)}),r}if(fe(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Vt(e[o],t,n,i));return r}}function ps(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Me;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}a=a.parent}if(o){ln(),Or(o,null,10,[e,l,u]),un();return}}Rp(e,n,r,i,s)}function Rp(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const nt=[];let Rt=-1;const vi=[];let wn=null,ci=0;const jd=Promise.resolve();let Oo=null;function kt(e){const t=Oo||jd;return e?t.then(this?e.bind(this):e):t}function Dp(e){let t=Rt+1,n=nt.length;for(;t<n;){const i=t+n>>>1,r=nt[i],o=fr(r);o<e||o===e&&r.flags&2?t=i+1:n=i}return t}function Sl(e){if(!(e.flags&1)){const t=fr(e),n=nt[nt.length-1];!n||!(e.flags&2)&&t>=fr(n)?nt.push(e):nt.splice(Dp(t),0,e),e.flags|=1,Ud()}}function Ud(){Oo||(Oo=jd.then(Vd))}function Bp(e){fe(e)?vi.push(...e):wn&&e.id===-1?wn.splice(ci+1,0,e):e.flags&1||(vi.push(e),e.flags|=1),Ud()}function du(e,t,n=Rt+1){for(;n<nt.length;n++){const i=nt[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;nt.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Hd(e){if(vi.length){const t=[...new Set(vi)].sort((n,i)=>fr(n)-fr(i));if(vi.length=0,wn){wn.push(...t);return}for(wn=t,ci=0;ci<wn.length;ci++){const n=wn[ci];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}wn=null,ci=0}}const fr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Vd(e){try{for(Rt=0;Rt<nt.length;Rt++){const t=nt[Rt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Or(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Rt<nt.length;Rt++){const t=nt[Rt];t&&(t.flags&=-2)}Rt=-1,nt.length=0,Hd(),Oo=null,(nt.length||vi.length)&&Vd()}}let Ye=null,Wd=null;function Mo(e){const t=Ye;return Ye=e,Wd=e&&e.type.__scopeId||null,t}function pt(e,t=Ye,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Bo(-1);const o=Mo(t);let s;try{s=e(...r)}finally{Mo(o),i._d&&Bo(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Lp(e,t){if(Ye===null)return e;const n=_s(Ye),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,s,a,l=Me]=t[r];o&&(ge(o)&&(o={mounted:o,updated:o}),o.deep&&en(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:l}))}return e}function Pn(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let l=a.dir[i];l&&(ln(),Vt(l,n,8,[e.el,a,e,t]),un())}}const zp=Symbol("_vte"),Fp=e=>e.__isTeleport,jp=Symbol("_leaveCb");function $l(e,t){e.shapeFlag&6&&e.component?(e.transition=t,$l(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ie(e,t){return ge(e)?et({name:e.name},t,{setup:e}):e}function qd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ro=new WeakMap;function tr(e,t,n,i,r=!1){if(fe(e)){e.forEach((S,b)=>tr(S,t&&(fe(t)?t[b]:t),n,i,r));return}if(mi(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&tr(e,t,n,i.component.subTree);return}const o=i.shapeFlag&4?_s(i.component):i.el,s=r?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Me?a.refs={}:a.refs,d=a.setupState,f=ke(d),h=d===Me?hd:S=>Ce(f,S);if(u!=null&&u!==l){if(fu(t),Fe(u))c[u]=null,h(u)&&(d[u]=null);else if(je(u)){u.value=null;const S=t;S.k&&(c[S.k]=null)}}if(ge(l))Or(l,a,12,[s,c]);else{const S=Fe(l),b=je(l);if(S||b){const E=()=>{if(e.f){const k=S?h(l)?d[l]:c[l]:l.value;if(r)fe(k)&&hl(k,o);else if(fe(k))k.includes(o)||k.push(o);else if(S)c[l]=[o],h(l)&&(d[l]=c[l]);else{const C=[o];l.value=C,e.k&&(c[e.k]=C)}}else S?(c[l]=s,h(l)&&(d[l]=s)):b&&(l.value=s,e.k&&(c[e.k]=s))};if(s){const k=()=>{E(),Ro.delete(e)};k.id=-1,Ro.set(e,k),dt(k,n)}else fu(e),E()}}}function fu(e){const t=Ro.get(e);t&&(t.flags|=8,Ro.delete(e))}cs().requestIdleCallback;cs().cancelIdleCallback;const mi=e=>!!e.type.__asyncLoader,Gd=e=>e.type.__isKeepAlive;function Up(e,t){Kd(e,"a",t)}function Hp(e,t){Kd(e,"da",t)}function Kd(e,t,n=Qe){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(vs(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Gd(r.parent.vnode)&&Vp(i,t,n,r),r=r.parent}}function Vp(e,t,n,i){const r=vs(t,e,i,!0);El(()=>{hl(i[t],r)},n)}function vs(e,t,n=Qe,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{ln();const a=Mr(n),l=Vt(t,n,e,s);return a(),un(),l});return i?r.unshift(o):r.push(o),o}}const gn=e=>(t,n=Qe)=>{(!pr||e==="sp")&&vs(e,(...i)=>t(...i),n)},Yd=gn("bm"),Wt=gn("m"),Wp=gn("bu"),qp=gn("u"),xl=gn("bum"),El=gn("um"),Gp=gn("sp"),Kp=gn("rtg"),Yp=gn("rtc");function Xp(e,t=Qe){vs("ec",e,t)}const Xd="components";function Jd(e,t){return Qd(Xd,e,!0,t)||e}const Zd=Symbol.for("v-ndc");function Ln(e){return Fe(e)?Qd(Xd,e,!1)||e:e||Zd}function Qd(e,t,n=!0,i=!1){const r=Ye||Qe;if(r){const o=r.type;{const a=Bv(o,!1);if(a&&(a===t||a===yt(t)||a===us(yt(t))))return o}const s=hu(r[e]||o[e],t)||hu(r.appContext[e],t);return!s&&i?o:s}}function hu(e,t){return e&&(e[t]||e[yt(t)]||e[us(yt(t))])}function Yn(e,t,n,i){let r;const o=n&&n[i],s=fe(e);if(s||Fe(e)){const a=s&&pi(e);let l=!1,u=!1;a&&(l=!vt(e),u=kn(e),e=hs(e)),r=new Array(e.length);for(let c=0,d=e.length;c<d;c++)r[c]=t(l?u?No(Ke(e[c])):Ke(e[c]):e[c],c,void 0,o&&o[c])}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,o&&o[a])}else if(Pe(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,o&&o[l]));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=t(e[c],c,l,o&&o[l])}}else r=[];return n&&(n[i]=r),r}function Be(e,t,n={},i,r){if(Ye.ce||Ye.parent&&mi(Ye.parent)&&Ye.parent.ce){const u=Object.keys(n).length>0;return t!=="default"&&(n.name=t),se(),ze(Ae,null,[we("slot",n,i&&i())],u?-2:64)}let o=e[t];o&&o._c&&(o._d=!1),se();const s=o&&ef(o(n)),a=n.key||s&&s.key,l=ze(Ae,{key:(a&&!Tt(a)?a:`_${t}`)+(!s&&i?"_fb":"")},s||(i?i():[]),s&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function ef(e){return e.some(t=>hr(t)?!(t.type===cn||t.type===Ae&&!ef(t.children)):!0)?e:null}const ba=e=>e?xf(e)?_s(e):ba(e.parent):null,nr=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ba(e.parent),$root:e=>ba(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>of(e),$forceUpdate:e=>e.f||(e.f=()=>{Sl(e.update)}),$nextTick:e=>e.n||(e.n=kt.bind(e.proxy)),$watch:e=>yv.bind(e)}),Vs=(e,t)=>e!==Me&&!e.__isScriptSetup&&Ce(e,t),Jp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(Vs(i,t))return s[t]=1,i[t];if(r!==Me&&Ce(r,t))return s[t]=2,r[t];if((u=e.propsOptions[0])&&Ce(u,t))return s[t]=3,o[t];if(n!==Me&&Ce(n,t))return s[t]=4,n[t];Sa&&(s[t]=0)}}const c=nr[t];let d,f;if(c)return t==="$attrs"&&Ze(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==Me&&Ce(n,t))return s[t]=4,n[t];if(f=l.config.globalProperties,Ce(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;return Vs(r,t)?(r[t]=n,!0):i!==Me&&Ce(i,t)?(i[t]=n,!0):Ce(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o,type:s}},a){let l,u;return!!(n[a]||e!==Me&&a[0]!=="$"&&Ce(e,a)||Vs(t,a)||(l=o[0])&&Ce(l,a)||Ce(i,a)||Ce(nr,a)||Ce(r.config.globalProperties,a)||(u=s.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ce(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function tf(){return nf().slots}function kl(){return nf().attrs}function nf(e){const t=Nn();return t.setupContext||(t.setupContext=kf(t))}function gu(e){return fe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Zp(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}let Sa=!0;function Qp(e){const t=of(e),n=e.proxy,i=e.ctx;Sa=!1,t.beforeCreate&&pu(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:S,activated:b,deactivated:E,beforeDestroy:k,beforeUnmount:C,destroyed:_,unmounted:y,render:D,renderTracked:U,renderTriggered:z,errorCaptured:O,serverPrefetch:V,expose:H,inheritAttrs:W,components:P,directives:Q,filters:p}=t;if(u&&ev(u,i,null),s)for(const I in s){const A=s[I];ge(A)&&(i[I]=A.bind(n))}if(r){const I=r.call(n,n);Pe(I)&&(e.data=gs(I))}if(Sa=!0,o)for(const I in o){const A=o[I],L=ge(A)?A.bind(n,n):ge(A.get)?A.get.bind(n,n):jt,R=!ge(A)&&ge(A.set)?A.set.bind(n):jt,q=ue({get:L,set:R});Object.defineProperty(i,I,{enumerable:!0,configurable:!0,get:()=>q.value,set:J=>q.value=J})}if(a)for(const I in a)rf(a[I],i,n,I);if(l){const I=ge(l)?l.call(n):l;Reflect.ownKeys(I).forEach(A=>{Tn(A,I[A])})}c&&pu(c,e,"c");function x(I,A){fe(A)?A.forEach(L=>I(L.bind(n))):A&&I(A.bind(n))}if(x(Yd,d),x(Wt,f),x(Wp,h),x(qp,S),x(Up,b),x(Hp,E),x(Xp,O),x(Yp,U),x(Kp,z),x(xl,C),x(El,y),x(Gp,V),fe(H))if(H.length){const I=e.exposed||(e.exposed={});H.forEach(A=>{Object.defineProperty(I,A,{get:()=>n[A],set:L=>n[A]=L,enumerable:!0})})}else e.exposed||(e.exposed={});D&&e.render===jt&&(e.render=D),W!=null&&(e.inheritAttrs=W),P&&(e.components=P),Q&&(e.directives=Q),V&&qd(e)}function ev(e,t,n=jt){fe(e)&&(e=$a(e));for(const i in e){const r=e[i];let o;Pe(r)?"default"in r?o=mt(r.from||i,r.default,!0):o=mt(r.from||i):o=mt(r),je(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[i]=o}}function pu(e,t,n){Vt(fe(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function rf(e,t,n,i){let r=i.includes(".")?yf(n,i):()=>n[i];if(Fe(e)){const o=t[e];ge(o)&&be(r,o)}else if(ge(e))be(r,e.bind(n));else if(Pe(e))if(fe(e))e.forEach(o=>rf(o,t,n,i));else{const o=ge(e.handler)?e.handler.bind(n):t[e.handler];ge(o)&&be(r,o,e)}}function of(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(u=>Do(l,u,s,!0)),Do(l,t,s)),Pe(t)&&o.set(t,l),l}function Do(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&Do(e,o,n,!0),r&&r.forEach(s=>Do(e,s,n,!0));for(const s in t)if(!(i&&s==="expose")){const a=tv[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const tv={data:vu,props:mu,emits:mu,methods:Vi,computed:Vi,beforeCreate:tt,created:tt,beforeMount:tt,mounted:tt,beforeUpdate:tt,updated:tt,beforeDestroy:tt,beforeUnmount:tt,destroyed:tt,unmounted:tt,activated:tt,deactivated:tt,errorCaptured:tt,serverPrefetch:tt,components:Vi,directives:Vi,watch:iv,provide:vu,inject:nv};function vu(e,t){return t?e?function(){return et(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function nv(e,t){return Vi($a(e),$a(t))}function $a(e){if(fe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function tt(e,t){return e?[...new Set([].concat(e,t))]:t}function Vi(e,t){return e?et(Object.create(null),e,t):t}function mu(e,t){return e?fe(e)&&fe(t)?[...new Set([...e,...t])]:et(Object.create(null),gu(e),gu(t??{})):t}function iv(e,t){if(!e)return t;if(!t)return e;const n=et(Object.create(null),e);for(const i in t)n[i]=tt(e[i],t[i]);return n}function sf(){return{app:null,config:{isNativeTag:hd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let rv=0;function ov(e,t){return function(i,r=null){ge(i)||(i=et({},i)),r!=null&&!Pe(r)&&(r=null);const o=sf(),s=new WeakSet,a=[];let l=!1;const u=o.app={_uid:rv++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:Fv,get config(){return o.config},set config(c){},use(c,...d){return s.has(c)||(c&&ge(c.install)?(s.add(c),c.install(u,...d)):ge(c)&&(s.add(c),c(u,...d))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,d){return d?(o.components[c]=d,u):o.components[c]},directive(c,d){return d?(o.directives[c]=d,u):o.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||we(i,r);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),l=!0,u._container=c,c.__vue_app__=u,_s(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Vt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return o.provides[c]=d,u},runWithContext(c){const d=yi;yi=u;try{return c()}finally{yi=d}}};return u}}let yi=null;function Tn(e,t){if(Qe){let n=Qe.provides;const i=Qe.parent&&Qe.parent.provides;i===n&&(n=Qe.provides=Object.create(i)),n[e]=t}}function mt(e,t,n=!1){const i=Nn();if(i||yi){let r=yi?yi._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ge(t)?t.call(i&&i.proxy):t}}const af={},lf=()=>Object.create(af),uf=e=>Object.getPrototypeOf(e)===af;function sv(e,t,n,i=!1){const r={},o=lf();e.propsDefaults=Object.create(null),cf(e,t,r,o);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=i?r:$p(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function av(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=e,a=ke(r),[l]=e.propsOptions;let u=!1;if((i||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(ms(e.emitsOptions,f))continue;const h=t[f];if(l)if(Ce(o,f))h!==o[f]&&(o[f]=h,u=!0);else{const S=yt(f);r[S]=xa(l,a,S,h,e,!1)}else h!==o[f]&&(o[f]=h,u=!0)}}}else{cf(e,t,r,o)&&(u=!0);let c;for(const d in a)(!t||!Ce(t,d)&&((c=ei(d))===d||!Ce(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(r[d]=xa(l,a,d,void 0,e,!0)):delete r[d]);if(o!==a)for(const d in o)(!t||!Ce(t,d))&&(delete o[d],u=!0)}u&&Qt(e.attrs,"set","")}function cf(e,t,n,i){const[r,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(Ji(l))continue;const u=t[l];let c;r&&Ce(r,c=yt(l))?!o||!o.includes(c)?n[c]=u:(a||(a={}))[c]=u:ms(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,s=!0)}if(o){const l=ke(n),u=a||Me;for(let c=0;c<o.length;c++){const d=o[c];n[d]=xa(r,l,d,u[d],e,!Ce(u,d))}}return s}function xa(e,t,n,i,r,o){const s=e[n];if(s!=null){const a=Ce(s,"default");if(a&&i===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&ge(l)){const{propsDefaults:u}=r;if(n in u)i=u[n];else{const c=Mr(r);i=u[n]=l.call(null,t),c()}}else i=l;r.ce&&r.ce._setProp(n,i)}s[0]&&(o&&!a?i=!1:s[1]&&(i===""||i===ei(n))&&(i=!0))}return i}const lv=new WeakMap;function df(e,t,n=!1){const i=n?lv:t.propsCache,r=i.get(e);if(r)return r;const o=e.props,s={},a=[];let l=!1;if(!ge(e)){const c=d=>{l=!0;const[f,h]=df(d,t,!0);et(s,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Pe(e)&&i.set(e,hi),hi;if(fe(o))for(let c=0;c<o.length;c++){const d=yt(o[c]);yu(d)&&(s[d]=Me)}else if(o)for(const c in o){const d=yt(c);if(yu(d)){const f=o[c],h=s[d]=fe(f)||ge(f)?{type:f}:et({},f),S=h.type;let b=!1,E=!0;if(fe(S))for(let k=0;k<S.length;++k){const C=S[k],_=ge(C)&&C.name;if(_==="Boolean"){b=!0;break}else _==="String"&&(E=!1)}else b=ge(S)&&S.name==="Boolean";h[0]=b,h[1]=E,(b||Ce(h,"default"))&&a.push(d)}}const u=[s,a];return Pe(e)&&i.set(e,u),u}function yu(e){return e[0]!=="$"&&!Ji(e)}const Tl=e=>e==="_"||e==="_ctx"||e==="$stable",Cl=e=>fe(e)?e.map(Lt):[Lt(e)],uv=(e,t,n)=>{if(t._n)return t;const i=pt((...r)=>Cl(t(...r)),n);return i._c=!1,i},ff=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Tl(r))continue;const o=e[r];if(ge(o))t[r]=uv(r,o,i);else if(o!=null){const s=Cl(o);t[r]=()=>s}}},hf=(e,t)=>{const n=Cl(t);e.slots.default=()=>n},gf=(e,t,n)=>{for(const i in t)(n||!Tl(i))&&(e[i]=t[i])},cv=(e,t,n)=>{const i=e.slots=lf();if(e.vnode.shapeFlag&32){const r=t._;r?(gf(i,t,n),n&&md(i,"_",r,!0)):ff(t,i)}else t&&hf(e,t)},dv=(e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,s=Me;if(i.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:gf(r,t,n):(o=!t.$stable,ff(t,r)),s=t}else t&&(hf(e,t),s={default:1});if(o)for(const a in r)!Tl(a)&&s[a]==null&&delete r[a]},dt=kv;function fv(e){return hv(e)}function hv(e,t){const n=cs();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=jt,insertStaticContent:S}=e,b=($,T,g,v=null,w=null,m=null,N=void 0,j=null,F=!!T.dynamicChildren)=>{if($===T)return;$&&!Bi($,T)&&(v=re($),J($,w,m,!0),$=null),T.patchFlag===-2&&(F=!1,T.dynamicChildren=null);const{type:B,ref:K,shapeFlag:G}=T;switch(B){case ys:E($,T,g,v);break;case cn:k($,T,g,v);break;case po:$==null&&C(T,g,v,N);break;case Ae:P($,T,g,v,w,m,N,j,F);break;default:G&1?D($,T,g,v,w,m,N,j,F):G&6?Q($,T,g,v,w,m,N,j,F):(G&64||G&128)&&B.process($,T,g,v,w,m,N,j,F,ve)}K!=null&&w?tr(K,$&&$.ref,m,T||$,!T):K==null&&$&&$.ref!=null&&tr($.ref,null,m,$,!0)},E=($,T,g,v)=>{if($==null)i(T.el=a(T.children),g,v);else{const w=T.el=$.el;T.children!==$.children&&u(w,T.children)}},k=($,T,g,v)=>{$==null?i(T.el=l(T.children||""),g,v):T.el=$.el},C=($,T,g,v)=>{[$.el,$.anchor]=S($.children,T,g,v,$.el,$.anchor)},_=({el:$,anchor:T},g,v)=>{let w;for(;$&&$!==T;)w=f($),i($,g,v),$=w;i(T,g,v)},y=({el:$,anchor:T})=>{let g;for(;$&&$!==T;)g=f($),r($),$=g;r(T)},D=($,T,g,v,w,m,N,j,F)=>{T.type==="svg"?N="svg":T.type==="math"&&(N="mathml"),$==null?U(T,g,v,w,m,N,j,F):V($,T,w,m,N,j,F)},U=($,T,g,v,w,m,N,j)=>{let F,B;const{props:K,shapeFlag:G,transition:Z,dirs:ne}=$;if(F=$.el=s($.type,m,K&&K.is,K),G&8?c(F,$.children):G&16&&O($.children,F,null,v,w,Ws($,m),N,j),ne&&Pn($,null,v,"created"),z(F,$,$.scopeId,N,v),K){for(const xe in K)xe!=="value"&&!Ji(xe)&&o(F,xe,null,K[xe],m,v);"value"in K&&o(F,"value",null,K.value,m),(B=K.onVnodeBeforeMount)&&Ot(B,v,$)}ne&&Pn($,null,v,"beforeMount");const he=gv(w,Z);he&&Z.beforeEnter(F),i(F,T,g),((B=K&&K.onVnodeMounted)||he||ne)&&dt(()=>{B&&Ot(B,v,$),he&&Z.enter(F),ne&&Pn($,null,v,"mounted")},w)},z=($,T,g,v,w)=>{if(g&&h($,g),v)for(let m=0;m<v.length;m++)h($,v[m]);if(w){let m=w.subTree;if(T===m||wf(m.type)&&(m.ssContent===T||m.ssFallback===T)){const N=w.vnode;z($,N,N.scopeId,N.slotScopeIds,w.parent)}}},O=($,T,g,v,w,m,N,j,F=0)=>{for(let B=F;B<$.length;B++){const K=$[B]=j?bn($[B]):Lt($[B]);b(null,K,T,g,v,w,m,N,j)}},V=($,T,g,v,w,m,N)=>{const j=T.el=$.el;let{patchFlag:F,dynamicChildren:B,dirs:K}=T;F|=$.patchFlag&16;const G=$.props||Me,Z=T.props||Me;let ne;if(g&&On(g,!1),(ne=Z.onVnodeBeforeUpdate)&&Ot(ne,g,T,$),K&&Pn(T,$,g,"beforeUpdate"),g&&On(g,!0),(G.innerHTML&&Z.innerHTML==null||G.textContent&&Z.textContent==null)&&c(j,""),B?H($.dynamicChildren,B,j,g,v,Ws(T,w),m):N||A($,T,j,null,g,v,Ws(T,w),m,!1),F>0){if(F&16)W(j,G,Z,g,w);else if(F&2&&G.class!==Z.class&&o(j,"class",null,Z.class,w),F&4&&o(j,"style",G.style,Z.style,w),F&8){const he=T.dynamicProps;for(let xe=0;xe<he.length;xe++){const Ee=he[xe],Xe=G[Ee],ot=Z[Ee];(ot!==Xe||Ee==="value")&&o(j,Ee,Xe,ot,w,g)}}F&1&&$.children!==T.children&&c(j,T.children)}else!N&&B==null&&W(j,G,Z,g,w);((ne=Z.onVnodeUpdated)||K)&&dt(()=>{ne&&Ot(ne,g,T,$),K&&Pn(T,$,g,"updated")},v)},H=($,T,g,v,w,m,N)=>{for(let j=0;j<T.length;j++){const F=$[j],B=T[j],K=F.el&&(F.type===Ae||!Bi(F,B)||F.shapeFlag&198)?d(F.el):g;b(F,B,K,null,v,w,m,N,!0)}},W=($,T,g,v,w)=>{if(T!==g){if(T!==Me)for(const m in T)!Ji(m)&&!(m in g)&&o($,m,T[m],null,w,v);for(const m in g){if(Ji(m))continue;const N=g[m],j=T[m];N!==j&&m!=="value"&&o($,m,j,N,w,v)}"value"in g&&o($,"value",T.value,g.value,w)}},P=($,T,g,v,w,m,N,j,F)=>{const B=T.el=$?$.el:a(""),K=T.anchor=$?$.anchor:a("");let{patchFlag:G,dynamicChildren:Z,slotScopeIds:ne}=T;ne&&(j=j?j.concat(ne):ne),$==null?(i(B,g,v),i(K,g,v),O(T.children||[],g,K,w,m,N,j,F)):G>0&&G&64&&Z&&$.dynamicChildren?(H($.dynamicChildren,Z,g,w,m,N,j),(T.key!=null||w&&T===w.subTree)&&pf($,T,!0)):A($,T,g,K,w,m,N,j,F)},Q=($,T,g,v,w,m,N,j,F)=>{T.slotScopeIds=j,$==null?T.shapeFlag&512?w.ctx.activate(T,g,v,N,F):p(T,g,v,w,m,N,F):M($,T,F)},p=($,T,g,v,w,m,N)=>{const j=$.component=Ov($,v,w);if(Gd($)&&(j.ctx.renderer=ve),Mv(j,!1,N),j.asyncDep){if(w&&w.registerDep(j,x,N),!$.el){const F=j.subTree=we(cn);k(null,F,T,g),$.placeholder=F.el}}else x(j,$,T,g,w,m,N)},M=($,T,g)=>{const v=T.component=$.component;if(xv($,T,g))if(v.asyncDep&&!v.asyncResolved){I(v,T,g);return}else v.next=T,v.update();else T.el=$.el,v.vnode=T},x=($,T,g,v,w,m,N)=>{const j=()=>{if($.isMounted){let{next:G,bu:Z,u:ne,parent:he,vnode:xe}=$;{const It=vf($);if(It){G&&(G.el=xe.el,I($,G,N)),It.asyncDep.then(()=>{$.isUnmounted||j()});return}}let Ee=G,Xe;On($,!1),G?(G.el=xe.el,I($,G,N)):G=xe,Z&&ho(Z),(Xe=G.props&&G.props.onVnodeBeforeUpdate)&&Ot(Xe,he,G,xe),On($,!0);const ot=wu($),Nt=$.subTree;$.subTree=ot,b(Nt,ot,d(Nt.el),re(Nt),$,w,m),G.el=ot.el,Ee===null&&Ev($,ot.el),ne&&dt(ne,w),(Xe=G.props&&G.props.onVnodeUpdated)&&dt(()=>Ot(Xe,he,G,xe),w)}else{let G;const{el:Z,props:ne}=T,{bm:he,m:xe,parent:Ee,root:Xe,type:ot}=$,Nt=mi(T);On($,!1),he&&ho(he),!Nt&&(G=ne&&ne.onVnodeBeforeMount)&&Ot(G,Ee,T),On($,!0);{Xe.ce&&Xe.ce._def.shadowRoot!==!1&&Xe.ce._injectChildStyle(ot);const It=$.subTree=wu($);b(null,It,g,v,$,w,m),T.el=It.el}if(xe&&dt(xe,w),!Nt&&(G=ne&&ne.onVnodeMounted)){const It=T;dt(()=>Ot(G,Ee,It),w)}(T.shapeFlag&256||Ee&&mi(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&$.a&&dt($.a,w),$.isMounted=!0,T=g=v=null}};$.scope.on();const F=$.effect=new xd(j);$.scope.off();const B=$.update=F.run.bind(F),K=$.job=F.runIfDirty.bind(F);K.i=$,K.id=$.uid,F.scheduler=()=>Sl(K),On($,!0),B()},I=($,T,g)=>{T.component=$;const v=$.vnode.props;$.vnode=T,$.next=null,av($,T.props,v,g),dv($,T.children,g),ln(),du($),un()},A=($,T,g,v,w,m,N,j,F=!1)=>{const B=$&&$.children,K=$?$.shapeFlag:0,G=T.children,{patchFlag:Z,shapeFlag:ne}=T;if(Z>0){if(Z&128){R(B,G,g,v,w,m,N,j,F);return}else if(Z&256){L(B,G,g,v,w,m,N,j,F);return}}ne&8?(K&16&&X(B,w,m),G!==B&&c(g,G)):K&16?ne&16?R(B,G,g,v,w,m,N,j,F):X(B,w,m,!0):(K&8&&c(g,""),ne&16&&O(G,g,v,w,m,N,j,F))},L=($,T,g,v,w,m,N,j,F)=>{$=$||hi,T=T||hi;const B=$.length,K=T.length,G=Math.min(B,K);let Z;for(Z=0;Z<G;Z++){const ne=T[Z]=F?bn(T[Z]):Lt(T[Z]);b($[Z],ne,g,null,w,m,N,j,F)}B>K?X($,w,m,!0,!1,G):O(T,g,v,w,m,N,j,F,G)},R=($,T,g,v,w,m,N,j,F)=>{let B=0;const K=T.length;let G=$.length-1,Z=K-1;for(;B<=G&&B<=Z;){const ne=$[B],he=T[B]=F?bn(T[B]):Lt(T[B]);if(Bi(ne,he))b(ne,he,g,null,w,m,N,j,F);else break;B++}for(;B<=G&&B<=Z;){const ne=$[G],he=T[Z]=F?bn(T[Z]):Lt(T[Z]);if(Bi(ne,he))b(ne,he,g,null,w,m,N,j,F);else break;G--,Z--}if(B>G){if(B<=Z){const ne=Z+1,he=ne<K?T[ne].el:v;for(;B<=Z;)b(null,T[B]=F?bn(T[B]):Lt(T[B]),g,he,w,m,N,j,F),B++}}else if(B>Z)for(;B<=G;)J($[B],w,m,!0),B++;else{const ne=B,he=B,xe=new Map;for(B=he;B<=Z;B++){const ct=T[B]=F?bn(T[B]):Lt(T[B]);ct.key!=null&&xe.set(ct.key,B)}let Ee,Xe=0;const ot=Z-he+1;let Nt=!1,It=0;const Ri=new Array(ot);for(B=0;B<ot;B++)Ri[B]=0;for(B=ne;B<=G;B++){const ct=$[B];if(Xe>=ot){J(ct,w,m,!0);continue}let Pt;if(ct.key!=null)Pt=xe.get(ct.key);else for(Ee=he;Ee<=Z;Ee++)if(Ri[Ee-he]===0&&Bi(ct,T[Ee])){Pt=Ee;break}Pt===void 0?J(ct,w,m,!0):(Ri[Pt-he]=B+1,Pt>=It?It=Pt:Nt=!0,b(ct,T[Pt],g,null,w,m,N,j,F),Xe++)}const ru=Nt?pv(Ri):hi;for(Ee=ru.length-1,B=ot-1;B>=0;B--){const ct=he+B,Pt=T[ct],ou=T[ct+1],su=ct+1<K?ou.el||ou.placeholder:v;Ri[B]===0?b(null,Pt,g,su,w,m,N,j,F):Nt&&(Ee<0||B!==ru[Ee]?q(Pt,g,su,2):Ee--)}}},q=($,T,g,v,w=null)=>{const{el:m,type:N,transition:j,children:F,shapeFlag:B}=$;if(B&6){q($.component.subTree,T,g,v);return}if(B&128){$.suspense.move(T,g,v);return}if(B&64){N.move($,T,g,ve);return}if(N===Ae){i(m,T,g);for(let G=0;G<F.length;G++)q(F[G],T,g,v);i($.anchor,T,g);return}if(N===po){_($,T,g);return}if(v!==2&&B&1&&j)if(v===0)j.beforeEnter(m),i(m,T,g),dt(()=>j.enter(m),w);else{const{leave:G,delayLeave:Z,afterLeave:ne}=j,he=()=>{$.ctx.isUnmounted?r(m):i(m,T,g)},xe=()=>{m._isLeaving&&m[jp](!0),G(m,()=>{he(),ne&&ne()})};Z?Z(m,he,xe):xe()}else i(m,T,g)},J=($,T,g,v=!1,w=!1)=>{const{type:m,props:N,ref:j,children:F,dynamicChildren:B,shapeFlag:K,patchFlag:G,dirs:Z,cacheIndex:ne}=$;if(G===-2&&(w=!1),j!=null&&(ln(),tr(j,null,g,$,!0),un()),ne!=null&&(T.renderCache[ne]=void 0),K&256){T.ctx.deactivate($);return}const he=K&1&&Z,xe=!mi($);let Ee;if(xe&&(Ee=N&&N.onVnodeBeforeUnmount)&&Ot(Ee,T,$),K&6)ee($.component,g,v);else{if(K&128){$.suspense.unmount(g,v);return}he&&Pn($,null,T,"beforeUnmount"),K&64?$.type.remove($,T,g,ve,v):B&&!B.hasOnce&&(m!==Ae||G>0&&G&64)?X(B,T,g,!1,!0):(m===Ae&&G&384||!w&&K&16)&&X(F,T,g),v&&ie($)}(xe&&(Ee=N&&N.onVnodeUnmounted)||he)&&dt(()=>{Ee&&Ot(Ee,T,$),he&&Pn($,null,T,"unmounted")},g)},ie=$=>{const{type:T,el:g,anchor:v,transition:w}=$;if(T===Ae){Y(g,v);return}if(T===po){y($);return}const m=()=>{r(g),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if($.shapeFlag&1&&w&&!w.persisted){const{leave:N,delayLeave:j}=w,F=()=>N(g,m);j?j($.el,m,F):F()}else m()},Y=($,T)=>{let g;for(;$!==T;)g=f($),r($),$=g;r(T)},ee=($,T,g)=>{const{bum:v,scope:w,job:m,subTree:N,um:j,m:F,a:B}=$;_u(F),_u(B),v&&ho(v),w.stop(),m&&(m.flags|=8,J(N,$,T,g)),j&&dt(j,T),dt(()=>{$.isUnmounted=!0},T)},X=($,T,g,v=!1,w=!1,m=0)=>{for(let N=m;N<$.length;N++)J($[N],T,g,v,w)},re=$=>{if($.shapeFlag&6)return re($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const T=f($.anchor||$.el),g=T&&T[zp];return g?f(g):T};let le=!1;const ce=($,T,g)=>{$==null?T._vnode&&J(T._vnode,null,null,!0):b(T._vnode||null,$,T,null,null,null,g),T._vnode=$,le||(le=!0,du(),Hd(),le=!1)},ve={p:b,um:J,m:q,r:ie,mt:p,mc:O,pc:A,pbc:H,n:re,o:e};return{render:ce,hydrate:void 0,createApp:ov(ce)}}function Ws({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function On({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function gv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pf(e,t,n=!1){const i=e.children,r=t.children;if(fe(i)&&fe(r))for(let o=0;o<i.length;o++){const s=i[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=bn(r[o]),a.el=s.el),!n&&a.patchFlag!==-2&&pf(s,a)),a.type===ys&&a.patchFlag!==-1&&(a.el=s.el),a.type===cn&&!a.el&&(a.el=s.el)}}function pv(e){const t=e.slice(),n=[0];let i,r,o,s,a;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(r=n[n.length-1],e[r]<u){t[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<u?o=a+1:s=a;u<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}function vf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:vf(t)}function _u(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const vv=Symbol.for("v-scx"),mv=()=>mt(vv);function mf(e,t){return Al(e,null,t)}function be(e,t,n){return Al(e,t,n)}function Al(e,t,n=Me){const{immediate:i,deep:r,flush:o,once:s}=n,a=et({},n),l=t&&i||!t&&o!=="post";let u;if(pr){if(o==="sync"){const h=mv();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=jt,h.resume=jt,h.pause=jt,h}}const c=Qe;a.call=(h,S,b)=>Vt(h,c,S,b);let d=!1;o==="post"?a.scheduler=h=>{dt(h,c&&c.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(h,S)=>{S?h():Sl(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=Mp(e,t,a);return pr&&(u?u.push(f):l&&f()),f}function yv(e,t,n){const i=this.proxy,r=Fe(e)?e.includes(".")?yf(i,e):()=>i[e]:e.bind(i,i);let o;ge(t)?o=t:(o=t.handler,n=t);const s=Mr(this),a=Al(r,o.bind(i),n);return s(),a}function yf(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const _v=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${yt(t)}Modifiers`]||e[`${ei(t)}Modifiers`];function wv(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Me;let r=n;const o=t.startsWith("update:"),s=o&&_v(i,t.slice(7));s&&(s.trim&&(r=n.map(c=>Fe(c)?c.trim():c)),s.number&&(r=n.map(yd)));let a,l=i[a=zs(t)]||i[a=zs(yt(t))];!l&&o&&(l=i[a=zs(ei(t))]),l&&Vt(l,e,6,r);const u=i[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Vt(u,e,6,r)}}const bv=new WeakMap;function _f(e,t,n=!1){const i=n?bv:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const o=e.emits;let s={},a=!1;if(!ge(e)){const l=u=>{const c=_f(u,t,!0);c&&(a=!0,et(s,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Pe(e)&&i.set(e,null),null):(fe(o)?o.forEach(l=>s[l]=null):et(s,o),Pe(e)&&i.set(e,s),s)}function ms(e,t){return!e||!ss(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ce(e,t[0].toLowerCase()+t.slice(1))||Ce(e,ei(t))||Ce(e,t))}function wu(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[o],slots:s,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:S,inheritAttrs:b}=e,E=Mo(e);let k,C;try{if(n.shapeFlag&4){const y=r||i,D=y;k=Lt(u.call(D,y,c,d,h,f,S)),C=a}else{const y=t;k=Lt(y.length>1?y(d,{attrs:a,slots:s,emit:l}):y(d,null)),C=t.props?a:Sv(a)}}catch(y){ir.length=0,ps(y,e,1),k=we(cn)}let _=k;if(C&&b!==!1){const y=Object.keys(C),{shapeFlag:D}=_;y.length&&D&7&&(o&&y.some(fl)&&(C=$v(C,o)),_=Ei(_,C,!1,!0))}return n.dirs&&(_=Ei(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&$l(_,n.transition),k=_,Mo(E),k}const Sv=e=>{let t;for(const n in e)(n==="class"||n==="style"||ss(n))&&((t||(t={}))[n]=e[n]);return t},$v=(e,t)=>{const n={};for(const i in e)(!fl(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function xv(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?bu(i,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(s[f]!==i[f]&&!ms(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?bu(i,s,u):!0:!!s;return!1}function bu(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!ms(n,o))return!0}return!1}function Ev({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const wf=e=>e.__isSuspense;function kv(e,t){t&&t.pendingBranch?fe(e)?t.effects.push(...e):t.effects.push(e):Bp(e)}const Ae=Symbol.for("v-fgt"),ys=Symbol.for("v-txt"),cn=Symbol.for("v-cmt"),po=Symbol.for("v-stc"),ir=[];let it=null;function se(e=!1){ir.push(it=e?null:[])}function Tv(){ir.pop(),it=ir[ir.length-1]||null}let xi=1;function Bo(e,t=!1){xi+=e,e<0&&it&&t&&(it.hasOnce=!0)}function bf(e){return e.dynamicChildren=xi>0?it||hi:null,Tv(),xi>0&&it&&it.push(e),e}function de(e,t,n,i,r,o){return bf(_e(e,t,n,i,r,o,!0))}function ze(e,t,n,i,r){return bf(we(e,t,n,i,r,!0))}function hr(e){return e?e.__v_isVNode===!0:!1}function Bi(e,t){return e.type===t.type&&e.key===t.key}const Sf=({key:e})=>e??null,vo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Fe(e)||je(e)||ge(e)?{i:Ye,r:e,k:t,f:!!n}:e:null);function _e(e,t=null,n=null,i=0,r=null,o=e===Ae?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sf(t),ref:t&&vo(t),scopeId:Wd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ye};return a?(Nl(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=Fe(n)?8:16),xi>0&&!s&&it&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&it.push(l),l}const we=Cv;function Cv(e,t=null,n=null,i=0,r=null,o=!1){if((!e||e===Zd)&&(e=cn),hr(e)){const a=Ei(e,t,!0);return n&&Nl(a,n),xi>0&&!o&&it&&(a.shapeFlag&6?it[it.indexOf(e)]=a:it.push(a)),a.patchFlag=-2,a}if(Lv(e)&&(e=e.__vccOpts),t){t=Av(t);let{class:a,style:l}=t;a&&!Fe(a)&&(t.class=rt(a)),Pe(l)&&(bl(l)&&!fe(l)&&(l=et({},l)),t.style=We(l))}const s=Fe(e)?1:wf(e)?128:Fp(e)?64:Pe(e)?4:ge(e)?2:0;return _e(e,t,n,i,r,s,o,!0)}function Av(e){return e?bl(e)||uf(e)?et({},e):e:null}function Ei(e,t,n=!1,i=!1){const{props:r,ref:o,patchFlag:s,children:a,transition:l}=e,u=t?gr(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Sf(u),ref:t&&t.ref?n&&o?fe(o)?o.concat(vo(t)):[o,vo(t)]:vo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ae?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ei(e.ssContent),ssFallback:e.ssFallback&&Ei(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&$l(c,l.clone(c)),c}function $f(e=" ",t=0){return we(ys,null,e,t)}function Nv(e,t){const n=we(po,null,e);return n.staticCount=t,n}function Le(e="",t=!1){return t?(se(),ze(cn,null,e)):we(cn,null,e)}function Lt(e){return e==null||typeof e=="boolean"?we(cn):fe(e)?we(Ae,null,e.slice()):hr(e)?bn(e):we(ys,null,String(e))}function bn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ei(e)}function Nl(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(fe(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Nl(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!uf(t)?t._ctx=Ye:r===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:Ye},n=32):(t=String(t),i&64?(n=16,t=[$f(t)]):n=8);e.children=t,e.shapeFlag|=n}function gr(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=rt([t.class,i.class]));else if(r==="style")t.style=We([t.style,i.style]);else if(ss(r)){const o=t[r],s=i[r];s&&o!==s&&!(fe(o)&&o.includes(s))&&(t[r]=o?[].concat(o,s):s)}else r!==""&&(t[r]=i[r])}return t}function Ot(e,t,n,i=null){Vt(e,t,7,[n,i])}const Iv=sf();let Pv=0;function Ov(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Iv,o={uid:Pv++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:df(i,r),emitsOptions:_f(i,r),emit:null,emitted:null,propsDefaults:Me,inheritAttrs:i.inheritAttrs,ctx:Me,data:Me,props:Me,attrs:Me,slots:Me,refs:Me,setupState:Me,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=wv.bind(null,o),e.ce&&e.ce(o),o}let Qe=null;const Nn=()=>Qe||Ye;let Lo,Ea;{const e=cs(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),o=>{r.length>1?r.forEach(s=>s(o)):r[0](o)}};Lo=t("__VUE_INSTANCE_SETTERS__",n=>Qe=n),Ea=t("__VUE_SSR_SETTERS__",n=>pr=n)}const Mr=e=>{const t=Qe;return Lo(e),e.scope.on(),()=>{e.scope.off(),Lo(t)}},Su=()=>{Qe&&Qe.scope.off(),Lo(null)};function xf(e){return e.vnode.shapeFlag&4}let pr=!1;function Mv(e,t=!1,n=!1){t&&Ea(t);const{props:i,children:r}=e.vnode,o=xf(e);sv(e,i,o,t),cv(e,r,n||t);const s=o?Rv(e,t):void 0;return t&&Ea(!1),s}function Rv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Jp);const{setup:i}=n;if(i){ln();const r=e.setupContext=i.length>1?kf(e):null,o=Mr(e),s=Or(i,e,0,[e.props,r]),a=gd(s);if(un(),o(),(a||e.sp)&&!mi(e)&&qd(e),a){if(s.then(Su,Su),t)return s.then(l=>{$u(e,l)}).catch(l=>{ps(l,e,0)});e.asyncDep=s}else $u(e,s)}else Ef(e)}function $u(e,t,n){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=zd(t)),Ef(e)}function Ef(e,t,n){const i=e.type;e.render||(e.render=i.render||jt);{const r=Mr(e);ln();try{Qp(e)}finally{un(),r()}}}const Dv={get(e,t){return Ze(e,"get",""),e[t]}};function kf(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Dv),slots:e.slots,emit:e.emit,expose:t}}function _s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(zd(er(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in nr)return nr[n](e)},has(t,n){return n in t||n in nr}})):e.proxy}function Bv(e,t=!0){return ge(e)?e.displayName||e.name:e.name||t&&e.__name}function Lv(e){return ge(e)&&"__vccOpts"in e}const ue=(e,t)=>Pp(e,t,pr);function Ne(e,t,n){try{Bo(-1);const i=arguments.length;return i===2?Pe(t)&&!fe(t)?hr(t)?we(e,null,[t]):we(e,t):we(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&hr(n)&&(n=[n]),we(e,t,n))}finally{Bo(1)}}function zv(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(an(n[i],t[i]))return!1;return xi>0&&it&&it.push(e),!0}const Fv="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ka;const xu=typeof window<"u"&&window.trustedTypes;if(xu)try{ka=xu.createPolicy("vue",{createHTML:e=>e})}catch{}const Tf=ka?e=>ka.createHTML(e):e=>e,jv="http://www.w3.org/2000/svg",Uv="http://www.w3.org/1998/Math/MathML",Jt=typeof document<"u"?document:null,Eu=Jt&&Jt.createElement("template"),Hv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?Jt.createElementNS(jv,e):t==="mathml"?Jt.createElementNS(Uv,e):n?Jt.createElement(e,{is:n}):Jt.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Jt.createTextNode(e),createComment:e=>Jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const s=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{Eu.innerHTML=Tf(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Eu.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Vv=Symbol("_vtc");function Wv(e,t,n){const i=e[Vv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ku=Symbol("_vod"),qv=Symbol("_vsh"),Gv=Symbol(""),Kv=/(?:^|;)\s*display\s*:/;function Yv(e,t,n){const i=e.style,r=Fe(n);let o=!1;if(n&&!r){if(t)if(Fe(t))for(const s of t.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&mo(i,a,"")}else for(const s in t)n[s]==null&&mo(i,s,"");for(const s in n)s==="display"&&(o=!0),mo(i,s,n[s])}else if(r){if(t!==n){const s=i[Gv];s&&(n+=";"+s),i.cssText=n,o=Kv.test(n)}}else t&&e.removeAttribute("style");ku in e&&(e[ku]=o?i.display:"",e[qv]&&(i.display="none"))}const Tu=/\s*!important$/;function mo(e,t,n){if(fe(n))n.forEach(i=>mo(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Xv(e,t);Tu.test(n)?e.setProperty(ei(i),n.replace(Tu,""),"important"):e[i]=n}}const Cu=["Webkit","Moz","ms"],qs={};function Xv(e,t){const n=qs[t];if(n)return n;let i=yt(t);if(i!=="filter"&&i in e)return qs[t]=i;i=us(i);for(let r=0;r<Cu.length;r++){const o=Cu[r]+i;if(o in e)return qs[t]=o}return t}const Au="http://www.w3.org/1999/xlink";function Nu(e,t,n,i,r,o=tp(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Au,t.slice(6,t.length)):e.setAttributeNS(Au,t,n):n==null||o&&!_d(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Tt(n)?String(n):n)}function Iu(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Tf(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=_d(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(r||t)}function Cf(e,t,n,i){e.addEventListener(t,n,i)}function Jv(e,t,n,i){e.removeEventListener(t,n,i)}const Pu=Symbol("_vei");function Zv(e,t,n,i,r=null){const o=e[Pu]||(e[Pu]={}),s=o[t];if(i&&s)s.value=i;else{const[a,l]=Qv(t);if(i){const u=o[t]=nm(i,r);Cf(e,a,u,l)}else s&&(Jv(e,a,s,l),o[t]=void 0)}}const Ou=/(?:Once|Passive|Capture)$/;function Qv(e){let t;if(Ou.test(e)){t={};let i;for(;i=e.match(Ou);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ei(e.slice(2)),t]}let Gs=0;const em=Promise.resolve(),tm=()=>Gs||(em.then(()=>Gs=0),Gs=Date.now());function nm(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Vt(im(i,n.value),t,5,[i])};return n.value=e,n.attached=tm(),n}function im(e,t){if(fe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Mu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,rm=(e,t,n,i,r,o)=>{const s=r==="svg";t==="class"?Wv(e,i,s):t==="style"?Yv(e,n,i):ss(t)?fl(t)||Zv(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):om(e,t,i,s))?(Iu(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Nu(e,t,i,s,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Fe(i))?Iu(e,yt(t),i,o,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Nu(e,t,i,s))};function om(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Mu(t)&&ge(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Mu(t)&&Fe(n)?!1:t in e}const Ru=e=>{const t=e.props["onUpdate:modelValue"]||!1;return fe(t)?n=>ho(t,n):t},Ks=Symbol("_assign"),sm={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=as(t);Cf(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?yd(zo(s)):zo(s));e[Ks](e.multiple?r?new Set(o):o:o[0]),e._assigning=!0,kt(()=>{e._assigning=!1})}),e[Ks]=Ru(i)},mounted(e,{value:t}){Du(e,t)},beforeUpdate(e,t,n){e[Ks]=Ru(n)},updated(e,{value:t}){e._assigning||Du(e,t)}};function Du(e,t){const n=e.multiple,i=fe(t);if(!(n&&!i&&!as(t))){for(let r=0,o=e.options.length;r<o;r++){const s=e.options[r],a=zo(s);if(n)if(i){const l=typeof a;l==="string"||l==="number"?s.selected=t.some(u=>String(u)===String(a)):s.selected=ip(t,a)>-1}else s.selected=t.has(a);else if(ds(zo(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function zo(e){return"_value"in e?e._value:e.value}const am=et({patchProp:rm},Hv);let Bu;function lm(){return Bu||(Bu=fv(am))}const um=(...e)=>{const t=lm().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=dm(i);if(!r)return;const o=t._component;!ge(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=n(r,!1,cm(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function cm(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function dm(e){return Fe(e)?document.querySelector(e):e}const fm=[{id:"auth",label:"Auth Proxy",tooltip:"Traefik + oauth2-proxy",x:60,y:60,width:200,height:100,type:"infra"},{id:"bff",label:"Admin BFF",tooltip:"Handles UI + tokens",x:340,y:200,width:220,height:120,type:"backend"},{id:"grafana",label:"Grafana",tooltip:"Dashboards + Live WS",x:640,y:60,width:200,height:100,type:"monitoring"},{id:"loki",label:"Loki",tooltip:"Log backend",x:640,y:260,width:200,height:100,type:"backend"}],hm=[{id:"e1",source:"auth",target:"bff"},{id:"e2",source:"bff",target:"grafana"},{id:"e3",source:"grafana",target:"loki"}],Lu={nodes:fm,edges:hm};function vr(e){return pl()?(go(e),!0):!1}function tn(e){return typeof e=="function"?e():te(e)}const gm=typeof window<"u"&&typeof document<"u",pm=e=>typeof e<"u",vm=Object.prototype.toString,mm=e=>vm.call(e)==="[object Object]",ym=()=>{};function _m(e,t){function n(...i){return new Promise((r,o)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(o)})}return n}const Af=e=>e();function wm(e=Af){const t=Te(!0);function n(){t.value=!1}function i(){t.value=!0}const r=(...o)=>{t.value&&e(...o)};return{isActive:Ao(t),pause:n,resume:i,eventFilter:r}}function zu(e,t=!1,n="Timeout"){return new Promise((i,r)=>{setTimeout(t?()=>r(n):i,e)})}function bm(e,t,n={}){const{eventFilter:i=Af,...r}=n;return be(e,_m(i,t),r)}function ii(e,t,n={}){const{eventFilter:i,...r}=n,{eventFilter:o,pause:s,resume:a,isActive:l}=wm(i);return{stop:bm(e,t,{...r,eventFilter:o}),pause:s,resume:a,isActive:l}}function Sm(e,t={}){if(!je(e))return Cp(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const i in e.value)n[i]=Tp(()=>({get(){return e.value[i]},set(r){var o;if((o=tn(t.replaceRef))!=null?o:!0)if(Array.isArray(e.value)){const a=[...e.value];a[i]=r,e.value=a}else{const a={...e.value,[i]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[i]=r}}));return n}function Ta(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:S,throwOnTimeout:b}={}){let E=null;const C=[new Promise(_=>{E=be(e,y=>{d(y)!==t&&(E==null||E(),_(y))},{flush:f,deep:h,immediate:!0})})];return S!=null&&C.push(zu(S,b).then(()=>tn(e)).finally(()=>E==null?void 0:E())),Promise.race(C)}function i(d,f){if(!je(d))return n(y=>y===d,f);const{flush:h="sync",deep:S=!1,timeout:b,throwOnTimeout:E}=f??{};let k=null;const _=[new Promise(y=>{k=be([e,d],([D,U])=>{t!==(D===U)&&(k==null||k(),y(D))},{flush:h,deep:S,immediate:!0})})];return b!=null&&_.push(zu(b,E).then(()=>tn(e)).finally(()=>(k==null||k(),tn(e)))),Promise.race(_)}function r(d){return n(f=>!!f,d)}function o(d){return i(null,d)}function s(d){return i(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const S=Array.from(h);return S.includes(d)||S.includes(tn(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(tn(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return Ta(e,!t)}}:{toMatch:n,toBe:i,toBeTruthy:r,toBeNull:o,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return Ta(e,!t)}}}function Ca(e){return Ta(e)}function $m(e){var t;const n=tn(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Nf=gm?window:void 0;function If(...e){let t,n,i,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,r]=e,t=Nf):[t,n,i,r]=e,!t)return ym;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],s=()=>{o.forEach(c=>c()),o.length=0},a=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=be(()=>[$m(t),tn(r)],([c,d])=>{if(s(),!c)return;const f=mm(d)?{...d}:d;o.push(...n.flatMap(h=>i.map(S=>a(c,h,S,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return vr(u),u}function xm(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Fu(...e){let t,n,i={};e.length===3?(t=e[0],n=e[1],i=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],i=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Nf,eventName:o="keydown",passive:s=!1,dedupe:a=!1}=i,l=xm(t);return If(r,o,c=>{c.repeat&&tn(a)||l(c)&&n(c)},s)}function Em(e){return JSON.parse(JSON.stringify(e))}function Ys(e,t,n,i={}){var r,o,s;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=i,h=Nn(),S=n||(h==null?void 0:h.emit)||((r=h==null?void 0:h.$emit)==null?void 0:r.bind(h))||((s=(o=h==null?void 0:h.proxy)==null?void 0:o.$emit)==null?void 0:s.bind(h==null?void 0:h.proxy));let b=u;t||(t="modelValue"),b=b||`update:${t.toString()}`;const E=_=>a?typeof a=="function"?a(_):Em(_):_,k=()=>pm(e[t])?E(e[t]):d,C=_=>{f?f(_)&&S(b,_):S(b,_)};if(l){const _=k(),y=Te(_);let D=!1;return be(()=>e[t],U=>{D||(D=!0,y.value=E(U),kt(()=>D=!1))}),be(y,U=>{!D&&(U!==e[t]||c)&&C(U)},{deep:c}),y}else return ue({get(){return k()},set(_){C(_)}})}var km={value:()=>{}};function ws(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new yo(n)}function yo(e){this._=e}function Tm(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}yo.prototype=ws.prototype={constructor:yo,on:function(e,t){var n=this._,i=Tm(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=Cm(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=ju(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ju(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yo(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Cm(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function ju(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=km,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Aa="http://www.w3.org/1999/xhtml";const Uu={svg:"http://www.w3.org/2000/svg",xhtml:Aa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uu.hasOwnProperty(t)?{space:Uu[t],local:e}:e}function Am(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Aa&&t.documentElement.namespaceURI===Aa?t.createElement(e):t.createElementNS(n,e)}}function Nm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pf(e){var t=bs(e);return(t.local?Nm:Am)(t)}function Im(){}function Il(e){return e==null?Im:function(){return this.querySelector(e)}}function Pm(e){typeof e!="function"&&(e=Il(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new ft(i,this._parents)}function Om(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mm(){return[]}function Of(e){return e==null?Mm:function(){return this.querySelectorAll(e)}}function Rm(e){return function(){return Om(e.apply(this,arguments))}}function Dm(e){typeof e=="function"?e=Rm(e):e=Of(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),r.push(l));return new ft(i,r)}function Mf(e){return function(){return this.matches(e)}}function Rf(e){return function(t){return t.matches(e)}}var Bm=Array.prototype.find;function Lm(e){return function(){return Bm.call(this.children,e)}}function zm(){return this.firstElementChild}function Fm(e){return this.select(e==null?zm:Lm(typeof e=="function"?e:Rf(e)))}var jm=Array.prototype.filter;function Um(){return Array.from(this.children)}function Hm(e){return function(){return jm.call(this.children,e)}}function Vm(e){return this.selectAll(e==null?Um:Hm(typeof e=="function"?e:Rf(e)))}function Wm(e){typeof e!="function"&&(e=Mf(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new ft(i,this._parents)}function Df(e){return new Array(e.length)}function qm(){return new ft(this._enter||this._groups.map(Df),this._parents)}function Fo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fo.prototype={constructor:Fo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gm(e){return function(){return e}}function Km(e,t,n,i,r,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new Fo(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Ym(e,t,n,i,r,o,s){var a,l,u=new Map,c=t.length,d=o.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(l=u.get(h))?(i[a]=l,l.__data__=o[a],u.delete(h)):n[a]=new Fo(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function Xm(e){return e.__data__}function Jm(e,t){if(!arguments.length)return Array.from(this,Xm);var n=t?Ym:Km,i=this._parents,r=this._groups;typeof e!="function"&&(e=Gm(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],d=r[u],f=d.length,h=Zm(e.call(c,c&&c.__data__,u,i)),S=h.length,b=a[u]=new Array(S),E=s[u]=new Array(S),k=l[u]=new Array(f);n(c,d,b,E,k,h,t);for(var C=0,_=0,y,D;C<S;++C)if(y=b[C]){for(C>=_&&(_=C+1);!(D=E[_])&&++_<S;);y._next=D||null}}return s=new ft(s,i),s._enter=a,s._exit=l,s}function Zm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qm(){return new ft(this._exit||this._groups.map(Df),this._parents)}function ey(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function ty(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=i[l],d=u.length,f=a[l]=new Array(d),h,S=0;S<d;++S)(h=u[S]||c[S])&&(f[S]=h);for(;l<r;++l)a[l]=n[l];return new ft(a,this._parents)}function ny(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function iy(e){e||(e=ry);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new ft(r,this._parents).order()}function ry(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function oy(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sy(){return Array.from(this)}function ay(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function ly(){let e=0;for(const t of this)++e;return e}function uy(){return!this.node()}function cy(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function dy(e){return function(){this.removeAttribute(e)}}function fy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hy(e,t){return function(){this.setAttribute(e,t)}}function gy(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function py(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function my(e,t){var n=bs(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?fy:dy:typeof t=="function"?n.local?vy:py:n.local?gy:hy)(n,t))}function Bf(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yy(e){return function(){this.style.removeProperty(e)}}function _y(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wy(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function by(e,t,n){return arguments.length>1?this.each((t==null?yy:typeof t=="function"?wy:_y)(e,t,n??"")):ki(this.node(),e)}function ki(e,t){return e.style.getPropertyValue(t)||Bf(e).getComputedStyle(e,null).getPropertyValue(t)}function Sy(e){return function(){delete this[e]}}function $y(e,t){return function(){this[e]=t}}function xy(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ey(e,t){return arguments.length>1?this.each((t==null?Sy:typeof t=="function"?xy:$y)(e,t)):this.node()[e]}function Lf(e){return e.trim().split(/^|\s+/)}function Pl(e){return e.classList||new zf(e)}function zf(e){this._node=e,this._names=Lf(e.getAttribute("class")||"")}zf.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ff(e,t){for(var n=Pl(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function jf(e,t){for(var n=Pl(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function ky(e){return function(){Ff(this,e)}}function Ty(e){return function(){jf(this,e)}}function Cy(e,t){return function(){(t.apply(this,arguments)?Ff:jf)(this,e)}}function Ay(e,t){var n=Lf(e+"");if(arguments.length<2){for(var i=Pl(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cy:t?ky:Ty)(n,t))}function Ny(){this.textContent=""}function Iy(e){return function(){this.textContent=e}}function Py(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Oy(e){return arguments.length?this.each(e==null?Ny:(typeof e=="function"?Py:Iy)(e)):this.node().textContent}function My(){this.innerHTML=""}function Ry(e){return function(){this.innerHTML=e}}function Dy(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function By(e){return arguments.length?this.each(e==null?My:(typeof e=="function"?Dy:Ry)(e)):this.node().innerHTML}function Ly(){this.nextSibling&&this.parentNode.appendChild(this)}function zy(){return this.each(Ly)}function Fy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jy(){return this.each(Fy)}function Uy(e){var t=typeof e=="function"?e:Pf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hy(){return null}function Vy(e,t){var n=typeof e=="function"?e:Pf(e),i=t==null?Hy:typeof t=="function"?t:Il(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Wy(){var e=this.parentNode;e&&e.removeChild(this)}function qy(){return this.each(Wy)}function Gy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ky(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yy(e){return this.select(e?Ky:Gy)}function Xy(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jy(e){return function(t){e.call(this,t,this.__data__)}}function Zy(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Qy(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function e0(e,t,n){return function(){var i=this.__on,r,o=Jy(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function t0(e,t,n){var i=Zy(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?e0:Qy,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function Uf(e,t,n){var i=Bf(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function n0(e,t){return function(){return Uf(this,e,t)}}function i0(e,t){return function(){return Uf(this,e,t.apply(this,arguments))}}function r0(e,t){return this.each((typeof t=="function"?i0:n0)(e,t))}function*o0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Hf=[null];function ft(e,t){this._groups=e,this._parents=t}function Rr(){return new ft([[document.documentElement]],Hf)}function s0(){return this}ft.prototype=Rr.prototype={constructor:ft,select:Pm,selectAll:Dm,selectChild:Fm,selectChildren:Vm,filter:Wm,data:Jm,enter:qm,exit:Qm,join:ey,merge:ty,selection:s0,order:ny,sort:iy,call:oy,nodes:sy,node:ay,size:ly,empty:uy,each:cy,attr:my,style:by,property:Ey,classed:Ay,text:Oy,html:By,raise:zy,lower:jy,append:Uy,insert:Vy,remove:qy,clone:Yy,datum:Xy,on:t0,dispatch:r0,[Symbol.iterator]:o0};function St(e){return typeof e=="string"?new ft([[document.querySelector(e)]],[document.documentElement]):new ft([[e]],Hf)}function a0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Bt(e,t){if(e=a0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const l0={passive:!1},mr={capture:!0,passive:!1};function Xs(e){e.stopImmediatePropagation()}function _i(e){e.preventDefault(),e.stopImmediatePropagation()}function Vf(e){var t=e.document.documentElement,n=St(e).on("dragstart.drag",_i,mr);"onselectstart"in t?n.on("selectstart.drag",_i,mr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wf(e,t){var n=e.document.documentElement,i=St(e).on("dragstart.drag",null);t&&(i.on("click.drag",_i,mr),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qr=e=>()=>e;function Na(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Na.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function u0(e){return!e.ctrlKey&&!e.button}function c0(){return this.parentNode}function d0(e,t){return t??{x:e.x,y:e.y}}function f0(){return navigator.maxTouchPoints||"ontouchstart"in this}function h0(){var e=u0,t=c0,n=d0,i=f0,r={},o=ws("start","drag","end"),s=0,a,l,u,c,d=0;function f(y){y.on("mousedown.drag",h).filter(i).on("touchstart.drag",E).on("touchmove.drag",k,l0).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,D){if(!(c||!e.call(this,y,D))){var U=_(this,t.call(this,y,D),y,D,"mouse");U&&(St(y.view).on("mousemove.drag",S,mr).on("mouseup.drag",b,mr),Vf(y.view),Xs(y),u=!1,a=y.clientX,l=y.clientY,U("start",y))}}function S(y){if(_i(y),!u){var D=y.clientX-a,U=y.clientY-l;u=D*D+U*U>d}r.mouse("drag",y)}function b(y){St(y.view).on("mousemove.drag mouseup.drag",null),Wf(y.view,u),_i(y),r.mouse("end",y)}function E(y,D){if(e.call(this,y,D)){var U=y.changedTouches,z=t.call(this,y,D),O=U.length,V,H;for(V=0;V<O;++V)(H=_(this,z,y,D,U[V].identifier,U[V]))&&(Xs(y),H("start",y,U[V]))}}function k(y){var D=y.changedTouches,U=D.length,z,O;for(z=0;z<U;++z)(O=r[D[z].identifier])&&(_i(y),O("drag",y,D[z]))}function C(y){var D=y.changedTouches,U=D.length,z,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),z=0;z<U;++z)(O=r[D[z].identifier])&&(Xs(y),O("end",y,D[z]))}function _(y,D,U,z,O,V){var H=o.copy(),W=Bt(V||U,D),P,Q,p;if((p=n.call(y,new Na("beforestart",{sourceEvent:U,target:f,identifier:O,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:H}),z))!=null)return P=p.x-W[0]||0,Q=p.y-W[1]||0,function M(x,I,A){var L=W,R;switch(x){case"start":r[O]=M,R=s++;break;case"end":delete r[O],--s;case"drag":W=Bt(A||I,D),R=s;break}H.call(x,y,new Na(x,{sourceEvent:I,subject:p,target:f,identifier:O,active:R,x:W[0]+P,y:W[1]+Q,dx:W[0]-L[0],dy:W[1]-L[1],dispatch:H}),z)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:qr(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:qr(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:qr(y),f):n},f.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:qr(!!y),f):i},f.on=function(){var y=o.on.apply(o,arguments);return y===o?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function Ol(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qf(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Dr(){}var yr=.7,jo=1/yr,wi="\\s*([+-]?\\d+)\\s*",_r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g0=/^#([0-9a-f]{3,8})$/,p0=new RegExp(`^rgb\\(${wi},${wi},${wi}\\)$`),v0=new RegExp(`^rgb\\(${Ut},${Ut},${Ut}\\)$`),m0=new RegExp(`^rgba\\(${wi},${wi},${wi},${_r}\\)$`),y0=new RegExp(`^rgba\\(${Ut},${Ut},${Ut},${_r}\\)$`),_0=new RegExp(`^hsl\\(${_r},${Ut},${Ut}\\)$`),w0=new RegExp(`^hsla\\(${_r},${Ut},${Ut},${_r}\\)$`),Hu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ol(Dr,Xn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vu,formatHex:Vu,formatHex8:b0,formatHsl:S0,formatRgb:Wu,toString:Wu});function Vu(){return this.rgb().formatHex()}function b0(){return this.rgb().formatHex8()}function S0(){return Gf(this).formatHsl()}function Wu(){return this.rgb().formatRgb()}function Xn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=g0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qu(t):n===3?new lt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=p0.exec(e))?new lt(t[1],t[2],t[3],1):(t=v0.exec(e))?new lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=m0.exec(e))?Gr(t[1],t[2],t[3],t[4]):(t=y0.exec(e))?Gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_0.exec(e))?Yu(t[1],t[2]/100,t[3]/100,1):(t=w0.exec(e))?Yu(t[1],t[2]/100,t[3]/100,t[4]):Hu.hasOwnProperty(e)?qu(Hu[e]):e==="transparent"?new lt(NaN,NaN,NaN,0):null}function qu(e){return new lt(e>>16&255,e>>8&255,e&255,1)}function Gr(e,t,n,i){return i<=0&&(e=t=n=NaN),new lt(e,t,n,i)}function $0(e){return e instanceof Dr||(e=Xn(e)),e?(e=e.rgb(),new lt(e.r,e.g,e.b,e.opacity)):new lt}function Ia(e,t,n,i){return arguments.length===1?$0(e):new lt(e,t,n,i??1)}function lt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ol(lt,Ia,qf(Dr,{brighter(e){return e=e==null?jo:Math.pow(jo,e),new lt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new lt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lt(qn(this.r),qn(this.g),qn(this.b),Uo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gu,formatHex:Gu,formatHex8:x0,formatRgb:Ku,toString:Ku}));function Gu(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}`}function x0(){return`#${Hn(this.r)}${Hn(this.g)}${Hn(this.b)}${Hn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ku(){const e=Uo(this.opacity);return`${e===1?"rgb(":"rgba("}${qn(this.r)}, ${qn(this.g)}, ${qn(this.b)}${e===1?")":`, ${e})`}`}function Uo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hn(e){return e=qn(e),(e<16?"0":"")+e.toString(16)}function Yu(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $t(e,t,n,i)}function Gf(e){if(e instanceof $t)return new $t(e.h,e.s,e.l,e.opacity);if(e instanceof Dr||(e=Xn(e)),!e)return new $t;if(e instanceof $t)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new $t(s,a,l,e.opacity)}function E0(e,t,n,i){return arguments.length===1?Gf(e):new $t(e,t,n,i??1)}function $t(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ol($t,E0,qf(Dr,{brighter(e){return e=e==null?jo:Math.pow(jo,e),new $t(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new $t(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new lt(Js(e>=240?e-240:e+120,r,i),Js(e,r,i),Js(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new $t(Xu(this.h),Kr(this.s),Kr(this.l),Uo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uo(this.opacity);return`${e===1?"hsl(":"hsla("}${Xu(this.h)}, ${Kr(this.s)*100}%, ${Kr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xu(e){return e=(e||0)%360,e<0?e+360:e}function Kr(e){return Math.max(0,Math.min(1,e||0))}function Js(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ml=e=>()=>e;function k0(e,t){return function(n){return e+n*t}}function T0(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function C0(e){return(e=+e)==1?Kf:function(t,n){return n-t?T0(t,n,e):Ml(isNaN(t)?n:t)}}function Kf(e,t){var n=t-e;return n?k0(e,n):Ml(isNaN(e)?t:e)}const Ho=function e(t){var n=C0(t);function i(r,o){var s=n((r=Ia(r)).r,(o=Ia(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=Kf(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function A0(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function N0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function I0(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),s;for(s=0;s<i;++s)r[s]=rr(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function P0(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function zt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function O0(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=rr(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Pa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zs=new RegExp(Pa.source,"g");function M0(e){return function(){return e}}function R0(e){return function(t){return e(t)+""}}function Yf(e,t){var n=Pa.lastIndex=Zs.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Pa.exec(e))&&(r=Zs.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:zt(i,r)})),n=Zs.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?R0(l[0].x):M0(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function rr(e,t){var n=typeof t,i;return t==null||n==="boolean"?Ml(t):(n==="number"?zt:n==="string"?(i=Xn(t))?(t=i,Ho):Yf:t instanceof Xn?Ho:t instanceof Date?P0:N0(t)?A0:Array.isArray(t)?I0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?O0:zt)(e,t)}var Ju=180/Math.PI,Oa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xf(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Ju,skewX:Math.atan(l)*Ju,scaleX:s,scaleY:a}}var Yr;function D0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Oa:Xf(t.a,t.b,t.c,t.d,t.e,t.f)}function B0(e){return e==null||(Yr||(Yr=document.createElementNS("http://www.w3.org/2000/svg","g")),Yr.setAttribute("transform",e),!(e=Yr.transform.baseVal.consolidate()))?Oa:(e=e.matrix,Xf(e.a,e.b,e.c,e.d,e.e,e.f))}function Jf(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,h,S){if(u!==d||c!==f){var b=h.push("translate(",null,t,null,n);S.push({i:b-4,x:zt(u,d)},{i:b-2,x:zt(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:zt(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:zt(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,f,h,S){if(u!==d||c!==f){var b=h.push(r(h)+"scale(",null,",",null,")");S.push({i:b-4,x:zt(u,d)},{i:b-2,x:zt(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var S=-1,b=f.length,E;++S<b;)d[(E=f[S]).i]=E.x(h);return d.join("")}}}var L0=Jf(D0,"px, ","px)","deg)"),z0=Jf(B0,", ",")",")"),F0=1e-12;function Zu(e){return((e=Math.exp(e))+1/e)/2}function j0(e){return((e=Math.exp(e))-1/e)/2}function U0(e){return((e=Math.exp(2*e))-1)/(e+1)}const _o=function e(t,n,i){function r(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],d=s[1],f=s[2],h=c-a,S=d-l,b=h*h+S*S,E,k;if(b<F0)k=Math.log(f/u)/t,E=function(z){return[a+z*h,l+z*S,u*Math.exp(t*z*k)]};else{var C=Math.sqrt(b),_=(f*f-u*u+i*b)/(2*u*n*C),y=(f*f-u*u-i*b)/(2*f*n*C),D=Math.log(Math.sqrt(_*_+1)-_),U=Math.log(Math.sqrt(y*y+1)-y);k=(U-D)/t,E=function(z){var O=z*k,V=Zu(D),H=u/(n*C)*(V*U0(t*O+D)-j0(D));return[a+H*h,l+H*S,u*V/Zu(t*O+D)]}}return E.duration=k*1e3*t/Math.SQRT2,E}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},r}(Math.SQRT2,2,4);var Ti=0,Wi=0,Li=0,Zf=1e3,Vo,qi,Wo=0,Jn=0,Ss=0,wr=typeof performance=="object"&&performance.now?performance:Date,Qf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rl(){return Jn||(Qf(H0),Jn=wr.now()+Ss)}function H0(){Jn=0}function qo(){this._call=this._time=this._next=null}qo.prototype=eh.prototype={constructor:qo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rl():+n)+(t==null?0:+t),!this._next&&qi!==this&&(qi?qi._next=this:Vo=this,qi=this),this._call=e,this._time=n,Ma()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ma())}};function eh(e,t,n){var i=new qo;return i.restart(e,t,n),i}function V0(){Rl(),++Ti;for(var e=Vo,t;e;)(t=Jn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ti}function Qu(){Jn=(Wo=wr.now())+Ss,Ti=Wi=0;try{V0()}finally{Ti=0,q0(),Jn=0}}function W0(){var e=wr.now(),t=e-Wo;t>Zf&&(Ss-=t,Wo=e)}function q0(){for(var e,t=Vo,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vo=n);qi=e,Ma(i)}function Ma(e){if(!Ti){Wi&&(Wi=clearTimeout(Wi));var t=e-Jn;t>24?(e<1/0&&(Wi=setTimeout(Qu,e-wr.now()-Ss)),Li&&(Li=clearInterval(Li))):(Li||(Wo=wr.now(),Li=setInterval(W0,Zf)),Ti=1,Qf(Qu))}}function ec(e,t,n){var i=new qo;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var G0=ws("start","end","cancel","interrupt"),K0=[],th=0,tc=1,Ra=2,wo=3,nc=4,Da=5,bo=6;function $s(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Y0(e,n,{name:t,index:i,group:r,on:G0,tween:K0,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:th})}function Dl(e,t){var n=Ct(e,t);if(n.state>th)throw new Error("too late; already scheduled");return n}function qt(e,t){var n=Ct(e,t);if(n.state>wo)throw new Error("too late; already running");return n}function Ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Y0(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=eh(o,0,n.time);function o(u){n.state=tc,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==tc)return l();for(c in i)if(h=i[c],h.name===n.name){if(h.state===wo)return ec(s);h.state===nc?(h.state=bo,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=bo,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(ec(function(){n.state===wo&&(n.state=nc,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ra,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ra){for(n.state=wo,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Da,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Da&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=bo,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function So(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>Ra&&i.state<Da,i.state=bo,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function X0(e){return this.each(function(){So(this,e)})}function J0(e,t){var n,i;return function(){var r=qt(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Z0(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=qt(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function Q0(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ct(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?J0:Z0)(n,e,t))}function Bl(e,t,n){var i=e._id;return e.each(function(){var r=qt(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ct(r,i).value[t]}}function nh(e,t){var n;return(typeof t=="number"?zt:t instanceof Xn?Ho:(n=Xn(t))?(t=n,Ho):Yf)(e,t)}function e_(e){return function(){this.removeAttribute(e)}}function t_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n_(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function i_(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function r_(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function o_(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function s_(e,t){var n=bs(e),i=n==="transform"?z0:nh;return this.attrTween(e,typeof t=="function"?(n.local?o_:r_)(n,i,Bl(this,"attr."+e,t)):t==null?(n.local?t_:e_)(n):(n.local?i_:n_)(n,i,t))}function a_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function l_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function u_(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&l_(e,o)),n}return r._value=t,r}function c_(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&a_(e,o)),n}return r._value=t,r}function d_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=bs(e);return this.tween(n,(i.local?u_:c_)(i,t))}function f_(e,t){return function(){Dl(this,e).delay=+t.apply(this,arguments)}}function h_(e,t){return t=+t,function(){Dl(this,e).delay=t}}function g_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?f_:h_)(t,e)):Ct(this.node(),t).delay}function p_(e,t){return function(){qt(this,e).duration=+t.apply(this,arguments)}}function v_(e,t){return t=+t,function(){qt(this,e).duration=t}}function m_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p_:v_)(t,e)):Ct(this.node(),t).duration}function y_(e,t){if(typeof t!="function")throw new Error;return function(){qt(this,e).ease=t}}function __(e){var t=this._id;return arguments.length?this.each(y_(t,e)):Ct(this.node(),t).ease}function w_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qt(this,e).ease=n}}function b_(e){if(typeof e!="function")throw new Error;return this.each(w_(this._id,e))}function S_(e){typeof e!="function"&&(e=Mf(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new dn(i,this._parents,this._name,this._id)}function $_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<i;++a)s[a]=t[a];return new dn(s,this._parents,this._name,this._id)}function x_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function E_(e,t,n){var i,r,o=x_(t)?Dl:qt;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function k_(e,t){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(e):this.each(E_(n,e,t))}function T_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function C_(){return this.on("end.remove",T_(this._id))}function A_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Il(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,u=o[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,$s(u[f],t,n,f,u,Ct(c,n)));return new dn(o,this._parents,t,n)}function N_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Of(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,S=Ct(c,n),b=0,E=f.length;b<E;++b)(h=f[b])&&$s(h,t,n,b,f,S);o.push(f),s.push(c)}return new dn(o,s,t,n)}var I_=Rr.prototype.constructor;function P_(){return new I_(this._groups,this._parents)}function O_(e,t){var n,i,r;return function(){var o=ki(this,e),s=(this.style.removeProperty(e),ki(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function ih(e){return function(){this.style.removeProperty(e)}}function M_(e,t,n){var i,r=n+"",o;return function(){var s=ki(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function R_(e,t,n){var i,r,o;return function(){var s=ki(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),ki(this,e))),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function D_(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var l=qt(this,e),u=l.on,c=l.value[o]==null?a||(a=ih(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(s,r=c),l.on=i}}function B_(e,t,n){var i=(e+="")=="transform"?L0:nh;return t==null?this.styleTween(e,O_(e,i)).on("end.style."+e,ih(e)):typeof t=="function"?this.styleTween(e,R_(e,i,Bl(this,"style."+e,t))).each(D_(this._id,e)):this.styleTween(e,M_(e,i,t),n).on("end.style."+e,null)}function L_(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function z_(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&L_(e,s,n)),i}return o._value=t,o}function F_(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,z_(e,t,n??""))}function j_(e){return function(){this.textContent=e}}function U_(e){return function(){var t=e(this);this.textContent=t??""}}function H_(e){return this.tween("text",typeof e=="function"?U_(Bl(this,"text",e)):j_(e==null?"":e+""))}function V_(e){return function(t){this.textContent=e.call(this,t)}}function W_(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&V_(r)),t}return i._value=e,i}function q_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,W_(e))}function G_(){for(var e=this._name,t=this._id,n=rh(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=Ct(l,t);$s(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new dn(i,this._parents,e,n)}function K_(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var u=qt(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&o()})}var Y_=0;function dn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function rh(){return++Y_}var Yt=Rr.prototype;dn.prototype={constructor:dn,select:A_,selectAll:N_,selectChild:Yt.selectChild,selectChildren:Yt.selectChildren,filter:S_,merge:$_,selection:P_,transition:G_,call:Yt.call,nodes:Yt.nodes,node:Yt.node,size:Yt.size,empty:Yt.empty,each:Yt.each,on:k_,attr:s_,attrTween:d_,style:B_,styleTween:F_,text:H_,textTween:q_,remove:C_,tween:Q0,delay:g_,duration:m_,ease:__,easeVarying:b_,end:K_,[Symbol.iterator]:Yt[Symbol.iterator]};function X_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var J_={time:null,delay:0,duration:250,ease:X_};function Z_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Q_(e){var t,n;e instanceof dn?(t=e._id,e=e._name):(t=rh(),(n=J_).time=Rl(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&$s(l,e,t,u,s,n||Z_(l,t));return new dn(i,this._parents,e,t)}Rr.prototype.interrupt=X0;Rr.prototype.transition=Q_;const Xr=e=>()=>e;function ew(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function rn(e,t,n){this.k=e,this.x=t,this.y=n}rn.prototype={constructor:rn,scale:function(e){return e===1?this:new rn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ci=new rn(1,0,0);rn.prototype;function Qs(e){e.stopImmediatePropagation()}function zi(e){e.preventDefault(),e.stopImmediatePropagation()}function tw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ic(){return this.__zoom||Ci}function iw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rw(){return navigator.maxTouchPoints||"ontouchstart"in this}function ow(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function sw(){var e=tw,t=nw,n=ow,i=iw,r=rw,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=_o,u=ws("start","zoom","end"),c,d,f,h=500,S=150,b=0,E=10;function k(p){p.property("__zoom",ic).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",W).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(p,M,x,I){var A=p.selection?p.selection():p;A.property("__zoom",ic),p!==A?D(p,M,x,I):A.interrupt().each(function(){U(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},k.scaleBy=function(p,M,x,I){k.scaleTo(p,function(){var A=this.__zoom.k,L=typeof M=="function"?M.apply(this,arguments):M;return A*L},x,I)},k.scaleTo=function(p,M,x,I){k.transform(p,function(){var A=t.apply(this,arguments),L=this.__zoom,R=x==null?y(A):typeof x=="function"?x.apply(this,arguments):x,q=L.invert(R),J=typeof M=="function"?M.apply(this,arguments):M;return n(_(C(L,J),R,q),A,s)},x,I)},k.translateBy=function(p,M,x,I){k.transform(p,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),s)},null,I)},k.translateTo=function(p,M,x,I,A){k.transform(p,function(){var L=t.apply(this,arguments),R=this.__zoom,q=I==null?y(L):typeof I=="function"?I.apply(this,arguments):I;return n(Ci.translate(q[0],q[1]).scale(R.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof x=="function"?-x.apply(this,arguments):-x),L,s)},I,A)};function C(p,M){return M=Math.max(o[0],Math.min(o[1],M)),M===p.k?p:new rn(M,p.x,p.y)}function _(p,M,x){var I=M[0]-x[0]*p.k,A=M[1]-x[1]*p.k;return I===p.x&&A===p.y?p:new rn(p.k,I,A)}function y(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function D(p,M,x,I){p.on("start.zoom",function(){U(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(I).end()}).tween("zoom",function(){var A=this,L=arguments,R=U(A,L).event(I),q=t.apply(A,L),J=x==null?y(q):typeof x=="function"?x.apply(A,L):x,ie=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Y=A.__zoom,ee=typeof M=="function"?M.apply(A,L):M,X=l(Y.invert(J).concat(ie/Y.k),ee.invert(J).concat(ie/ee.k));return function(re){if(re===1)re=ee;else{var le=X(re),ce=ie/le[2];re=new rn(ce,J[0]-le[0]*ce,J[1]-le[1]*ce)}R.zoom(null,re)}})}function U(p,M,x){return!x&&p.__zooming||new z(p,M)}function z(p,M){this.that=p,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,M),this.taps=0}z.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,M){return this.mouse&&p!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var M=St(this.that).datum();u.call(p,this.that,new ew(p,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:u}),M)}};function O(p,...M){if(!e.apply(this,arguments))return;var x=U(this,M).event(p),I=this.__zoom,A=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,i.apply(this,arguments)))),L=Bt(p);if(x.wheel)(x.mouse[0][0]!==L[0]||x.mouse[0][1]!==L[1])&&(x.mouse[1]=I.invert(x.mouse[0]=L)),clearTimeout(x.wheel);else{if(I.k===A)return;x.mouse=[L,I.invert(L)],So(this),x.start()}zi(p),x.wheel=setTimeout(R,S),x.zoom("mouse",n(_(C(I,A),x.mouse[0],x.mouse[1]),x.extent,s));function R(){x.wheel=null,x.end()}}function V(p,...M){if(f||!e.apply(this,arguments))return;var x=p.currentTarget,I=U(this,M,!0).event(p),A=St(p.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",ie,!0),L=Bt(p,x),R=p.clientX,q=p.clientY;Vf(p.view),Qs(p),I.mouse=[L,this.__zoom.invert(L)],So(this),I.start();function J(Y){if(zi(Y),!I.moved){var ee=Y.clientX-R,X=Y.clientY-q;I.moved=ee*ee+X*X>b}I.event(Y).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=Bt(Y,x),I.mouse[1]),I.extent,s))}function ie(Y){A.on("mousemove.zoom mouseup.zoom",null),Wf(Y.view,I.moved),zi(Y),I.event(Y).end()}}function H(p,...M){if(e.apply(this,arguments)){var x=this.__zoom,I=Bt(p.changedTouches?p.changedTouches[0]:p,this),A=x.invert(I),L=x.k*(p.shiftKey?.5:2),R=n(_(C(x,L),I,A),t.apply(this,M),s);zi(p),a>0?St(this).transition().duration(a).call(D,R,I,p):St(this).call(k.transform,R,I,p)}}function W(p,...M){if(e.apply(this,arguments)){var x=p.touches,I=x.length,A=U(this,M,p.changedTouches.length===I).event(p),L,R,q,J;for(Qs(p),R=0;R<I;++R)q=x[R],J=Bt(q,this),J=[J,this.__zoom.invert(J),q.identifier],A.touch0?!A.touch1&&A.touch0[2]!==J[2]&&(A.touch1=J,A.taps=0):(A.touch0=J,L=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),L&&(A.taps<2&&(d=J[0],c=setTimeout(function(){c=null},h)),So(this),A.start())}}function P(p,...M){if(this.__zooming){var x=U(this,M).event(p),I=p.changedTouches,A=I.length,L,R,q,J;for(zi(p),L=0;L<A;++L)R=I[L],q=Bt(R,this),x.touch0&&x.touch0[2]===R.identifier?x.touch0[0]=q:x.touch1&&x.touch1[2]===R.identifier&&(x.touch1[0]=q);if(R=x.that.__zoom,x.touch1){var ie=x.touch0[0],Y=x.touch0[1],ee=x.touch1[0],X=x.touch1[1],re=(re=ee[0]-ie[0])*re+(re=ee[1]-ie[1])*re,le=(le=X[0]-Y[0])*le+(le=X[1]-Y[1])*le;R=C(R,Math.sqrt(re/le)),q=[(ie[0]+ee[0])/2,(ie[1]+ee[1])/2],J=[(Y[0]+X[0])/2,(Y[1]+X[1])/2]}else if(x.touch0)q=x.touch0[0],J=x.touch0[1];else return;x.zoom("touch",n(_(R,q,J),x.extent,s))}}function Q(p,...M){if(this.__zooming){var x=U(this,M).event(p),I=p.changedTouches,A=I.length,L,R;for(Qs(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),L=0;L<A;++L)R=I[L],x.touch0&&x.touch0[2]===R.identifier?delete x.touch0:x.touch1&&x.touch1[2]===R.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(R=Bt(R,this),Math.hypot(d[0]-R[0],d[1]-R[1])<E)){var q=St(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return k.wheelDelta=function(p){return arguments.length?(i=typeof p=="function"?p:Xr(+p),k):i},k.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Xr(!!p),k):e},k.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Xr(!!p),k):r},k.extent=function(p){return arguments.length?(t=typeof p=="function"?p:Xr([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),k):t},k.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],k):[o[0],o[1]]},k.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],k):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},k.constrain=function(p){return arguments.length?(n=p,k):n},k.duration=function(p){return arguments.length?(a=+p,k):a},k.interpolate=function(p){return arguments.length?(l=p,k):l},k.on=function(){var p=u.on.apply(u,arguments);return p===u?k:p},k.clickDistance=function(p){return arguments.length?(b=(p=+p)*p,k):Math.sqrt(b)},k.tapDistance=function(p){return arguments.length?(E=+p,k):E},k}var ae=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ae||{}),Ll=(e=>(e.Partial="partial",e.Full="full",e))(Ll||{}),zn=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(zn||{}),Cn=(e=>(e.Strict="strict",e.Loose="loose",e))(Cn||{}),Ba=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Ba||{}),or=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(or||{}),oh=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(oh||{});const aw=["INPUT","SELECT","TEXTAREA"],lw=typeof document<"u"?document:null;function La(e){var t,n;const i=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof(i==null?void 0:i.hasAttribute)=="function"?i.hasAttribute("contenteditable"):!1,o=typeof(i==null?void 0:i.closest)=="function"?i.closest(".nokey"):null;return aw.includes(i==null?void 0:i.nodeName)||r||!!o}function uw(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function rc(e,t,n,i){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();i||n.add(e.toLowerCase());const o=r.every((s,a)=>n.has(s)&&Array.from(n.values())[a]===r[a]);return i&&n.delete(e.toLowerCase()),o}function cw(e,t){return n=>{if(!n.code&&!n.key)return!1;const i=dw(n.code,e);return Array.isArray(e)?e.some(r=>rc(n[i],r,t,n.type==="keyup")):rc(n[i],e,t,n.type==="keyup")}}function dw(e,t){return t.includes(e)?"code":"key"}function sr(e,t){const n=ue(()=>ye(t==null?void 0:t.target)??lw),i=Io(ye(e)===!0);let r=!1;const o=new Set;let s=l(ye(e));be(()=>ye(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),s=l(u)},{immediate:!0}),If(["blur","contextmenu"],a),Fu((...u)=>s(...u),u=>{var c,d;const f=ye(t==null?void 0:t.actInsideInputWithModifier)??!0,h=ye(t==null?void 0:t.preventDefault)??!1;if(r=uw(u),(!r||r&&!f)&&La(u))return;const b=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,E=(b==null?void 0:b.nodeName)==="BUTTON"||(b==null?void 0:b.nodeName)==="A";!h&&(r||!E)&&u.preventDefault(),i.value=!0},{eventName:"keydown",target:n}),Fu((...u)=>s(...u),u=>{const c=ye(t==null?void 0:t.actInsideInputWithModifier)??!0;if(i.value){if((!r||r&&!c)&&La(u))return;r=!1,i.value=!1}},{eventName:"keyup",target:n});function a(){r=!1,o.clear(),i.value=ye(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),i.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?cw(u,o):u}return i}const sh="vue-flow__node-desc",ah="vue-flow__edge-desc",fw="vue-flow__aria-live",lh=["Enter"," ","Escape"],bi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Go(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Ko(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)}function xs(e){return{width:e.offsetWidth,height:e.offsetHeight}}function fn(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function uh(e,t){return{x:fn(e.x,t[0][0],t[1][0]),y:fn(e.y,t[0][1],t[1][1])}}function oc(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function An(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Gn(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!An(e)}function Gi(e){return Gn(e)&&"computedPosition"in e}function Jr(e){return!Number.isNaN(e)&&Number.isFinite(e)}function hw(e){return Jr(e.width)&&Jr(e.height)&&Jr(e.x)&&Jr(e.y)}function gw(e,t,n){const i={id:e.id.toString(),type:e.type??"default",dimensions:er({width:0,height:0}),computedPosition:er({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:He(e.data)?e.data:{},events:er(He(e.events)?e.events:{})};return Object.assign(t??i,e,{id:e.id.toString(),parentNode:n})}function ch(e,t,n){var i,r;const o={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(i=e.sourceHandle)==null?void 0:i.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:He(e.data)?e.data:{},events:er(He(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??o,e,{id:e.id.toString()})}function dh(e,t,n,i){const r=typeof e=="string"?e:e.id,o=new Set,s=i==="source"?"target":"source";for(const a of n)a[s]===r&&o.add(a[i]);return t.filter(a=>o.has(a.id))}function pw(...e){if(e.length===3){const[o,s,a]=e;return dh(o,s,a,"target")}const[t,n]=e,i=typeof t=="string"?t:t.id;return n.filter(o=>An(o)&&o.source===i).map(o=>n.find(s=>Gn(s)&&s.id===o.target))}function vw(...e){if(e.length===3){const[o,s,a]=e;return dh(o,s,a,"source")}const[t,n]=e,i=typeof t=="string"?t:t.id;return n.filter(o=>An(o)&&o.target===i).map(o=>n.find(s=>Gn(s)&&s.id===o.source))}function fh({source:e,sourceHandle:t,target:n,targetHandle:i}){return`vueflow__edge-${e}${t??""}-${n}${i??""}`}function mw(e,t){return t.some(n=>An(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function br({x:e,y:t},{x:n,y:i,zoom:r}){return{x:e*r+n,y:t*r+i}}function Sr({x:e,y:t},{x:n,y:i,zoom:r},o=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-i)/r};return o?Es(a,s):a}function hh(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Yo({x:e,y:t,width:n,height:i}){return{x:e,y:t,x2:e+n,y2:t+i}}function gh({x:e,y:t,x2:n,y2:i}){return{x:e,y:t,width:n-e,height:i-t}}function yw(e,t){return gh(hh(Yo(e),Yo(t)))}function zl(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const i=e[n];t=hh(t,Yo({...i.computedPosition,...i.dimensions}))}return gh(t)}function ph(e,t,n={x:0,y:0,zoom:1},i=!1,r=!1){const o={...Sr(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=Ko(o,Go(a)),S=d===null||f===null,b=i&&h>0,E=(d??0)*(f??0);(S||b||h>=E||a.dragging)&&s.push(a)}return s}function Fn(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const i of e)n.add(i.id);return t.filter(i=>n.has(i.source)||n.has(i.target))}function ri(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Br(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _w(e,t,n){if(typeof e=="string"||typeof e=="number"){const i=ri(e,n),r=ri(e,t);return{top:i,right:r,bottom:i,left:r,x:r*2,y:i*2}}if(typeof e=="object"){const i=ri(e.top??e.y??0,n),r=ri(e.bottom??e.y??0,n),o=ri(e.left??e.x??0,t),s=ri(e.right??e.x??0,t);return{top:i,right:s,bottom:r,left:o,x:o+s,y:i+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function ww(e,t,n,i,r,o){const{x:s,y:a}=br(e,{x:t,y:n,zoom:i}),{x:l,y:u}=br({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:i}),c=r-l,d=o-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function sc(e,t,n,i,r,o=.1){const s=_w(o,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=fn(u,i,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,S=n/2-f*c,b=ww(e,h,S,c,t,n),E={left:Math.min(b.left-s.left,0),top:Math.min(b.top-s.top,0),right:Math.min(b.right-s.right,0),bottom:Math.min(b.bottom-s.bottom,0)};return{x:h-E.left+E.right,y:S-E.top+E.bottom,zoom:c}}function bw(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function vh(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:vh(n,t):!1}function $r(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`}function za(e){const t=e.ctrlKey&&xr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function ac(e,t,n){return e<t?fn(Math.abs(e-t),1,t)/t:e>n?-fn(Math.abs(e-n),1,t)/t:0}function mh(e,t,n=15,i=40){const r=ac(e.x,i,t.width-i)*n,o=ac(e.y,i,t.height-i)*n;return[r,o]}function ea(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,i=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||i>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const o=Number(r.width.replace("px",""));r.width=`${o+n}px`}else r.width+=n;if(i>0)if(typeof r.height=="string"){const o=Number(r.height.replace("px",""));r.height=`${o+i}px`}else r.height+=i;if(e.position.x<0){const o=Math.abs(e.position.x);if(t.position.x=t.position.x-o,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+o}px`}else r.width+=o;e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);if(t.position.y=t.position.y-o,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+o}px`}else r.height+=o;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=o=>{const s=t.style;return{...s(o),...r}}:t.style={...t.style,...r}}}}function lc(e,t){var n,i;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const o=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(Gi(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[o.indexOf(s.parentNode)];l&&Gi(l)&&ea(s,l)}break;case"dimensions":if(Gi(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(i=a.dimensions)==null?void 0:i.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[o.indexOf(s.parentNode)];l&&Gi(l)&&(!!l.dimensions.width&&!!l.dimensions.height?ea(s,l):kt(()=>{ea(s,l)}))}break}return t}function mn(e,t){return{id:e,type:"select",selected:t}}function uc(e){return{item:e,type:"add"}}function cc(e){return{id:e,type:"remove"}}function dc(e,t,n,i,r){return{id:e,source:t,target:n,sourceHandle:i||null,targetHandle:r||null,type:"remove"}}function Sn(e,t=new Set,n=!1){const i=[];for(const[r,o]of e){const s=t.has(r);!(o.selected===void 0&&!s)&&o.selected!==s&&(n&&(o.selected=s),i.push(mn(o.id,s)))}return i}const fc=()=>{};function oe(e){const t=new Set;let n=fc,i=()=>!1;const r=()=>t.size>0||i(),o=f=>{n=f},s=()=>{n=fc},a=f=>{i=f},l=()=>{i=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return vr(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(S=>S(f)))},hasListeners:r,listeners:t,setEmitter:o,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function hc(e,t,n){let i=e;do{if(i&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Sw(e,t,n,i){var r,o;const s=new Map;for(const[a,l]of e)(l.selected||l.id===i)&&(!l.parentNode||!vh(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(a)&&s.set(a,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((o=l.computedPosition)==null?void 0:o.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(s.values())}function ta({id:e,dragItems:t,findNode:n}){const i=[];for(const r of t){const o=n(r.id);o&&i.push(o)}return[e?i.find(r=>r.id===e):i[0],i]}function yh(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function $w(e,t,n){const[i,r,o,s]=typeof e!="string"?yh(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+i],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-o]]:!1}function xw(e,t,n,i){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&(r==null?void 0:r.range)==="parent")&&!e.expandParent)if(e.parentNode&&i&&e.dimensions.width&&e.dimensions.height){const o=$w(r,e,i);o&&(r=o)}else t(new Ge(Ve.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const o=(i==null?void 0:i.computedPosition.x)||0,s=(i==null?void 0:i.computedPosition.y)||0;r=[[r[0][0]+o,r[0][1]+s],[r[1][0]+o,r[1][1]+s]]}else if(r!=="parent"&&(r!=null&&r.range)&&Array.isArray(r.range)){const[o,s,a,l]=yh(r.padding),u=(i==null?void 0:i.computedPosition.x)||0,c=(i==null?void 0:i.computedPosition.y)||0;r=[[r.range[0][0]+u+l,r.range[0][1]+c+o],[r.range[1][0]+u-s,r.range[1][1]+c-a]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function Ew({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Fl(e,t,n,i,r){const o=Ew(e.dimensions,xw(e,n,i,r)),s=uh(t,o);return{position:{x:s.x-((r==null?void 0:r.computedPosition.x)||0),y:s.y-((r==null?void 0:r.computedPosition.y)||0)},computedPosition:s}}function Ai(e,t,n=ae.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.computedPosition.x,o=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:s,height:a}=t??Aw(e);if(i)return{x:r+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case ae.Top:return{x:r+s/2,y:o};case ae.Right:return{x:r+s,y:o+a/2};case ae.Bottom:return{x:r+s/2,y:o+a};case ae.Left:return{x:r,y:o+a/2}}}function gc(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function kw({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:r,targetHeight:o,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+i,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Yo({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Tw(e,t,n=!1){const i=typeof e.zIndex=="number";let r=i?e.zIndex:0;const o=t(e.source),s=t(e.target);return!o||!s?0:(n&&(r=i?e.zIndex:Math.max(o.computedPosition.z||0,s.computedPosition.z||0)),r)}var Ve=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ve||{});const pc={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ge extends Error{constructor(t,...n){var i;super((i=pc[t])==null?void 0:i.call(pc,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function jl(e){return"clientX"in e}function Cw(e){return"sourceEvent"in e}function Ft(e,t){const n=jl(e);let i,r;return n?(i=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(i=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=0,r=0),{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}}const xr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Aw(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Es(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Nw=()=>!0;function na(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Iw(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ko(r,Go(o))>0&&i.push(o);return i}const Pw=250;function Ow(e,t,n,i){var r,o;let s=[],a=Number.POSITIVE_INFINITY;const l=Iw(e,n,t+Pw);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((o=u.handleBounds)==null?void 0:o.target)??[]];for(const d of c){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:h}=Ai(u,d,d.position,!0),S=Math.sqrt((f-e.x)**2+(h-e.y)**2);S>t||(S<a?(s=[{...d,x:f,y:h}],a=S):S===a&&s.push({...d,x:f,y:h}))}}if(!s.length)return null;if(s.length>1){const u=i.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function vc(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=Nw},c,d,f,h){const S=o==="target",b=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:E,y:k}=Ft(e),C=s.elementFromPoint(E,k),_=C!=null&&C.classList.contains(`${a}-flow__handle`)?C:b,y={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const D=_h(void 0,_),U=_.getAttribute("data-nodeid"),z=_.getAttribute("data-handleid"),O=_.classList.contains("connectable"),V=_.classList.contains("connectableend");if(!U||!D)return y;const H={source:S?U:i,sourceHandle:S?z:r,target:S?i:U,targetHandle:S?r:z};y.connection=H;const P=O&&V&&(n===Cn.Strict?S&&D==="source"||!S&&D==="target":U!==i||z!==r);y.isValid=P&&u(H,{nodes:d,edges:c,sourceNode:f(H.source),targetNode:f(H.target)}),y.toHandle=wh(U,D,z,h,n,!0)}return y}function _h(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Mw(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Rw(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function wh(e,t,n,i,r,o=!1){var s,a,l;const u=i.get(e);if(!u)return null;const c=r===Cn.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c==null?void 0:c.find(f=>f.id===n):c==null?void 0:c[0])??null;return d&&o?{...d,...Ai(u,d,d.position,!0)}:d}const Fa={[ae.Left]:ae.Right,[ae.Right]:ae.Left,[ae.Top]:ae.Bottom,[ae.Bottom]:ae.Top},Dw=["production","prod"];function Br(e,...t){bh()&&console.warn(`[Vue Flow]: ${e}`,...t)}function bh(){return!Dw.includes("production")}function mc(e,t,n,i,r){const o=t.querySelectorAll(`.vue-flow__handle.${e}`);return o!=null&&o.length?Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,...xs(s)}}):null}function ja(e,t,n,i,r,o=!1,s){r.value=!1,e.selected?(o||e.selected&&t)&&(i([e]),kt(()=>{s.blur()})):n([e])}function He(e){return typeof te(e)<"u"}function Bw(e,t,n,i){if(!e||!e.source||!e.target)return n(new Ge(Ve.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let r;return An(e)?r=e:r={...e,id:fh(e)},r=ch(r,void 0,i),mw(r,t)?!1:r}function Lw(e,t,n,i,r){if(!t.source||!t.target)return r(new Ge(Ve.EDGE_INVALID,e.id)),!1;if(!n)return r(new Ge(Ve.EDGE_NOT_FOUND,e.id)),!1;const{id:o,...s}=e;return{...s,id:i?fh(t):o,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function yc(e,t,n){const i={},r=[];for(let o=0;o<e.length;++o){const s=e[o];if(!Gn(s)){n(new Ge(Ve.NODE_INVALID,s==null?void 0:s.id)||`[ID UNKNOWN|INDEX ${o}]`);continue}const a=gw(s,t(s.id),s.parentNode);s.parentNode&&(i[s.parentNode]=!0),r[o]=a}for(const o of r){const s=t(o.parentNode)||r.find(a=>a.id===o.parentNode);o.parentNode&&!s&&n(new Ge(Ve.NODE_MISSING_PARENT,o.id,o.parentNode)),(o.parentNode||i[o.id])&&(i[o.id]&&(o.isParent=!0),s&&(s.isParent=!0))}return r}function _c(e,t,n,i,r,o){let s=r;const a=i.get(s)||new Map;i.set(s,a.set(n,t)),s=`${r}-${e}`;const l=i.get(s)||new Map;if(i.set(s,l.set(n,t)),o){s=`${r}-${e}-${o}`;const u=i.get(s)||new Map;i.set(s,u.set(n,t))}}function ia(e,t,n){e.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,l={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${o}-${a}`,c=`${o}-${a}--${r}-${s}`;_c("source",l,c,e,r,s),_c("target",l,u,e,o,a)}}function wc(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ra(e,t,n,i,r,o,s,a){const l=[];for(const u of e){const c=An(u)?u:Bw(u,a,r,o);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new Ge(Ve.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Ge(Ve.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new Ge(Ve.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:f})){r(new Ge(Ve.EDGE_INVALID,c.id));continue}const h=i(c.id);l.push({...ch(c,h,o),sourceNode:d,targetNode:f})}return l}const bc=Symbol("vueFlow"),Ul=Symbol("nodeId"),Sh=Symbol("nodeRef"),zw=Symbol("edgeId"),Fw=Symbol("edgeRef"),ks=Symbol("slots");function $h(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:i,noDragClassName:r,nodeLookup:o,nodeExtent:s,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:S,nodesSelectionActive:b,selectNodesOnDrag:E,removeSelectedElements:k,addSelectedNodes:C,updateNodePositions:_,emits:y}=Oe(),{onStart:D,onDrag:U,onStop:z,onClick:O,el:V,disabled:H,id:W,selectable:P,dragHandle:Q}=e,p=Io(!1);let M=[],x,I=null,A={x:void 0,y:void 0},L={x:0,y:0},R=null,q=!1,J=!1,ie=0,Y=!1;const ee=xh(),X=({x:$,y:T})=>{A={x:$,y:T};let g=!1;if(M=M.map(v=>{const w={x:$-v.distance.x,y:T-v.distance.y},{computedPosition:m}=Fl(v,n.value?Es(w,i.value):w,y.error,s.value,v.parentNode?h(v.parentNode):void 0);return g=g||v.position.x!==m.x||v.position.y!==m.y,v.position=m,v}),J=J||g,!!g&&(_(M,!0,!0),p.value=!0,R)){const[v,w]=ta({id:W,dragItems:M,findNode:h});U({event:R,node:v,nodes:w})}},re=()=>{if(!I)return;const[$,T]=mh(L,I,c.value);if($!==0||T!==0){const g={x:(A.x??0)-$/l.value.zoom,y:(A.y??0)-T/l.value.zoom};f({x:$,y:T})&&X(g)}ie=requestAnimationFrame(re)},le=($,T)=>{q=!0;const g=h(W);!E.value&&!S.value&&g&&(g.selected||k()),g&&ye(P)&&E.value&&ja(g,S.value,C,k,b,!1,T);const v=ee($.sourceEvent);if(A=v,M=Sw(o.value,d.value,v,W),M.length){const[w,m]=ta({id:W,dragItems:M,findNode:h});D({event:$.sourceEvent,node:w,nodes:m})}},ce=($,T)=>{var g;$.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||(J=!1,a.value===0&&le($,T),A=ee($.sourceEvent),I=((g=t.value)==null?void 0:g.getBoundingClientRect())||null,L=Ft($.sourceEvent,I))},ve=($,T)=>{const g=ee($.sourceEvent);if(!Y&&q&&u.value&&(Y=!0,re()),!q){const v=g.xSnapped-(A.x??0),w=g.ySnapped-(A.y??0);Math.sqrt(v*v+w*w)>a.value&&le($,T)}(A.x!==g.xSnapped||A.y!==g.ySnapped)&&M.length&&q&&(R=$.sourceEvent,L=Ft($.sourceEvent,I),X(g))},$e=$=>{let T=!1;if(!q&&!p.value&&!S.value){const g=$.sourceEvent,v=ee(g),w=v.xSnapped-(A.x??0),m=v.ySnapped-(A.y??0),N=Math.sqrt(w*w+m*m);N!==0&&N<=a.value&&(O==null||O(g),T=!0)}if(M.length&&!T){J&&(_(M,!1,!1),J=!1);const[g,v]=ta({id:W,dragItems:M,findNode:h});z({event:$.sourceEvent,node:g,nodes:v})}M=[],p.value=!1,Y=!1,q=!1,A={x:void 0,y:void 0},cancelAnimationFrame(ie)};return be([()=>ye(H),V],([$,T],g,v)=>{if(T){const w=St(T);$||(x=h0().on("start",m=>ce(m,T)).on("drag",m=>ve(m,T)).on("end",m=>$e(m)).filter(m=>{const N=m.target,j=ye(Q);return!m.button&&(!r.value||!hc(N,`.${r.value}`,T)&&(!j||hc(N,j,T)))}),w.call(x)),v(()=>{w.on(".drag",null),x&&(x.on("start",null),x.on("drag",null),x.on("end",null))})}}),p}function jw(){return{doubleClick:oe(),click:oe(),mouseEnter:oe(),mouseMove:oe(),mouseLeave:oe(),contextMenu:oe(),updateStart:oe(),update:oe(),updateEnd:oe()}}function Uw(e,t){const n=jw();return n.doubleClick.on(i=>{var r,o;t.edgeDoubleClick(i),(o=(r=e.events)==null?void 0:r.doubleClick)==null||o.call(r,i)}),n.click.on(i=>{var r,o;t.edgeClick(i),(o=(r=e.events)==null?void 0:r.click)==null||o.call(r,i)}),n.mouseEnter.on(i=>{var r,o;t.edgeMouseEnter(i),(o=(r=e.events)==null?void 0:r.mouseEnter)==null||o.call(r,i)}),n.mouseMove.on(i=>{var r,o;t.edgeMouseMove(i),(o=(r=e.events)==null?void 0:r.mouseMove)==null||o.call(r,i)}),n.mouseLeave.on(i=>{var r,o;t.edgeMouseLeave(i),(o=(r=e.events)==null?void 0:r.mouseLeave)==null||o.call(r,i)}),n.contextMenu.on(i=>{var r,o;t.edgeContextMenu(i),(o=(r=e.events)==null?void 0:r.contextMenu)==null||o.call(r,i)}),n.updateStart.on(i=>{var r,o;t.edgeUpdateStart(i),(o=(r=e.events)==null?void 0:r.updateStart)==null||o.call(r,i)}),n.update.on(i=>{var r,o;t.edgeUpdate(i),(o=(r=e.events)==null?void 0:r.update)==null||o.call(r,i)}),n.updateEnd.on(i=>{var r,o;t.edgeUpdateEnd(i),(o=(r=e.events)==null?void 0:r.updateEnd)==null||o.call(r,i)}),Object.entries(n).reduce((i,[r,o])=>(i.emit[r]=o.trigger,i.on[r]=o.on,i),{emit:{},on:{}})}function xh(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:i}=Oe();return r=>{var o;const s=((o=i.value)==null?void 0:o.getBoundingClientRect())??{left:0,top:0},a=Cw(r)?r.sourceEvent:r,{x:l,y:u}=Ft(a,s),c=Sr({x:l,y:u},e.value),{x:d,y:f}=n.value?Es(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function Zr(){return!0}function Eh({handleId:e,nodeId:t,type:n,isValidConnection:i,edgeUpdaterType:r,onEdgeUpdate:o,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:S,autoPanSpeed:b,findNode:E,panBy:k,startConnection:C,updateConnection:_,endConnection:y,emits:D,viewport:U,edges:z,nodes:O,isValidConnection:V,nodeLookup:H}=Oe();let W=null,P=!1,Q=null;function p(x){var I;const A=ye(n)==="target",L=jl(x),R=oc(x.target),q=x.currentTarget;if(q&&(L&&x.button===0||!L)){let J=function(K){g=Ft(K,$e),X=Ow(Sr(g,U.value,!1,[1,1]),c.value,H.value,m),v||(w(),v=!0);const G=vc(K,{handle:X,connectionMode:u.value,fromNodeId:ye(t),fromHandleId:ye(e),fromType:A?"target":"source",isValidConnection:ee,doc:R,lib:"vue",flowId:a,nodeLookup:H.value},z.value,O.value,E,H.value);Q=G.handleDomNode,W=G.connection,P=Rw(!!X,G.isValid);const Z={...B,isValid:P,to:G.toHandle&&P?br({x:G.toHandle.x,y:G.toHandle.y},U.value):g,toHandle:G.toHandle,toPosition:P&&G.toHandle?G.toHandle.position:Fa[m.position],toNode:G.toHandle?H.value.get(G.toHandle.nodeId):null};if(P&&X&&(B!=null&&B.toHandle)&&Z.toHandle&&B.toHandle.type===Z.toHandle.type&&B.toHandle.nodeId===Z.toHandle.nodeId&&B.toHandle.id===Z.toHandle.id&&B.to.x===Z.to.x&&B.to.y===Z.to.y)return;const ne=X??G.toHandle;if(_(ne&&P?br({x:ne.x,y:ne.y},U.value):g,G.toHandle,Mw(!!ne,P)),B=Z,!X&&!P&&!Q)return na(T);W&&W.source!==W.target&&Q&&(na(T),T=Q,Q.classList.add("connecting","vue-flow__handle-connecting"),Q.classList.toggle("valid",!!P),Q.classList.toggle("vue-flow__handle-valid",!!P))},ie=function(K){"touches"in K&&K.touches.length>0||((X||Q)&&W&&P&&(o?o(K,W):D.connect(W)),D.connectEnd(K),r&&(s==null||s(K)),na(T),cancelAnimationFrame(re),y(K),v=!1,P=!1,W=null,Q=null,R.removeEventListener("mousemove",J),R.removeEventListener("mouseup",ie),R.removeEventListener("touchmove",J),R.removeEventListener("touchend",ie))};const Y=E(ye(t));let ee=ye(i)||V.value||Zr;!ee&&Y&&(ee=(A?Y.isValidSourcePos:Y.isValidTargetPos)||Zr);let X,re=0;const{x:le,y:ce}=Ft(x),ve=_h(ye(r),q),$e=(I=l.value)==null?void 0:I.getBoundingClientRect();if(!$e||!ve)return;const $=wh(ye(t),ve,ye(e),H.value,u.value);if(!$)return;let T,g=Ft(x,$e),v=!1;const w=()=>{if(!S.value)return;const[K,G]=mh(g,$e,b.value);k({x:K,y:G}),re=requestAnimationFrame(w)},m={...$,nodeId:ye(t),type:ve,position:$.position},N=H.value.get(ye(t)),F={inProgress:!0,isValid:null,from:Ai(N,m,ae.Left,!0),fromHandle:m,fromPosition:m.position,fromNode:N,to:g,toHandle:null,toPosition:Fa[m.position],toNode:null};C({nodeId:ye(t),id:ye(e),type:ve,position:(q==null?void 0:q.getAttribute("data-handlepos"))||ae.Top,...g},{x:le-$e.left,y:ce-$e.top}),D.connectStart({event:x,nodeId:ye(t),handleId:ye(e),handleType:ve});let B=F;R.addEventListener("mousemove",J),R.addEventListener("mouseup",ie),R.addEventListener("touchmove",J),R.addEventListener("touchend",ie)}}function M(x){var I,A;if(!d.value)return;const L=ye(n)==="target";if(!f.value){D.clickConnectStart({event:x,nodeId:ye(t),handleId:ye(e)}),C({nodeId:ye(t),type:ye(n),id:ye(e),position:ae.Top,...Ft(x)},void 0,!0);return}let R=ye(i)||V.value||Zr;const q=E(ye(t));if(!R&&q&&(R=(L?q.isValidSourcePos:q.isValidTargetPos)||Zr),q&&(typeof q.connectable>"u"?h.value:q.connectable)===!1)return;const J=oc(x.target),ie=vc(x,{handle:{nodeId:ye(t),id:ye(e),type:ye(n),position:ae.Top,...Ft(x)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:R,doc:J,lib:"vue",flowId:a,nodeLookup:H.value},z.value,O.value,E,H.value),Y=((I=ie.connection)==null?void 0:I.source)===((A=ie.connection)==null?void 0:A.target);ie.isValid&&ie.connection&&!Y&&D.connect(ie.connection),D.clickConnectEnd(x),y(x,!0)}return{handlePointerDown:p,handleClick:M}}function Hw(){return mt(Ul,"")}function kh(e){const t=e??Hw()??"",n=mt(Sh,Te(null)),{findNode:i,edges:r,emits:o}=Oe(),s=i(t);return s||o.error(new Ge(Ve.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:ue(()=>i(s.parentNode)),connectedEdges:ue(()=>Fn([s],r.value))}}function Vw(){return{doubleClick:oe(),click:oe(),mouseEnter:oe(),mouseMove:oe(),mouseLeave:oe(),contextMenu:oe(),dragStart:oe(),drag:oe(),dragStop:oe()}}function Ww(e,t){const n=Vw();return n.doubleClick.on(i=>{var r,o;t.nodeDoubleClick(i),(o=(r=e.events)==null?void 0:r.doubleClick)==null||o.call(r,i)}),n.click.on(i=>{var r,o;t.nodeClick(i),(o=(r=e.events)==null?void 0:r.click)==null||o.call(r,i)}),n.mouseEnter.on(i=>{var r,o;t.nodeMouseEnter(i),(o=(r=e.events)==null?void 0:r.mouseEnter)==null||o.call(r,i)}),n.mouseMove.on(i=>{var r,o;t.nodeMouseMove(i),(o=(r=e.events)==null?void 0:r.mouseMove)==null||o.call(r,i)}),n.mouseLeave.on(i=>{var r,o;t.nodeMouseLeave(i),(o=(r=e.events)==null?void 0:r.mouseLeave)==null||o.call(r,i)}),n.contextMenu.on(i=>{var r,o;t.nodeContextMenu(i),(o=(r=e.events)==null?void 0:r.contextMenu)==null||o.call(r,i)}),n.dragStart.on(i=>{var r,o;t.nodeDragStart(i),(o=(r=e.events)==null?void 0:r.dragStart)==null||o.call(r,i)}),n.drag.on(i=>{var r,o;t.nodeDrag(i),(o=(r=e.events)==null?void 0:r.drag)==null||o.call(r,i)}),n.dragStop.on(i=>{var r,o;t.nodeDragStop(i),(o=(r=e.events)==null?void 0:r.dragStop)==null||o.call(r,i)}),Object.entries(n).reduce((i,[r,o])=>(i.emit[r]=o.trigger,i.on[r]=o.on,i),{emit:{},on:{}})}function Th(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:i,snapGrid:r,snapToGrid:o,nodesDraggable:s,emits:a}=Oe();return(l,u=!1)=>{const c=o.value?r.value[0]:5,d=o.value?r.value[1]:5,f=u?4:1,h=l.x*c*f,S=l.y*d*f,b=[];for(const E of e.value)if(E.draggable||s&&typeof E.draggable>"u"){const k={x:E.computedPosition.x+h,y:E.computedPosition.y+S},{computedPosition:C}=Fl(E,k,a.error,t.value,E.parentNode?i(E.parentNode):void 0);b.push({id:E.id,position:C,from:E.position,distance:{x:l.x,y:l.y},dimensions:E.dimensions})}n(b,!0,!1)}}const Qr=.1,qw=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function pn(){return Br("Viewport not initialized yet."),Promise.resolve(!1)}const Gw={zoomIn:pn,zoomOut:pn,zoomTo:pn,fitView:pn,setCenter:pn,fitBounds:pn,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:pn,setTransform:pn,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Kw(e){function t(i,r){return new Promise(o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((r==null?void 0:r.interpolate)==="linear"?rr:_o).scaleBy(oa(e.d3Selection,r==null?void 0:r.duration,r==null?void 0:r.ease,()=>{o(!0)}),i):o(!1)})}function n(i,r,o,s){return new Promise(a=>{var l;const{x:u,y:c}=uh({x:-i,y:-r},e.translateExtent),d=Ci.translate(-u,-c).scale(o);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate((s==null?void 0:s.interpolate)==="linear"?rr:_o).transform(oa(e.d3Selection,s==null?void 0:s.duration,s==null?void 0:s.ease,()=>{a(!0)}),d):a(!1)})}return ue(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,o)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate((o==null?void 0:o.interpolate)==="linear"?rr:_o).scaleTo(oa(e.d3Selection,o==null?void 0:o.duration,o==null?void 0:o.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,o)=>n(r.x,r.y,r.zoom,o),setTransform:(r,o)=>n(r.x,r.y,r.zoom,o),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:Qr,includeHiddenNodes:!1,duration:0})=>{var o,s;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&((r==null?void 0:r.includeHiddenNodes)||!f.hidden)&&(!((o=r.nodes)!=null&&o.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=zl(a),{x:u,y:c,zoom:d}=sc(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??Qr);return n(u,c,d,r)},setCenter:(r,o,s)=>{const a=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-o*a;return n(l,u,a,s)},fitBounds:(r,o={padding:Qr})=>{const{x:s,y:a,zoom:l}=sc(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding??Qr);return n(s,a,l,o)},project:r=>Sr(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:o,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-o,y:r.y-s};return Sr(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:o,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+o,y:r.y+s};return br(a,e.viewport)}return{x:0,y:0}}}:Gw)}function oa(e,t=0,n=qw,i=()=>{}){const r=typeof t=="number"&&t>0;return r||i(),r?e.transition().duration(t).ease(n).on("end",i):e}function Yw(e,t,n){const i=$d(!0);return i.run(()=>{const r=()=>{i.run(()=>{let b,E,k=!!(n.nodes.value.length||n.edges.value.length);b=ii([e.modelValue,()=>{var C,_;return(_=(C=e.modelValue)==null?void 0:C.value)==null?void 0:_.length}],([C])=>{C&&Array.isArray(C)&&(E==null||E.pause(),n.setElements(C),!E&&!k&&C.length?k=!0:E==null||E.resume())}),E=ii([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([C,_])=>{var y;(y=e.modelValue)!=null&&y.value&&Array.isArray(e.modelValue.value)&&(b==null||b.pause(),e.modelValue.value=[...C,..._],kt(()=>{b==null||b.resume()}))},{immediate:k}),go(()=>{b==null||b.stop(),E==null||E.stop()})})},o=()=>{i.run(()=>{let b,E,k=!!n.nodes.value.length;b=ii([e.nodes,()=>{var C,_;return(_=(C=e.nodes)==null?void 0:C.value)==null?void 0:_.length}],([C])=>{C&&Array.isArray(C)&&(E==null||E.pause(),n.setNodes(C),!E&&!k&&C.length?k=!0:E==null||E.resume())}),E=ii([n.nodes,()=>n.nodes.value.length],([C])=>{var _;(_=e.nodes)!=null&&_.value&&Array.isArray(e.nodes.value)&&(b==null||b.pause(),e.nodes.value=[...C],kt(()=>{b==null||b.resume()}))},{immediate:k}),go(()=>{b==null||b.stop(),E==null||E.stop()})})},s=()=>{i.run(()=>{let b,E,k=!!n.edges.value.length;b=ii([e.edges,()=>{var C,_;return(_=(C=e.edges)==null?void 0:C.value)==null?void 0:_.length}],([C])=>{C&&Array.isArray(C)&&(E==null||E.pause(),n.setEdges(C),!E&&!k&&C.length?k=!0:E==null||E.resume())}),E=ii([n.edges,()=>n.edges.value.length],([C])=>{var _;(_=e.edges)!=null&&_.value&&Array.isArray(e.edges.value)&&(b==null||b.pause(),e.edges.value=[...C],kt(()=>{b==null||b.resume()}))},{immediate:k}),go(()=>{b==null||b.stop(),E==null||E.stop()})})},a=()=>{i.run(()=>{be(()=>t.maxZoom,()=>{t.maxZoom&&He(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{i.run(()=>{be(()=>t.minZoom,()=>{t.minZoom&&He(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{i.run(()=>{be(()=>t.translateExtent,()=>{t.translateExtent&&He(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{i.run(()=>{be(()=>t.nodeExtent,()=>{t.nodeExtent&&He(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{i.run(()=>{be(()=>t.applyDefault,()=>{He(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{i.run(()=>{const b=async E=>{let k=E;typeof t.autoConnect=="function"&&(k=await t.autoConnect(E)),k!==!1&&n.addEdges([k])};be(()=>t.autoConnect,()=>{He(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),be(n.autoConnect,(E,k,C)=>{E?n.onConnect(b):n.hooks.value.connect.off(b),C(()=>{n.hooks.value.connect.off(b)})},{immediate:!0})})},h=()=>{const b=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const E of Object.keys(t)){const k=E;if(!b.includes(k)){const C=Se(()=>t[k]),_=n[k];je(_)&&i.run(()=>{be(C,y=>{He(y)&&(_.value=y)},{immediate:!0})})}}};(()=>{r(),o(),s(),l(),a(),u(),c(),d(),f(),h()})()}),()=>i.stop()}function Xw(){return{edgesChange:oe(),nodesChange:oe(),nodeDoubleClick:oe(),nodeClick:oe(),nodeMouseEnter:oe(),nodeMouseMove:oe(),nodeMouseLeave:oe(),nodeContextMenu:oe(),nodeDragStart:oe(),nodeDrag:oe(),nodeDragStop:oe(),nodesInitialized:oe(),miniMapNodeClick:oe(),miniMapNodeDoubleClick:oe(),miniMapNodeMouseEnter:oe(),miniMapNodeMouseMove:oe(),miniMapNodeMouseLeave:oe(),connect:oe(),connectStart:oe(),connectEnd:oe(),clickConnectStart:oe(),clickConnectEnd:oe(),paneReady:oe(),init:oe(),move:oe(),moveStart:oe(),moveEnd:oe(),selectionDragStart:oe(),selectionDrag:oe(),selectionDragStop:oe(),selectionContextMenu:oe(),selectionStart:oe(),selectionEnd:oe(),viewportChangeStart:oe(),viewportChange:oe(),viewportChangeEnd:oe(),paneScroll:oe(),paneClick:oe(),paneContextMenu:oe(),paneMouseEnter:oe(),paneMouseMove:oe(),paneMouseLeave:oe(),edgeContextMenu:oe(),edgeMouseEnter:oe(),edgeMouseMove:oe(),edgeMouseLeave:oe(),edgeDoubleClick:oe(),edgeClick:oe(),edgeUpdateStart:oe(),edgeUpdate:oe(),edgeUpdateEnd:oe(),updateNodeInternals:oe(),error:oe(e=>Br(e.message))}}function Jw(e,t){const n=Nn();Yd(()=>{for(const[r,o]of Object.entries(t.value)){const s=a=>{e(r,a)};o.setEmitter(s),vr(o.removeEmitter),o.setHasEmitListeners(()=>i(r)),vr(o.removeHasEmitListeners)}});function i(r){var o;const s=Zw(r);return!!((o=n==null?void 0:n.vnode.props)==null?void 0:o[s])}}function Zw(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,o)=>o.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Ch(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Ll.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:or.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:zn.Bezier,style:{}},connectionMode:Cn.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:xr()?"Meta":"Control",zoomActivationKeyCode:xr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:Xw(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Qw=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function eb(e,t,n){const i=Kw(e),r=g=>{const v=g??[];e.hooks.updateNodeInternals.trigger(v)},o=g=>vw(g,e.nodes,e.edges),s=g=>pw(g,e.nodes,e.edges),a=g=>Fn(g,e.edges),l=({id:g,type:v,nodeId:w})=>{var m;const N=g?`-${v}-${g}`:`-${v}`;return Array.from(((m=e.connectionLookup.get(`${w}${N}`))==null?void 0:m.values())??[])},u=g=>{if(g)return t.value.get(g)},c=g=>{if(g)return n.value.get(g)},d=(g,v,w)=>{var m,N;const j=[];for(const F of g){const B={id:F.id,type:"position",dragging:w,from:F.from};if(v&&(B.position=F.position,F.parentNode)){const K=u(F.parentNode);B.position={x:B.position.x-(((m=K==null?void 0:K.computedPosition)==null?void 0:m.x)??0),y:B.position.y-(((N=K==null?void 0:K.computedPosition)==null?void 0:N.y)??0)}}j.push(B)}j!=null&&j.length&&e.hooks.nodesChange.trigger(j)},f=g=>{if(!e.vueFlowRef)return;const v=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!v)return;const w=window.getComputedStyle(v),{m22:m}=new window.DOMMatrixReadOnly(w.transform),N=[];for(const j of g){const F=j,B=u(F.id);if(B){const K=xs(F.nodeElement);if(!!(K.width&&K.height&&(B.dimensions.width!==K.width||B.dimensions.height!==K.height||F.forceUpdate))){const Z=F.nodeElement.getBoundingClientRect();B.dimensions=K,B.handleBounds.source=mc("source",F.nodeElement,Z,m,B.id),B.handleBounds.target=mc("target",F.nodeElement,Z,m,B.id),N.push({id:B.id,type:"dimensions",dimensions:K})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&i.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),N.length&&e.hooks.nodesChange.trigger(N)},h=(g,v)=>{const w=new Set,m=new Set;for(const F of g)Gn(F)?w.add(F.id):An(F)&&m.add(F.id);const N=Sn(t.value,w,!0),j=Sn(n.value,m);if(e.multiSelectionActive){for(const F of w)N.push(mn(F,v));for(const F of m)j.push(mn(F,v))}N.length&&e.hooks.nodesChange.trigger(N),j.length&&e.hooks.edgesChange.trigger(j)},S=g=>{if(e.multiSelectionActive){const v=g.map(w=>mn(w.id,!0));e.hooks.nodesChange.trigger(v);return}e.hooks.nodesChange.trigger(Sn(t.value,new Set(g.map(v=>v.id)),!0)),e.hooks.edgesChange.trigger(Sn(n.value))},b=g=>{if(e.multiSelectionActive){const v=g.map(w=>mn(w.id,!0));e.hooks.edgesChange.trigger(v);return}e.hooks.edgesChange.trigger(Sn(n.value,new Set(g.map(v=>v.id)))),e.hooks.nodesChange.trigger(Sn(t.value,new Set,!0))},E=g=>{h(g,!0)},k=g=>{const w=(g||e.nodes).map(m=>(m.selected=!1,mn(m.id,!1)));e.hooks.nodesChange.trigger(w)},C=g=>{const w=(g||e.edges).map(m=>(m.selected=!1,mn(m.id,!1)));e.hooks.edgesChange.trigger(w)},_=g=>{if(!g||!g.length)return h([],!1);const v=g.reduce((w,m)=>{const N=mn(m.id,!1);return Gn(m)?w.nodes.push(N):w.edges.push(N),w},{nodes:[],edges:[]});v.nodes.length&&e.hooks.nodesChange.trigger(v.nodes),v.edges.length&&e.hooks.edgesChange.trigger(v.edges)},y=g=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([g,e.maxZoom]),e.minZoom=g},D=g=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([e.minZoom,g]),e.maxZoom=g},U=g=>{var v;(v=e.d3Zoom)==null||v.translateExtent(g),e.translateExtent=g},z=g=>{e.nodeExtent=g,r()},O=g=>{var v;(v=e.d3Zoom)==null||v.clickDistance(g)},V=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},H=g=>{const v=g instanceof Function?g(e.nodes):g;!e.initialized&&!v.length||(e.nodes=yc(v,u,e.hooks.error.trigger))},W=g=>{const v=g instanceof Function?g(e.edges):g;if(!e.initialized&&!v.length)return;const w=ra(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);ia(e.connectionLookup,n.value,w),e.edges=w},P=g=>{const v=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!v.length||(H(v.filter(Gn)),W(v.filter(An)))},Q=g=>{let v=g instanceof Function?g(e.nodes):g;v=Array.isArray(v)?v:[v];const w=yc(v,u,e.hooks.error.trigger),m=[];for(const N of w)m.push(uc(N));m.length&&e.hooks.nodesChange.trigger(m)},p=g=>{let v=g instanceof Function?g(e.edges):g;v=Array.isArray(v)?v:[v];const w=ra(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),m=[];for(const N of w)m.push(uc(N));m.length&&e.hooks.edgesChange.trigger(m)},M=(g,v=!0,w=!1)=>{const m=g instanceof Function?g(e.nodes):g,N=Array.isArray(m)?m:[m],j=[],F=[];function B(G){const Z=a(G);for(const ne of Z)(!He(ne.deletable)||ne.deletable)&&F.push(dc(ne.id,ne.source,ne.target,ne.sourceHandle,ne.targetHandle))}function K(G){const Z=[];for(const ne of e.nodes)ne.parentNode===G&&Z.push(ne);if(Z.length){for(const ne of Z)j.push(cc(ne.id));v&&B(Z);for(const ne of Z)K(ne.id)}}for(const G of N){const Z=typeof G=="string"?u(G):G;Z&&(He(Z.deletable)&&!Z.deletable||(j.push(cc(Z.id)),v&&B([Z]),w&&K(Z.id)))}F.length&&e.hooks.edgesChange.trigger(F),j.length&&e.hooks.nodesChange.trigger(j)},x=g=>{const v=g instanceof Function?g(e.edges):g,w=Array.isArray(v)?v:[v],m=[];for(const N of w){const j=typeof N=="string"?c(N):N;j&&(He(j.deletable)&&!j.deletable||m.push(dc(typeof N=="string"?N:N.id,j.source,j.target,j.sourceHandle,j.targetHandle)))}e.hooks.edgesChange.trigger(m)},I=(g,v,w=!0)=>{const m=c(g.id);if(!m)return!1;const N=e.edges.indexOf(m),j=Lw(g,v,m,w,e.hooks.error.trigger);if(j){const[F]=ra([j],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((B,K)=>K===N?F:B),ia(e.connectionLookup,n.value,[F]),F}return!1},A=(g,v,w={replace:!1})=>{const m=c(g);if(!m)return;const N=typeof v=="function"?v(m):v;m.data=w.replace?N:{...m.data,...N}},L=g=>lc(g,e.nodes),R=g=>{const v=lc(g,e.edges);return ia(e.connectionLookup,n.value,v),v},q=(g,v,w={replace:!1})=>{const m=u(g);if(!m)return;const N=typeof v=="function"?v(m):v;w.replace?e.nodes.splice(e.nodes.indexOf(m),1,N):Object.assign(m,N)},J=(g,v,w={replace:!1})=>{const m=u(g);if(!m)return;const N=typeof v=="function"?v(m):v;m.data=w.replace?N:{...m.data,...N}},ie=(g,v,w=!1)=>{w?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,v&&(e.connectionPosition=v)},Y=(g,v=null,w=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=v,e.connectionStatus=w)},ee=(g,v)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,v?e.connectionClickStartHandle=null:e.connectionStartHandle=null},X=g=>{const v=hw(g),w=v?null:Gi(g)?g:u(g.id);return!v&&!w?[null,null,v]:[v?g:Go(w),w,v]},re=(g,v=!0,w=e.nodes)=>{const[m,N,j]=X(g);if(!m)return[];const F=[];for(const B of w||e.nodes){if(!j&&(B.id===N.id||!B.computedPosition))continue;const K=Go(B),G=Ko(K,m);(v&&G>0||G>=K.width*K.height||G>=Number(m.width)*Number(m.height))&&F.push(B)}return F},le=(g,v,w=!0)=>{const[m]=X(g);if(!m)return!1;const N=Ko(m,v);return w&&N>0||N>=Number(m.width)*Number(m.height)},ce=g=>{const{viewport:v,dimensions:w,d3Zoom:m,d3Selection:N,translateExtent:j}=e;if(!m||!N||!g.x&&!g.y)return!1;const F=Ci.translate(v.x+g.x,v.y+g.y).scale(v.zoom),B=[[0,0],[w.width,w.height]],K=m.constrain()(F,B,j),G=e.viewport.x!==K.x||e.viewport.y!==K.y||e.viewport.zoom!==K.k;return m.transform(N,K),G},ve=g=>{const v=g instanceof Function?g(e):g,w=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];He(v.defaultEdgeOptions)&&(e.defaultEdgeOptions=v.defaultEdgeOptions);const m=v.modelValue||v.nodes||v.edges?[]:void 0;m&&(v.modelValue&&m.push(...v.modelValue),v.nodes&&m.push(...v.nodes),v.edges&&m.push(...v.edges),P(m));const N=()=>{He(v.maxZoom)&&D(v.maxZoom),He(v.minZoom)&&y(v.minZoom),He(v.translateExtent)&&U(v.translateExtent)};for(const j of Object.keys(v)){const F=j,B=v[F];![...Qw,...w].includes(F)&&He(B)&&(e[F]=B)}Ca(()=>e.d3Zoom).not.toBeNull().then(N),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:P,setNodes:H,setEdges:W,addNodes:Q,addEdges:p,removeNodes:M,removeEdges:x,findNode:u,findEdge:c,updateEdge:I,updateEdgeData:A,updateNode:q,updateNodeData:J,applyEdgeChanges:R,applyNodeChanges:L,addSelectedElements:E,addSelectedNodes:S,addSelectedEdges:b,setMinZoom:y,setMaxZoom:D,setTranslateExtent:U,setNodeExtent:z,setPaneClickDistance:O,removeSelectedElements:_,removeSelectedNodes:k,removeSelectedEdges:C,startConnection:ie,updateConnection:Y,endConnection:ee,setInteractive:V,setState:ve,getIntersectingNodes:re,getIncomers:o,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:le,panBy:ce,fitView:g=>i.value.fitView(g),zoomIn:g=>i.value.zoomIn(g),zoomOut:g=>i.value.zoomOut(g),zoomTo:(g,v)=>i.value.zoomTo(g,v),setViewport:(g,v)=>i.value.setViewport(g,v),setTransform:(g,v)=>i.value.setTransform(g,v),getViewport:()=>i.value.getViewport(),getTransform:()=>i.value.getTransform(),setCenter:(g,v,w)=>i.value.setCenter(g,v,w),fitBounds:(g,v)=>i.value.fitBounds(g,v),project:g=>i.value.project(g),screenToFlowCoordinate:g=>i.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>i.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],v=[];for(const w of e.nodes){const{computedPosition:m,handleBounds:N,selected:j,dimensions:F,isParent:B,resizing:K,dragging:G,events:Z,...ne}=w;g.push(ne)}for(const w of e.edges){const{selected:m,sourceNode:N,targetNode:j,events:F,...B}=w;v.push(B)}return JSON.parse(JSON.stringify({nodes:g,edges:v,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(v=>{const{nodes:w,edges:m,position:N,zoom:j,viewport:F}=g;if(w&&H(w),m&&W(m),F!=null&&F.x&&(F!=null&&F.y)||N){const B=(F==null?void 0:F.x)||N[0],K=(F==null?void 0:F.y)||N[1],G=(F==null?void 0:F.zoom)||j||e.viewport.zoom;return Ca(()=>i.value.viewportInitialized).toBe(!0).then(()=>{i.value.setViewport({x:B,y:K,zoom:G}).then(()=>{v(!0)})})}else v(!0)}),updateNodeInternals:r,viewportHelper:i,$reset:()=>{const g=Ch();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const v=Ci.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(fn(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),w=e.viewportRef.getBoundingClientRect(),m=[[0,0],[w.width,w.height]],N=e.d3Zoom.constrain()(v,m,g.translateExtent);e.d3Zoom.transform(e.d3Selection,N)}ve(g)},$destroy:()=>{}}}const tb=["data-id","data-handleid","data-nodeid","data-handlepos"],nb={name:"Handle",compatConfig:{MODE:3}},Xo=Ie({...nb,props:{id:{default:null},type:{},position:{default:()=>ae.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Zp(e,["position","connectable","connectableStart","connectableEnd","id"]),i=Se(()=>n.type??"source"),r=Se(()=>n.isValidConnection??null),{id:o,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Oe(),{id:h,node:S,nodeEl:b,connectedEdges:E}=kh(),k=Te(),C=Se(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),_=Se(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),y=Se(()=>{var W,P,Q,p,M,x;return((W=s.value)==null?void 0:W.nodeId)===h&&((P=s.value)==null?void 0:P.id)===e.id&&((Q=s.value)==null?void 0:Q.type)===i.value||((p=l.value)==null?void 0:p.nodeId)===h&&((M=l.value)==null?void 0:M.id)===e.id&&((x=l.value)==null?void 0:x.type)===i.value}),D=Se(()=>{var W,P,Q;return((W=a.value)==null?void 0:W.nodeId)===h&&((P=a.value)==null?void 0:P.id)===e.id&&((Q=a.value)==null?void 0:Q.type)===i.value}),{handlePointerDown:U,handleClick:z}=Eh({nodeId:h,handleId:e.id,isValidConnection:r,type:i}),O=ue(()=>typeof e.connectable=="string"&&e.connectable==="single"?!E.value.some(W=>{const P=W[`${i.value}Handle`];return W[i.value]!==h?!1:P?P===e.id:!0}):typeof e.connectable=="number"?E.value.filter(W=>{const P=W[`${i.value}Handle`];return W[i.value]!==h?!1:P?P===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(S,E.value):He(e.connectable)?e.connectable:c.value);Wt(()=>{var W;if(!S.dimensions.width||!S.dimensions.height)return;const P=(W=S.handleBounds[i.value])==null?void 0:W.find(L=>L.id===e.id);if(!u.value||P)return;const Q=u.value.querySelector(".vue-flow__transformationpane");if(!b.value||!k.value||!Q||!e.id)return;const p=b.value.getBoundingClientRect(),M=k.value.getBoundingClientRect(),x=window.getComputedStyle(Q),{m22:I}=new window.DOMMatrixReadOnly(x.transform),A={id:e.id,position:e.position,x:(M.left-p.left)/I,y:(M.top-p.top)/I,type:i.value,nodeId:h,...xs(k.value)};S.handleBounds[i.value]=[...S.handleBounds[i.value]??[],A]});function V(W){const P=jl(W);O.value&&C.value&&(P&&W.button===0||!P)&&U(W)}function H(W){!h||!a.value&&!C.value||O.value&&z(W)}return t({handleClick:z,handlePointerDown:U,onClick:H,onPointerDown:V}),(W,P)=>(se(),de("div",{ref_key:"handle",ref:k,"data-id":`${te(o)}-${te(h)}-${e.id}-${i.value}`,"data-handleid":e.id,"data-nodeid":te(h),"data-handlepos":W.position,class:rt(["vue-flow__handle",[`vue-flow__handle-${W.position}`,`vue-flow__handle-${e.id}`,te(d),te(f),i.value,{connectable:O.value,connecting:D.value,connectablestart:C.value,connectableend:_.value,connectionindicator:O.value&&(C.value&&!y.value||_.value&&y.value)}]]),onMousedown:V,onTouchstartPassive:V,onClick:H},[Be(W.$slots,"default",{id:W.id})],42,tb))}}),Ts=function({sourcePosition:e=ae.Bottom,targetPosition:t=ae.Top,label:n,connectable:i=!0,isValidTargetPos:r,isValidSourcePos:o,data:s}){const a=s.label??n;return[Ne(Xo,{type:"target",position:t,connectable:i,isValidConnection:r}),typeof a!="string"&&a?Ne(a):Ne(Ae,[a]),Ne(Xo,{type:"source",position:e,connectable:i,isValidConnection:o})]};Ts.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Ts.inheritAttrs=!1;Ts.compatConfig={MODE:3};const ib=Ts,Cs=function({targetPosition:e=ae.Top,label:t,connectable:n=!0,isValidTargetPos:i,data:r}){const o=r.label??t;return[Ne(Xo,{type:"target",position:e,connectable:n,isValidConnection:i}),typeof o!="string"&&o?Ne(o):Ne(Ae,[o])]};Cs.props=["targetPosition","label","isValidTargetPos","connectable","data"];Cs.inheritAttrs=!1;Cs.compatConfig={MODE:3};const rb=Cs,As=function({sourcePosition:e=ae.Bottom,label:t,connectable:n=!0,isValidSourcePos:i,data:r}){const o=r.label??t;return[typeof o!="string"&&o?Ne(o):Ne(Ae,[o]),Ne(Xo,{type:"source",position:e,connectable:n,isValidConnection:i})]};As.props=["sourcePosition","label","isValidSourcePos","connectable","data"];As.inheritAttrs=!1;As.compatConfig={MODE:3};const ob=As,sb=["transform"],ab=["width","height","x","y","rx","ry"],lb=["y"],ub={name:"EdgeText",compatConfig:{MODE:3}},cb=Ie({...ub,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=Te({x:0,y:0,width:0,height:0}),n=Te(null),i=ue(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);Wt(r),be([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const o=n.value.getBBox();(o.width!==t.value.width||o.height!==t.value.height)&&(t.value=o)}return(o,s)=>(se(),de("g",{transform:i.value,class:"vue-flow__edge-textwrapper"},[o.labelShowBg?(se(),de("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*o.labelBgPadding[0]}px`,height:`${t.value.height+2*o.labelBgPadding[1]}px`,x:-o.labelBgPadding[0],y:-o.labelBgPadding[1],style:We(o.labelBgStyle),rx:o.labelBgBorderRadius,ry:o.labelBgBorderRadius},null,12,ab)):Le("",!0),_e("text",gr(o.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:o.labelStyle}),[Be(o.$slots,"default",{},()=>[typeof o.label!="string"?(se(),ze(Ln(o.label),{key:0})):(se(),de(Ae,{key:1},[$f(nn(o.label),1)],64))])],16,lb)],8,sb))}}),db=["id","d","marker-end","marker-start"],fb=["d","stroke-width"],hb={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Ns=Ie({...hb,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Te(null),i=Te(null),r=Te(null),o=kl();return t({pathEl:n,interactionEl:i,labelEl:r}),(s,a)=>(se(),de(Ae,null,[_e("path",gr(te(o),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,db),s.interactionWidth?(se(),de("path",{key:0,ref_key:"interactionEl",ref:i,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,fb)):Le("",!0),s.label&&s.labelX&&s.labelY?(se(),ze(cb,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Le("",!0)],64))}});function Ah({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,s=Math.abs(i-t)/2,a=i<t?i+s:i-s;return[o,a,r,s]}function Nh({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+i*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function eo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Sc({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){let s,a;switch(e){case ae.Left:s=t-eo(t-i,o),a=n;break;case ae.Right:s=t+eo(i-t,o),a=n;break;case ae.Top:s=t,a=n-eo(n-r,o);break;case ae.Bottom:s=t,a=n+eo(r-n,o);break}return[s,a]}function Ih(e){const{sourceX:t,sourceY:n,sourcePosition:i=ae.Bottom,targetX:r,targetY:o,targetPosition:s=ae.Top,curvature:a=.25}=e,[l,u]=Sc({pos:i,x1:t,y1:n,x2:r,y2:o,c:a}),[c,d]=Sc({pos:s,x1:r,y1:o,x2:t,y2:n,c:a}),[f,h,S,b]=Nh({sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${o}`,f,h,S,b]}function $c({pos:e,x1:t,y1:n,x2:i,y2:r}){let o,s;switch(e){case ae.Left:case ae.Right:o=.5*(t+i),s=n;break;case ae.Top:case ae.Bottom:o=t,s=.5*(n+r);break}return[o,s]}function Ph(e){const{sourceX:t,sourceY:n,sourcePosition:i=ae.Bottom,targetX:r,targetY:o,targetPosition:s=ae.Top}=e,[a,l]=$c({pos:i,x1:t,y1:n,x2:r,y2:o}),[u,c]=$c({pos:s,x1:r,y1:o,x2:t,y2:n}),[d,f,h,S]=Nh({sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${o}`,d,f,h,S]}const xc={[ae.Left]:{x:-1,y:0},[ae.Right]:{x:1,y:0},[ae.Top]:{x:0,y:-1},[ae.Bottom]:{x:0,y:1}};function gb({source:e,sourcePosition:t=ae.Bottom,target:n}){return t===ae.Left||t===ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ec(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function pb({source:e,sourcePosition:t=ae.Bottom,target:n,targetPosition:i=ae.Top,center:r,offset:o}){const s=xc[t],a=xc[i],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=gb({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,S,b;const E={x:0,y:0},k={x:0,y:0},[C,_,y,D]=Ah({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){S=r.x??C,b=r.y??_;const z=[{x:S,y:l.y},{x:S,y:u.y}],O=[{x:l.x,y:b},{x:u.x,y:b}];s[d]===f?h=d==="x"?z:O:h=d==="x"?O:z}else{const z=[{x:l.x,y:u.y}],O=[{x:u.x,y:l.y}];if(d==="x"?h=s.x===f?O:z:h=s.y===f?z:O,t===i){const Q=Math.abs(e[d]-n[d]);if(Q<=o){const p=Math.min(o-1,o-Q);s[d]===f?E[d]=(l[d]>e[d]?-1:1)*p:k[d]=(u[d]>n[d]?-1:1)*p}}if(t!==i){const Q=d==="x"?"y":"x",p=s[d]===a[Q],M=l[Q]>u[Q],x=l[Q]<u[Q];(s[d]===1&&(!p&&M||p&&x)||s[d]!==1&&(!p&&x||p&&M))&&(h=d==="x"?z:O)}const V={x:l.x+E.x,y:l.y+E.y},H={x:u.x+k.x,y:u.y+k.y},W=Math.max(Math.abs(V.x-h[0].x),Math.abs(H.x-h[0].x)),P=Math.max(Math.abs(V.y-h[0].y),Math.abs(H.y-h[0].y));W>=P?(S=(V.x+H.x)/2,b=h[0].y):(S=h[0].x,b=(V.y+H.y)/2)}return[[e,{x:l.x+E.x,y:l.y+E.y},...h,{x:u.x+k.x,y:u.y+k.y},n],S,b,y,D]}function vb(e,t,n,i){const r=Math.min(Ec(e,t)/2,Ec(t,n)/2,i),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+r*u},${s}Q ${o},${s} ${o},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+r*l}Q ${o},${s} ${o+r*a},${s}`}function Ua(e){const{sourceX:t,sourceY:n,sourcePosition:i=ae.Bottom,targetX:r,targetY:o,targetPosition:s=ae.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,S,b]=pb({source:{x:t,y:n},sourcePosition:i,target:{x:r,y:o},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((k,C,_)=>{let y;return _>0&&_<d.length-1?y=vb(d[_-1],C,d[_+1],a):y=`${_===0?"M":"L"}${C.x} ${C.y}`,k+=y,k},""),f,h,S,b]}function mb(e){const{sourceX:t,sourceY:n,targetX:i,targetY:r}=e,[o,s,a,l]=Ah({sourceX:t,sourceY:n,targetX:i,targetY:r});return[`M ${t},${n}L ${i},${r}`,o,s,a,l]}const yb=Ie({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,r]=mb(e);return Ne(Ns,{path:n,labelX:i,labelY:r,...t,...e})}}}),_b=yb,wb=Ie({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,r]=Ua({...e,sourcePosition:e.sourcePosition??ae.Bottom,targetPosition:e.targetPosition??ae.Top});return Ne(Ns,{path:n,labelX:i,labelY:r,...t,...e})}}}),Oh=wb,bb=Ie({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ne(Oh,{...e,...t,borderRadius:0})}}),Sb=bb,$b=Ie({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,r]=Ih({...e,sourcePosition:e.sourcePosition??ae.Bottom,targetPosition:e.targetPosition??ae.Top});return Ne(Ns,{path:n,labelX:i,labelY:r,...t,...e})}}}),xb=$b,Eb=Ie({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,i,r]=Ph({...e,sourcePosition:e.sourcePosition??ae.Bottom,targetPosition:e.targetPosition??ae.Top});return Ne(Ns,{path:n,labelX:i,labelY:r,...t,...e})}}}),kb=Eb,Tb={input:ob,default:ib,output:rb},Cb={default:xb,straight:_b,step:Sb,smoothstep:Oh,simplebezier:kb};function Ab(e,t,n){const i=ue(()=>b=>t.value.get(b)),r=ue(()=>b=>n.value.get(b)),o=ue(()=>{const b={...Cb,...e.edgeTypes},E=Object.keys(b);for(const k of e.edges)k.type&&!E.includes(k.type)&&(b[k.type]=k.type);return b}),s=ue(()=>{const b={...Tb,...e.nodeTypes},E=Object.keys(b);for(const k of e.nodes)k.type&&!E.includes(k.type)&&(b[k.type]=k.type);return b}),a=ue(()=>e.onlyRenderVisibleElements?ph(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=ue(()=>{if(e.onlyRenderVisibleElements){const b=[];for(const E of e.edges){const k=t.value.get(E.source),C=t.value.get(E.target);kw({sourcePos:k.computedPosition||{x:0,y:0},targetPos:C.computedPosition||{x:0,y:0},sourceWidth:k.dimensions.width,sourceHeight:k.dimensions.height,targetWidth:C.dimensions.width,targetHeight:C.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&b.push(E)}return b}return e.edges}),u=ue(()=>[...a.value,...l.value]),c=ue(()=>{const b=[];for(const E of e.nodes)E.selected&&b.push(E);return b}),d=ue(()=>{const b=[];for(const E of e.edges)E.selected&&b.push(E);return b}),f=ue(()=>[...c.value,...d.value]),h=ue(()=>{const b=[];for(const E of e.nodes)E.dimensions.width&&E.dimensions.height&&E.handleBounds!==void 0&&b.push(E);return b}),S=ue(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:i,getEdge:r,getElements:u,getEdgeTypes:o,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:S}}class jn{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Nn())==null?void 0:t.appContext.app,i=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??jn.instance;return jn.instance=i??new jn,n&&(n.config.globalProperties.$vueFlowStorage=jn.instance),jn.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const i=Ch(),r=gs(i),o={};for(const[f,h]of Object.entries(r.hooks)){const S=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;o[S]=h.on}const s={};for(const[f,h]of Object.entries(r.hooks))s[f]=h.trigger;const a=ue(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=ue(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=Ab(r,a,l),c=eb(r,a,l);c.setState({...r,...n});const d={...o,...u,...c,...Sm(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Oe(e){const t=jn.getInstance(),n=pl(),i=typeof e=="object",r=i?e:{id:e},o=r.id,s=o??(n==null?void 0:n.vueFlowId);let a;if(n){const l=mt(bc,null);typeof l<"u"&&l!==null&&(!s||l.id===s)&&(a=l)}if(a||s&&(a=t.get(s)),!a||s&&a.id!==s){const l=o??t.getId(),u=t.create(l,r);a=u,(n??$d(!0)).run(()=>{be(u.applyDefault,(d,f,h)=>{const S=E=>{u.applyNodeChanges(E)},b=E=>{u.applyEdgeChanges(E)};d?(u.onNodesChange(S),u.onEdgesChange(b)):(u.hooks.value.nodesChange.off(S),u.hooks.value.edgesChange.off(b)),h(()=>{u.hooks.value.nodesChange.off(S),u.hooks.value.edgesChange.off(b)})},{immediate:!0}),vr(()=>{if(a){const d=t.get(a.id);d?d.$destroy():Br(`No store instance found for id ${a.id} in storage.`)}})})}else i&&a.setState(r);if(n&&(Tn(bc,a),n.vueFlowId=a.id),i){const l=Nn();(l==null?void 0:l.type.name)!=="VueFlow"&&a.emits.error(new Ge(Ve.USEVUEFLOW_OPTIONS))}return a}function Nb(e){const{emits:t,dimensions:n}=Oe();let i;Wt(()=>{const r=()=>{var o,s;if(!e.value||!(((s=(o=e.value).checkVisibility)==null?void 0:s.call(o))??!0))return;const a=xs(e.value);(a.width===0||a.height===0)&&t.error(new Ge(Ve.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),e.value&&(i=new ResizeObserver(()=>r()),i.observe(e.value)),xl(()=>{window.removeEventListener("resize",r),i&&e.value&&i.unobserve(e.value)})})}const Ib={name:"UserSelection",compatConfig:{MODE:3}},Pb=Ie({...Ib,props:{userSelectionRect:{}},setup(e){return(t,n)=>(se(),de("div",{class:"vue-flow__selection vue-flow__container",style:We({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ob=["tabIndex"],Mb={name:"NodesSelection",compatConfig:{MODE:3}},Rb=Ie({...Mb,setup(e){const{emits:t,viewport:n,getSelectedNodes:i,noPanClassName:r,disableKeyboardA11y:o,userSelectionActive:s}=Oe(),a=Th(),l=Te(null),u=$h({el:l,onStart(S){t.selectionDragStart(S),t.nodeDragStart(S)},onDrag(S){t.selectionDrag(S),t.nodeDrag(S)},onStop(S){t.selectionDragStop(S),t.nodeDragStop(S)}});Wt(()=>{var S;o.value||(S=l.value)==null||S.focus({preventScroll:!0})});const c=ue(()=>zl(i.value)),d=ue(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(S){t.selectionContextMenu({event:S,nodes:i.value})}function h(S){o||bi[S.key]&&(S.preventDefault(),a({x:bi[S.key].x,y:bi[S.key].y},S.shiftKey))}return(S,b)=>!te(s)&&c.value.width&&c.value.height?(se(),de("div",{key:0,class:rt(["vue-flow__nodesselection vue-flow__container",te(r)]),style:We({transform:`translate(${te(n).x}px,${te(n).y}px) scale(${te(n).zoom})`})},[_e("div",{ref_key:"el",ref:l,class:rt([{dragging:te(u)},"vue-flow__nodesselection-rect"]),style:We(d.value),tabIndex:te(o)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,Ob)],6)):Le("",!0)}});function Db(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Bb={name:"Pane",compatConfig:{MODE:3}},Lb=Ie({...Bb,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:i,emits:r,userSelectionActive:o,removeSelectedElements:s,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:S,deleteKeyCode:b,multiSelectionKeyCode:E,multiSelectionActive:k,edgeLookup:C,nodeLookup:_,connectionLookup:y,defaultEdgeOptions:D,connectionStartHandle:U}=Oe(),z=Te(null),O=Te(new Set),V=Te(new Set),H=Te(),W=Se(()=>l.value&&(e.isSelecting||o.value)),P=Se(()=>U.value!==null);let Q=!1,p=!1;const M=sr(b,{actInsideInputWithModifier:!1}),x=sr(E);be(M,Y=>{Y&&(f(d.value),h(c.value),u.value=!1)}),be(x,Y=>{k.value=Y});function I(Y,ee){return X=>{X.target===ee&&(Y==null||Y(X))}}function A(Y){if(Q||P.value){Q=!1;return}r.paneClick(Y),s(),u.value=!1}function L(Y){Y.preventDefault(),Y.stopPropagation(),r.paneContextMenu(Y)}function R(Y){r.paneScroll(Y)}function q(Y){var ee,X,re;if(H.value=(ee=t.value)==null?void 0:ee.getBoundingClientRect(),!l.value||!e.isSelecting||Y.button!==0||Y.target!==z.value||!H.value)return;(re=(X=Y.target)==null?void 0:X.setPointerCapture)==null||re.call(X,Y.pointerId);const{x:le,y:ce}=Db(Y,H.value);p=!0,Q=!1,s(),a.value={width:0,height:0,startX:le,startY:ce,x:le,y:ce},r.selectionStart(Y)}function J(Y){var ee;if(!H.value||!a.value)return;Q=!0;const{x:X,y:re}=Ft(Y,H.value),{startX:le=0,startY:ce=0}=a.value,ve={startX:le,startY:ce,x:X<le?X:le,y:re<ce?re:ce,width:Math.abs(X-le),height:Math.abs(re-ce)},$e=O.value,$=V.value;O.value=new Set(ph(n.value,ve,i.value,S.value===Ll.Partial,!0).map(g=>g.id)),V.value=new Set;const T=((ee=D.value)==null?void 0:ee.selectable)??!0;for(const g of O.value){const v=y.value.get(g);if(v)for(const{edgeId:w}of v.values()){const m=C.value.get(w);m&&(m.selectable??T)&&V.value.add(w)}}if(!wc($e,O.value)){const g=Sn(_.value,O.value,!0);r.nodesChange(g)}if(!wc($,V.value)){const g=Sn(C.value,V.value);r.edgesChange(g)}a.value=ve,o.value=!0,u.value=!1}function ie(Y){var ee;Y.button!==0||!p||((ee=Y.target)==null||ee.releasePointerCapture(Y.pointerId),!o.value&&a.value&&Y.target===z.value&&A(Y),o.value=!1,a.value=null,u.value=O.value.size>0,r.selectionEnd(Y),e.selectionKeyPressed&&(Q=!1),p=!1)}return(Y,ee)=>(se(),de("div",{ref_key:"container",ref:z,class:rt(["vue-flow__pane vue-flow__container",{selection:Y.isSelecting}]),onClick:ee[0]||(ee[0]=X=>W.value?void 0:I(A,z.value)(X)),onContextmenu:ee[1]||(ee[1]=X=>I(L,z.value)(X)),onWheelPassive:ee[2]||(ee[2]=X=>I(R,z.value)(X)),onPointerenter:ee[3]||(ee[3]=X=>W.value?void 0:te(r).paneMouseEnter(X)),onPointerdown:ee[4]||(ee[4]=X=>W.value?q(X):te(r).paneMouseMove(X)),onPointermove:ee[5]||(ee[5]=X=>W.value?J(X):te(r).paneMouseMove(X)),onPointerup:ee[6]||(ee[6]=X=>W.value?ie(X):void 0),onPointerleave:ee[7]||(ee[7]=X=>te(r).paneMouseLeave(X))},[Be(Y.$slots,"default"),te(o)&&te(a)?(se(),ze(Pb,{key:0,"user-selection-rect":te(a)},null,8,["user-selection-rect"])):Le("",!0),te(u)&&te(d).length?(se(),ze(Rb,{key:1})):Le("",!0)],34))}}),zb={name:"Transform",compatConfig:{MODE:3}},Fb=Ie({...zb,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:i}=Oe(),r=ue(()=>n.value?!i.value:!1),o=ue(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,a)=>(se(),de("div",{class:"vue-flow__transformationpane vue-flow__container",style:We({transform:o.value,opacity:r.value?0:void 0})},[Be(s.$slots,"default")],4))}}),jb={name:"Viewport",compatConfig:{MODE:3}},Ub=Ie({...jb,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:i,translateExtent:r,zoomActivationKeyCode:o,selectionKeyCode:s,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:S,preventScrolling:b,noWheelClassName:E,noPanClassName:k,emits:C,connectionStartHandle:_,userSelectionActive:y,paneDragging:D,d3Zoom:U,d3Selection:z,d3ZoomHandler:O,viewport:V,viewportRef:H,paneClickDistance:W}=Oe();Nb(H);const P=Io(!1),Q=Io(!1);let p=null,M=!1,x=0,I={x:0,y:0,zoom:0};const A=sr(a),L=sr(s),R=sr(o),q=Se(()=>(!L.value||L.value&&s.value===!0)&&(A.value||d.value)),J=Se(()=>A.value||l.value),ie=Se(()=>L.value||s.value===!0&&q.value!==!0),Y=Se(()=>_.value!==null);Wt(()=>{if(!H.value){Br("Viewport element is missing");return}const ce=H.value,ve=ce.getBoundingClientRect(),$e=sw().clickDistance(W.value).scaleExtent([t.value,n.value]).translateExtent(r.value),$=St(ce).call($e),T=$.on("wheel.zoom"),g=Ci.translate(i.value.x??0,i.value.y??0).scale(fn(i.value.zoom??1,t.value,n.value)),v=[[0,0],[ve.width,ve.height]],w=$e.constrain()(g,v,r.value);$e.transform($,w),$e.wheelDelta(za),U.value=$e,z.value=$,O.value=T,V.value={x:w.x,y:w.y,zoom:w.k},$e.on("start",m=>{var N;if(!m.sourceEvent)return null;x=m.sourceEvent.button,P.value=!0;const j=re(m.transform);((N=m.sourceEvent)==null?void 0:N.type)==="mousedown"&&(D.value=!0),I=j,C.viewportChangeStart(j),C.moveStart({event:m,flowTransform:j})}),$e.on("end",m=>{if(!m.sourceEvent)return null;if(P.value=!1,D.value=!1,ee(q.value,x??0)&&!M&&C.paneContextMenu(m.sourceEvent),M=!1,X(I,m.transform)){const N=re(m.transform);I=N,C.viewportChangeEnd(N),C.moveEnd({event:m,flowTransform:N})}}),$e.filter(m=>{var N;const j=R.value||S.value,F=h.value&&m.ctrlKey,B=m.button,K=m.type==="wheel";if(B===1&&m.type==="mousedown"&&(le(m,"vue-flow__node")||le(m,"vue-flow__edge")))return!0;if(!q.value&&!j&&!J.value&&!f.value&&!h.value||y.value||Y.value&&!K||!f.value&&m.type==="dblclick"||le(m,E.value)&&K||le(m,k.value)&&(!K||J.value&&K&&!R.value)||!h.value&&m.ctrlKey&&K||!j&&!J.value&&!F&&K)return!1;if(!h&&m.type==="touchstart"&&((N=m.touches)==null?void 0:N.length)>1)return m.preventDefault(),!1;if(!q.value&&(m.type==="mousedown"||m.type==="touchstart")||s.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&B===0||Array.isArray(d.value)&&!d.value.includes(B)&&(m.type==="mousedown"||m.type==="touchstart"))return!1;const G=Array.isArray(d.value)&&d.value.includes(B)||s.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!B||B<=1;return(!m.ctrlKey||A.value||K)&&G}),be([y,q],()=>{y.value&&!P.value?$e.on("zoom",null):y.value||$e.on("zoom",m=>{V.value={x:m.transform.x,y:m.transform.y,zoom:m.transform.k};const N=re(m.transform);M=ee(q.value,x??0),C.viewportChange(N),C.move({event:m,flowTransform:N})})},{immediate:!0}),be([y,J,u,R,h,b,E],()=>{J.value&&!R.value&&!y.value?$.on("wheel.zoom",m=>{if(le(m,E.value))return!1;const N=R.value||S.value,j=h.value&&m.ctrlKey;if(!(!b.value||J.value||N||j))return!1;m.preventDefault(),m.stopImmediatePropagation();const B=$.property("__zoom").k||1,K=xr();if(!A.value&&m.ctrlKey&&h.value&&K){const xe=Bt(m),Ee=za(m),Xe=B*2**Ee;$e.scaleTo($,Xe,xe,m);return}const G=m.deltaMode===1?20:1;let Z=u.value===or.Vertical?0:m.deltaX*G,ne=u.value===or.Horizontal?0:m.deltaY*G;!K&&m.shiftKey&&u.value!==or.Vertical&&!Z&&ne&&(Z=ne,ne=0),$e.translateBy($,-(Z/B)*c.value,-(ne/B)*c.value);const he=re($.property("__zoom"));p&&clearTimeout(p),Q.value?(C.move({event:m,flowTransform:he}),C.viewportChange(he),p=setTimeout(()=>{C.moveEnd({event:m,flowTransform:he}),C.viewportChangeEnd(he),Q.value=!1},150)):(Q.value=!0,C.moveStart({event:m,flowTransform:he}),C.viewportChangeStart(he))},{passive:!1}):typeof T<"u"&&$.on("wheel.zoom",function(m,N){const j=!b.value&&m.type==="wheel"&&!m.ctrlKey,F=R.value||S.value,B=h.value&&m.ctrlKey;if(!F&&!l.value&&!B&&m.type==="wheel"||j||le(m,E.value))return null;m.preventDefault(),T.call(this,m,N)},{passive:!1})},{immediate:!0})});function ee(ce,ve){return ve===2&&Array.isArray(ce)&&ce.includes(2)}function X(ce,ve){return ce.x!==ve.x&&!Number.isNaN(ve.x)||ce.y!==ve.y&&!Number.isNaN(ve.y)||ce.zoom!==ve.k&&!Number.isNaN(ve.k)}function re(ce){return{x:ce.x,y:ce.y,zoom:ce.k}}function le(ce,ve){return ce.target.closest(`.${ve}`)}return(ce,ve)=>(se(),de("div",{ref_key:"viewportRef",ref:H,class:"vue-flow__viewport vue-flow__container"},[we(Lb,{"is-selecting":ie.value,"selection-key-pressed":te(L),class:rt({connecting:Y.value,dragging:te(D),draggable:te(d)===!0||Array.isArray(te(d))&&te(d).includes(0)})},{default:pt(()=>[we(Fb,null,{default:pt(()=>[Be(ce.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Hb=["id"],Vb=["id"],Wb=["id"],qb={name:"A11yDescriptions",compatConfig:{MODE:3}},Gb=Ie({...qb,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:i}=Oe();return(r,o)=>(se(),de(Ae,null,[_e("div",{id:`${te(sh)}-${te(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+nn(te(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Hb),_e("div",{id:`${te(ah)}-${te(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Vb),te(n)?Le("",!0):(se(),de("div",{key:0,id:`${te(fw)}-${te(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},nn(te(i)),9,Wb))],64))}});function Kb(){const e=Oe();be(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function Yb(e,t,n){return n===ae.Left?e-t:n===ae.Right?e+t:e}function Xb(e,t,n){return n===ae.Top?e-t:n===ae.Bottom?e+t:e}const Hl=function({radius:e=10,centerX:t=0,centerY:n=0,position:i=ae.Top,type:r}){return Ne("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:Yb(t,e,i),cy:Xb(n,e,i),r:e,stroke:"transparent",fill:"transparent"})};Hl.props=["radius","centerX","centerY","position","type"];Hl.compatConfig={MODE:3};const kc=Hl,Jb=Ie({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:i,edgeUpdaterRadius:r,emits:o,nodesSelectionActive:s,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:S,elementsSelectable:b,edgesUpdatable:E,edgesFocusable:k,hooks:C}=Oe(),_=ue(()=>c(e.id)),{emit:y,on:D}=Uw(_.value,o),U=mt(ks),z=Nn(),O=Te(!1),V=Te(!1),H=Te(""),W=Te(null),P=Te("source"),Q=Te(null),p=Se(()=>typeof _.value.selectable>"u"?b.value:_.value.selectable),M=Se(()=>typeof _.value.updatable>"u"?E.value:_.value.updatable),x=Se(()=>typeof _.value.focusable>"u"?k.value:_.value.focusable);Tn(zw,e.id),Tn(Fw,Q);const I=ue(()=>_.value.class instanceof Function?_.value.class(_.value):_.value.class),A=ue(()=>_.value.style instanceof Function?_.value.style(_.value):_.value.style),L=ue(()=>{const v=_.value.type||"default",w=U==null?void 0:U[`edge-${v}`];if(w)return w;let m=_.value.template??l.value[v];if(typeof m=="string"&&z){const N=Object.keys(z.appContext.components);N&&N.includes(v)&&(m=Jd(v,!1))}return m&&typeof m!="string"?m:(o.error(new Ge(Ve.EDGE_TYPE_MISSING,m)),!1)}),{handlePointerDown:R}=Eh({nodeId:H,handleId:W,type:P,isValidConnection:f,edgeUpdaterType:P,onEdgeUpdate:ie,onEdgeUpdateEnd:Y});return()=>{const v=d(_.value.source),w=d(_.value.target),m="pathOptions"in _.value?_.value.pathOptions:{};if(!v&&!w)return o.error(new Ge(Ve.EDGE_SOURCE_TARGET_MISSING,_.value.id,_.value.source,_.value.target)),null;if(!v)return o.error(new Ge(Ve.EDGE_SOURCE_MISSING,_.value.id,_.value.source)),null;if(!w)return o.error(new Ge(Ve.EDGE_TARGET_MISSING,_.value.id,_.value.target)),null;if(!_.value||_.value.hidden||v.hidden||w.hidden)return null;let N;i.value===Cn.Strict?N=v.handleBounds.source:N=[...v.handleBounds.source||[],...v.handleBounds.target||[]];const j=gc(N,_.value.sourceHandle);let F;i.value===Cn.Strict?F=w.handleBounds.target:F=[...w.handleBounds.target||[],...w.handleBounds.source||[]];const B=gc(F,_.value.targetHandle),K=(j==null?void 0:j.position)||ae.Bottom,G=(B==null?void 0:B.position)||ae.Top,{x:Z,y:ne}=Ai(v,j,K),{x:he,y:xe}=Ai(w,B,G);return _.value.sourceX=Z,_.value.sourceY=ne,_.value.targetX=he,_.value.targetY=xe,Ne("g",{ref:Q,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${L.value===!1?"default":_.value.type||"default"}`,a.value,I.value,{updating:O.value,selected:_.value.selected,animated:_.value.animated,inactive:!p.value&&!C.value.edgeClick.hasListeners()}],tabIndex:x.value?0:void 0,"aria-label":_.value.ariaLabel===null?void 0:_.value.ariaLabel??`Edge from ${_.value.source} to ${_.value.target}`,"aria-describedby":x.value?`${ah}-${t}`:void 0,"aria-roledescription":"edge",role:x.value?"group":"img",..._.value.domAttributes,onClick:X,onContextmenu:re,onDblclick:le,onMouseenter:ce,onMousemove:ve,onMouseleave:$e,onKeyDown:x.value?g:void 0},[V.value?null:Ne(L.value===!1?l.value.default:L.value,{id:e.id,sourceNode:v,targetNode:w,source:_.value.source,target:_.value.target,type:_.value.type,updatable:M.value,selected:_.value.selected,animated:_.value.animated,label:_.value.label,labelStyle:_.value.labelStyle,labelShowBg:_.value.labelShowBg,labelBgStyle:_.value.labelBgStyle,labelBgPadding:_.value.labelBgPadding,labelBgBorderRadius:_.value.labelBgBorderRadius,data:_.value.data,events:{..._.value.events,...D},style:A.value,markerStart:`url('#${$r(_.value.markerStart,t)}')`,markerEnd:`url('#${$r(_.value.markerEnd,t)}')`,sourcePosition:K,targetPosition:G,sourceX:Z,sourceY:ne,targetX:he,targetY:xe,sourceHandleId:_.value.sourceHandle,targetHandleId:_.value.targetHandle,interactionWidth:_.value.interactionWidth,...m}),[M.value==="source"||M.value===!0?[Ne("g",{onMousedown:$,onMouseenter:q,onMouseout:J},Ne(kc,{position:K,centerX:Z,centerY:ne,radius:r.value,type:"source","data-type":"source"}))]:null,M.value==="target"||M.value===!0?[Ne("g",{onMousedown:T,onMouseenter:q,onMouseout:J},Ne(kc,{position:G,centerX:he,centerY:xe,radius:r.value,type:"target","data-type":"target"}))]:null]])};function q(){O.value=!0}function J(){O.value=!1}function ie(v,w){y.update({event:v,edge:_.value,connection:w})}function Y(v){y.updateEnd({event:v,edge:_.value}),V.value=!1}function ee(v,w){v.button===0&&(V.value=!0,H.value=w?_.value.target:_.value.source,W.value=(w?_.value.targetHandle:_.value.sourceHandle)??null,P.value=w?"target":"source",y.updateStart({event:v,edge:_.value}),R(v))}function X(v){var w;const m={event:v,edge:_.value};p.value&&(s.value=!1,_.value.selected&&h.value?(u([_.value]),(w=Q.value)==null||w.blur()):n([_.value])),y.click(m)}function re(v){y.contextMenu({event:v,edge:_.value})}function le(v){y.doubleClick({event:v,edge:_.value})}function ce(v){y.mouseEnter({event:v,edge:_.value})}function ve(v){y.mouseMove({event:v,edge:_.value})}function $e(v){y.mouseLeave({event:v,edge:_.value})}function $(v){ee(v,!0)}function T(v){ee(v,!1)}function g(v){var w;!S.value&&lh.includes(v.key)&&p.value&&(v.key==="Escape"?((w=Q.value)==null||w.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Zb=Jb,Qb=Ie({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:i,connectionEndHandle:r,connectionPosition:o,connectionLineType:s,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=Oe(),f=(e=mt(ks))==null?void 0:e["connection-line"],h=ue(()=>{var C;return d((C=i.value)==null?void 0:C.nodeId)}),S=ue(()=>{var C;return d((C=r.value)==null?void 0:C.nodeId)??null}),b=ue(()=>({x:(o.value.x-c.value.x)/c.value.zoom,y:(o.value.y-c.value.y)/c.value.zoom})),E=ue(()=>l.value.markerStart?`url(#${$r(l.value.markerStart,t)})`:""),k=ue(()=>l.value.markerEnd?`url(#${$r(l.value.markerEnd,t)})`:"");return()=>{var C,_,y;if(!h.value||!i.value)return null;const D=i.value.id,U=i.value.type,z=h.value.handleBounds;let O=(z==null?void 0:z[U])??[];if(n.value===Cn.Loose){const A=(z==null?void 0:z[U==="source"?"target":"source"])??[];O=[...O,...A]}if(!O)return null;const V=(D?O.find(A=>A.id===D):O[0])??null,H=(V==null?void 0:V.position)??ae.Top,{x:W,y:P}=Ai(h.value,V,H);let Q=null;S.value&&(n.value===Cn.Strict?Q=((C=S.value.handleBounds[U==="source"?"target":"source"])==null?void 0:C.find(A=>{var L;return A.id===((L=r.value)==null?void 0:L.id)}))||null:Q=((_=[...S.value.handleBounds.source??[],...S.value.handleBounds.target??[]])==null?void 0:_.find(A=>{var L;return A.id===((L=r.value)==null?void 0:L.id)}))||null);const p=((y=r.value)==null?void 0:y.position)??(H?Fa[H]:null);if(!H||!p)return null;const M=s.value??l.value.type??zn.Bezier;let x="";const I={sourceX:W,sourceY:P,sourcePosition:H,targetX:b.value.x,targetY:b.value.y,targetPosition:p};return M===zn.Bezier?[x]=Ih(I):M===zn.Step?[x]=Ua({...I,borderRadius:0}):M===zn.SmoothStep?[x]=Ua(I):M===zn.SimpleBezier?[x]=Ph(I):x=`M${W},${P} ${b.value.x},${b.value.y}`,Ne("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ne("g",{class:"vue-flow__connection"},f?Ne(f,{sourceX:W,sourceY:P,sourcePosition:H,targetX:b.value.x,targetY:b.value.y,targetPosition:p,sourceNode:h.value,sourceHandle:V,targetNode:S.value,targetHandle:Q,markerEnd:k.value,markerStart:E.value,connectionStatus:u.value}):Ne("path",{d:x,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":k.value,"marker-start":E.value})))}}}),e1=Qb,t1=["id","markerWidth","markerHeight","markerUnits","orient"],n1={name:"MarkerType",compatConfig:{MODE:3}},i1=Ie({...n1,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(se(),de("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===te(Ba).ArrowClosed?(se(),de("polyline",{key:0,style:We({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Le("",!0),t.type===te(Ba).Arrow?(se(),de("polyline",{key:1,style:We({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Le("",!0)],8,t1))}}),r1={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},o1={name:"MarkerDefinitions",compatConfig:{MODE:3}},s1=Ie({...o1,setup(e){const{id:t,edges:n,connectionLineOptions:i,defaultMarkerColor:r}=Oe(),o=ue(()=>{const s=new Set,a=[],l=u=>{if(u){const c=$r(u,t);s.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||r.value}):a.push({id:c,color:r.value,type:u}),s.add(c))}};for(const u of[i.value.markerEnd,i.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(s,a)=>(se(),de("svg",r1,[_e("defs",null,[(se(!0),de(Ae,null,Yn(o.value,l=>(se(),ze(i1,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),a1={name:"Edges",compatConfig:{MODE:3}},l1=Ie({...a1,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:i}=Oe();return(r,o)=>(se(),de(Ae,null,[we(s1),(se(!0),de(Ae,null,Yn(te(n),s=>(se(),de("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:We({zIndex:te(Tw)(s,te(t),te(i))})},[we(te(Zb),{id:s.id},null,8,["id"])],4))),128)),we(te(e1))],64))}}),u1=Ie({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:i,nodesSelectionActive:r,multiSelectionActive:o,emits:s,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:S,ariaLiveMessage:b,snapToGrid:E,snapGrid:k,nodeDragThreshold:C,nodesDraggable:_,elementsSelectable:y,nodesConnectable:D,nodesFocusable:U,hooks:z}=Oe(),O=Te(null);Tn(Sh,O),Tn(Ul,e.id);const V=mt(ks),H=Nn(),W=Th(),{node:P,parentNode:Q}=kh(e.id),{emit:p,on:M}=Ww(P,s),x=Se(()=>typeof P.draggable>"u"?_.value:P.draggable),I=Se(()=>typeof P.selectable>"u"?y.value:P.selectable),A=Se(()=>typeof P.connectable>"u"?D.value:P.connectable),L=Se(()=>typeof P.focusable>"u"?U.value:P.focusable),R=ue(()=>I.value||x.value||z.value.nodeClick.hasListeners()||z.value.nodeDoubleClick.hasListeners()||z.value.nodeMouseEnter.hasListeners()||z.value.nodeMouseMove.hasListeners()||z.value.nodeMouseLeave.hasListeners()),q=Se(()=>!!P.dimensions.width&&!!P.dimensions.height),J=ue(()=>{const w=P.type||"default",m=V==null?void 0:V[`node-${w}`];if(m)return m;let N=P.template||d.value[w];if(typeof N=="string"&&H){const j=Object.keys(H.appContext.components);j&&j.includes(w)&&(N=Jd(w,!1))}return N&&typeof N!="string"?N:(s.error(new Ge(Ve.NODE_TYPE_MISSING,N)),!1)}),ie=$h({id:e.id,el:O,disabled:()=>!x.value,selectable:I,dragHandle:()=>P.dragHandle,onStart(w){p.dragStart(w)},onDrag(w){p.drag(w)},onStop(w){p.dragStop(w)},onClick(w){g(w)}}),Y=ue(()=>P.class instanceof Function?P.class(P):P.class),ee=ue(()=>{const w=(P.style instanceof Function?P.style(P):P.style)||{},m=P.width instanceof Function?P.width(P):P.width,N=P.height instanceof Function?P.height(P):P.height;return!w.width&&m&&(w.width=typeof m=="string"?m:`${m}px`),!w.height&&N&&(w.height=typeof N=="string"?N:`${N}px`),w}),X=Se(()=>Number(P.zIndex??ee.value.zIndex??0));return c(w=>{(w.includes(e.id)||!w.length)&&le()}),Wt(()=>{be(()=>P.hidden,(w=!1,m,N)=>{!w&&O.value&&(e.resizeObserver.observe(O.value),N(()=>{O.value&&e.resizeObserver.unobserve(O.value)}))},{immediate:!0,flush:"post"})}),be([()=>P.type,()=>P.sourcePosition,()=>P.targetPosition],()=>{kt(()=>{u([{id:e.id,nodeElement:O.value,forceUpdate:!0}])})}),be([()=>P.position.x,()=>P.position.y,()=>{var w;return(w=Q.value)==null?void 0:w.computedPosition.x},()=>{var w;return(w=Q.value)==null?void 0:w.computedPosition.y},()=>{var w;return(w=Q.value)==null?void 0:w.computedPosition.z},X,()=>P.selected,()=>P.dimensions.height,()=>P.dimensions.width,()=>{var w;return(w=Q.value)==null?void 0:w.dimensions.height},()=>{var w;return(w=Q.value)==null?void 0:w.dimensions.width}],([w,m,N,j,F,B])=>{const K={x:w,y:m,z:B+(h.value&&P.selected?1e3:0)};typeof N<"u"&&typeof j<"u"?P.computedPosition=bw({x:N,y:j,z:F},K):P.computedPosition=K},{flush:"post",immediate:!0}),be([()=>P.extent,f],([w,m],[N,j])=>{(w!==N||m!==j)&&re()}),P.extent==="parent"||typeof P.extent=="object"&&"range"in P.extent&&P.extent.range==="parent"?Ca(()=>q).toBe(!0).then(re):re(),()=>P.hidden?null:Ne("div",{ref:O,"data-id":P.id,class:["vue-flow__node",`vue-flow__node-${J.value===!1?"default":P.type||"default"}`,{[n.value]:x.value,dragging:ie==null?void 0:ie.value,draggable:x.value,selected:P.selected,selectable:I.value,parent:P.isParent},Y.value],style:{visibility:q.value?"visible":"hidden",zIndex:P.computedPosition.z??X.value,transform:`translate(${P.computedPosition.x}px,${P.computedPosition.y}px)`,pointerEvents:R.value?"all":"none",...ee.value},tabIndex:L.value?0:void 0,role:L.value?"group":void 0,"aria-describedby":S.value?void 0:`${sh}-${t}`,"aria-label":P.ariaLabel,"aria-roledescription":"node",...P.domAttributes,onMouseenter:ce,onMousemove:ve,onMouseleave:$e,onContextmenu:$,onClick:g,onDblclick:T,onKeydown:v},[Ne(J.value===!1?d.value.default:J.value,{id:P.id,type:P.type,data:P.data,events:{...P.events,...M},selected:P.selected,resizing:P.resizing,dragging:ie.value,connectable:A.value,position:P.computedPosition,dimensions:P.dimensions,isValidTargetPos:P.isValidTargetPos,isValidSourcePos:P.isValidSourcePos,parent:P.parentNode,parentNodeId:P.parentNode,zIndex:P.computedPosition.z??X.value,targetPosition:P.targetPosition,sourcePosition:P.sourcePosition,label:P.label,dragHandle:P.dragHandle,onUpdateNodeInternals:le})]);function re(){const w=P.computedPosition,{computedPosition:m,position:N}=Fl(P,E.value?Es(w,k.value):w,s.error,f.value,Q.value);(P.computedPosition.x!==m.x||P.computedPosition.y!==m.y)&&(P.computedPosition={...P.computedPosition,...m}),(P.position.x!==N.x||P.position.y!==N.y)&&(P.position=N)}function le(){O.value&&u([{id:e.id,nodeElement:O.value,forceUpdate:!0}])}function ce(w){ie!=null&&ie.value||p.mouseEnter({event:w,node:P})}function ve(w){ie!=null&&ie.value||p.mouseMove({event:w,node:P})}function $e(w){ie!=null&&ie.value||p.mouseLeave({event:w,node:P})}function $(w){return p.contextMenu({event:w,node:P})}function T(w){return p.doubleClick({event:w,node:P})}function g(w){I.value&&(!i.value||!x.value||C.value>0)&&ja(P,o.value,l,a,r,!1,O.value),p.click({event:w,node:P})}function v(w){if(!(La(w)||S.value))if(lh.includes(w.key)&&I.value){const m=w.key==="Escape";ja(P,o.value,l,a,r,m,O.value)}else x.value&&P.selected&&bi[w.key]&&(w.preventDefault(),b.value=`Moved selected node ${w.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~P.position.x}, y: ${~~P.position.y}`,W({x:bi[w.key].x,y:bi[w.key].y},w.shiftKey))}}}),c1=u1;function d1(e={includeHiddenNodes:!1}){const{nodes:t}=Oe();return ue(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const f1={class:"vue-flow__nodes vue-flow__container"},h1={name:"Nodes",compatConfig:{MODE:3}},g1=Ie({...h1,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:i}=Oe(),r=d1(),o=Te();return be(r,s=>{s&&kt(()=>{i.nodesInitialized(t.value)})},{immediate:!0}),Wt(()=>{o.value=new ResizeObserver(s=>{const a=s.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));kt(()=>n(a))})}),xl(()=>{var s;return(s=o.value)==null?void 0:s.disconnect()}),(s,a)=>(se(),de("div",f1,[o.value?(se(!0),de(Ae,{key:0},Yn(te(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&zv(d,f))return d;const h=(se(),ze(te(c1),{id:l.id,key:l.id,"resize-observer":o.value},null,8,["id","resize-observer"]));return h.memo=f,h},a,0),128)):Le("",!0)]))}});function p1(){const{emits:e}=Oe();Wt(()=>{if(bh()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ge(Ve.MISSING_STYLES))}})}const v1=_e("div",{class:"vue-flow__edge-labels"},null,-1),m1={name:"VueFlow",compatConfig:{MODE:3}},y1=Ie({...m1,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const i=e,r=tf(),o=Ys(i,"modelValue",n),s=Ys(i,"nodes",n),a=Ys(i,"edges",n),l=Oe(i),u=Yw({modelValue:o,nodes:s,edges:a},i,l);return Jw(n,l.hooks),Kb(),p1(),Tn(ks,r),El(u),t(l),(c,d)=>(se(),de("div",{ref:te(l).vueFlowRef,class:"vue-flow"},[we(Ub,null,{default:pt(()=>[we(l1),v1,we(g1),Be(c.$slots,"zoom-pane")]),_:3}),Be(c.$slots,"default"),we(Gb)],512))}}),_1={name:"Panel",compatConfig:{MODE:3}},Mh=Ie({..._1,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Oe(),i=ue(()=>`${t.position}`.split("-"));return(r,o)=>(se(),de("div",{class:rt(["vue-flow__panel",i.value]),style:We({pointerEvents:te(n)?"none":"all"})},[Be(r.$slots,"default")],6))}});var on=(e=>(e.Lines="lines",e.Dots="dots",e))(on||{});const Rh=function({dimensions:e,size:t,color:n}){return Ne("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},Dh=function({radius:e,color:t}){return Ne("circle",{cx:e,cy:e,r:e,fill:t})};on.Lines+"",on.Dots+"";const w1={[on.Dots]:"#81818a",[on.Lines]:"#eee"},b1=["id","x","y","width","height","patternTransform"],S1={key:2,height:"100",width:"100"},$1=["fill"],x1=["x","y","fill"],E1={name:"Background",compatConfig:{MODE:3}},k1=Ie({...E1,props:{id:{},variant:{default:()=>on.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Oe(),i=ue(()=>{const s=n.value.zoom,[a,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*s||1,l*s||1],c=e.size*s,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],h=[d*s||1+u[0]/2,f*s||1+u[1]/2];return{scaledGap:u,offset:h,size:c}}),r=Se(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),o=Se(()=>e.color||e.patternColor||w1[e.variant||on.Dots]);return(s,a)=>(se(),de("svg",{class:"vue-flow__background vue-flow__container",style:We({height:`${s.height>100?100:s.height}%`,width:`${s.width>100?100:s.width}%`})},[Be(s.$slots,"pattern-container",{id:r.value},()=>[_e("pattern",{id:r.value,x:te(n).x%i.value.scaledGap[0],y:te(n).y%i.value.scaledGap[1],width:i.value.scaledGap[0],height:i.value.scaledGap[1],patternTransform:`translate(-${i.value.offset[0]},-${i.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Be(s.$slots,"pattern",{},()=>[s.variant===te(on).Lines?(se(),ze(te(Rh),{key:0,size:s.lineWidth,color:o.value,dimensions:i.value.scaledGap},null,8,["size","color","dimensions"])):s.variant===te(on).Dots?(se(),ze(te(Dh),{key:1,color:o.value,radius:i.value.size/2},null,8,["color","radius"])):Le("",!0),s.bgColor?(se(),de("svg",S1,[_e("rect",{width:"100%",height:"100%",fill:s.bgColor},null,8,$1)])):Le("",!0)])],8,b1)]),_e("rect",{x:s.x,y:s.y,width:"100%",height:"100%",fill:`url(#${r.value})`},null,8,x1),Be(s.$slots,"default",{id:r.value})],4))}}),T1={name:"ControlButton",compatConfig:{MODE:3}},C1=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},A1={type:"button",class:"vue-flow__controls-button"};function N1(e,t,n,i,r,o){return se(),de("button",A1,[Be(e.$slots,"default")])}const to=C1(T1,[["render",N1]]),I1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},P1=_e("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),O1=[P1];function M1(e,t){return se(),de("svg",I1,O1)}const R1={render:M1},D1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},B1=_e("path",{d:"M0 0h32v4.2H0z"},null,-1),L1=[B1];function z1(e,t){return se(),de("svg",D1,L1)}const F1={render:z1},j1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},U1=_e("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),H1=[U1];function V1(e,t){return se(),de("svg",j1,H1)}const W1={render:V1},q1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},G1=_e("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),K1=[G1];function Y1(e,t){return se(),de("svg",q1,K1)}const X1={render:Y1},J1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Z1=_e("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Q1=[Z1];function eS(e,t){return se(),de("svg",J1,Q1)}const tS={render:eS},nS={name:"Controls",compatConfig:{MODE:3}},iS=Ie({...nS,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>oh.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:i,elementsSelectable:r,setInteractive:o,zoomIn:s,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:d}=Oe(),f=Se(()=>n.value||i.value||r.value),h=Se(()=>u.value.zoom<=c.value),S=Se(()=>u.value.zoom>=d.value);function b(){s(),t("zoomIn")}function E(){a(),t("zoomOut")}function k(){l(e.fitViewParams),t("fitView")}function C(){o(!f.value),t("interactionChange",!f.value)}return(_,y)=>(se(),ze(te(Mh),{class:"vue-flow__controls",position:_.position},{default:pt(()=>[Be(_.$slots,"top"),_.showZoom?(se(),de(Ae,{key:0},[Be(_.$slots,"control-zoom-in",{},()=>[we(to,{class:"vue-flow__controls-zoomin",disabled:S.value,onClick:b},{default:pt(()=>[Be(_.$slots,"icon-zoom-in",{},()=>[(se(),ze(Ln(te(R1))))])]),_:3},8,["disabled"])]),Be(_.$slots,"control-zoom-out",{},()=>[we(to,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:E},{default:pt(()=>[Be(_.$slots,"icon-zoom-out",{},()=>[(se(),ze(Ln(te(F1))))])]),_:3},8,["disabled"])])],64)):Le("",!0),_.showFitView?Be(_.$slots,"control-fit-view",{key:1},()=>[we(to,{class:"vue-flow__controls-fitview",onClick:k},{default:pt(()=>[Be(_.$slots,"icon-fit-view",{},()=>[(se(),ze(Ln(te(W1))))])]),_:3})]):Le("",!0),_.showInteractive?Be(_.$slots,"control-interactive",{key:2},()=>[_.showInteractive?(se(),ze(to,{key:0,class:"vue-flow__controls-interactive",onClick:C},{default:pt(()=>[f.value?Be(_.$slots,"icon-unlock",{key:0},()=>[(se(),ze(Ln(te(tS))))]):Le("",!0),f.value?Le("",!0):Be(_.$slots,"icon-lock",{key:1},()=>[(se(),ze(Ln(te(X1))))])]),_:3})):Le("",!0)]):Le("",!0),Be(_.$slots,"default")]),_:3},8,["position"]))}});var rS={value:()=>{}};function Vl(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new $o(n)}function $o(e){this._=e}function oS(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}$o.prototype=Vl.prototype={constructor:$o,on:function(e,t){var n=this._,i=oS(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=sS(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Tc(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Tc(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $o(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function sS(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Tc(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=rS,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ha="http://www.w3.org/1999/xhtml";const Cc={svg:"http://www.w3.org/2000/svg",xhtml:Ha,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Is(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Cc.hasOwnProperty(t)?{space:Cc[t],local:e}:e}function aS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ha&&t.documentElement.namespaceURI===Ha?t.createElement(e):t.createElementNS(n,e)}}function lS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bh(e){var t=Is(e);return(t.local?lS:aS)(t)}function uS(){}function Wl(e){return e==null?uS:function(){return this.querySelector(e)}}function cS(e){typeof e!="function"&&(e=Wl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new ht(i,this._parents)}function dS(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fS(){return[]}function Lh(e){return e==null?fS:function(){return this.querySelectorAll(e)}}function hS(e){return function(){return dS(e.apply(this,arguments))}}function gS(e){typeof e=="function"?e=hS(e):e=Lh(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),r.push(l));return new ht(i,r)}function zh(e){return function(){return this.matches(e)}}function Fh(e){return function(t){return t.matches(e)}}var pS=Array.prototype.find;function vS(e){return function(){return pS.call(this.children,e)}}function mS(){return this.firstElementChild}function yS(e){return this.select(e==null?mS:vS(typeof e=="function"?e:Fh(e)))}var _S=Array.prototype.filter;function wS(){return Array.from(this.children)}function bS(e){return function(){return _S.call(this.children,e)}}function SS(e){return this.selectAll(e==null?wS:bS(typeof e=="function"?e:Fh(e)))}function $S(e){typeof e!="function"&&(e=zh(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new ht(i,this._parents)}function jh(e){return new Array(e.length)}function xS(){return new ht(this._enter||this._groups.map(jh),this._parents)}function Jo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jo.prototype={constructor:Jo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ES(e){return function(){return e}}function kS(e,t,n,i,r,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new Jo(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function TS(e,t,n,i,r,o,s){var a,l,u=new Map,c=t.length,d=o.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(l=u.get(h))?(i[a]=l,l.__data__=o[a],u.delete(h)):n[a]=new Jo(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function CS(e){return e.__data__}function AS(e,t){if(!arguments.length)return Array.from(this,CS);var n=t?TS:kS,i=this._parents,r=this._groups;typeof e!="function"&&(e=ES(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],d=r[u],f=d.length,h=NS(e.call(c,c&&c.__data__,u,i)),S=h.length,b=a[u]=new Array(S),E=s[u]=new Array(S),k=l[u]=new Array(f);n(c,d,b,E,k,h,t);for(var C=0,_=0,y,D;C<S;++C)if(y=b[C]){for(C>=_&&(_=C+1);!(D=E[_])&&++_<S;);y._next=D||null}}return s=new ht(s,i),s._enter=a,s._exit=l,s}function NS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function IS(){return new ht(this._exit||this._groups.map(jh),this._parents)}function PS(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function OS(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=i[l],d=u.length,f=a[l]=new Array(d),h,S=0;S<d;++S)(h=u[S]||c[S])&&(f[S]=h);for(;l<r;++l)a[l]=n[l];return new ht(a,this._parents)}function MS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function RS(e){e||(e=DS);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new ht(r,this._parents).order()}function DS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function BS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function LS(){return Array.from(this)}function zS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function FS(){let e=0;for(const t of this)++e;return e}function jS(){return!this.node()}function US(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function HS(e){return function(){this.removeAttribute(e)}}function VS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WS(e,t){return function(){this.setAttribute(e,t)}}function qS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function GS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function KS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function YS(e,t){var n=Is(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?VS:HS:typeof t=="function"?n.local?KS:GS:n.local?qS:WS)(n,t))}function Uh(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function XS(e){return function(){this.style.removeProperty(e)}}function JS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ZS(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function QS(e,t,n){return arguments.length>1?this.each((t==null?XS:typeof t=="function"?ZS:JS)(e,t,n??"")):Ni(this.node(),e)}function Ni(e,t){return e.style.getPropertyValue(t)||Uh(e).getComputedStyle(e,null).getPropertyValue(t)}function e$(e){return function(){delete this[e]}}function t$(e,t){return function(){this[e]=t}}function n$(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function i$(e,t){return arguments.length>1?this.each((t==null?e$:typeof t=="function"?n$:t$)(e,t)):this.node()[e]}function Hh(e){return e.trim().split(/^|\s+/)}function ql(e){return e.classList||new Vh(e)}function Vh(e){this._node=e,this._names=Hh(e.getAttribute("class")||"")}Vh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wh(e,t){for(var n=ql(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function qh(e,t){for(var n=ql(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function r$(e){return function(){Wh(this,e)}}function o$(e){return function(){qh(this,e)}}function s$(e,t){return function(){(t.apply(this,arguments)?Wh:qh)(this,e)}}function a$(e,t){var n=Hh(e+"");if(arguments.length<2){for(var i=ql(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?s$:t?r$:o$)(n,t))}function l$(){this.textContent=""}function u$(e){return function(){this.textContent=e}}function c$(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function d$(e){return arguments.length?this.each(e==null?l$:(typeof e=="function"?c$:u$)(e)):this.node().textContent}function f$(){this.innerHTML=""}function h$(e){return function(){this.innerHTML=e}}function g$(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function p$(e){return arguments.length?this.each(e==null?f$:(typeof e=="function"?g$:h$)(e)):this.node().innerHTML}function v$(){this.nextSibling&&this.parentNode.appendChild(this)}function m$(){return this.each(v$)}function y$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _$(){return this.each(y$)}function w$(e){var t=typeof e=="function"?e:Bh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function b$(){return null}function S$(e,t){var n=typeof e=="function"?e:Bh(e),i=t==null?b$:typeof t=="function"?t:Wl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function $$(){var e=this.parentNode;e&&e.removeChild(this)}function x$(){return this.each($$)}function E$(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function k$(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function T$(e){return this.select(e?k$:E$)}function C$(e){return arguments.length?this.property("__data__",e):this.node().__data__}function A$(e){return function(t){e.call(this,t,this.__data__)}}function N$(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function I$(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function P$(e,t,n){return function(){var i=this.__on,r,o=A$(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function O$(e,t,n){var i=N$(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?P$:I$,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function Gh(e,t,n){var i=Uh(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function M$(e,t){return function(){return Gh(this,e,t)}}function R$(e,t){return function(){return Gh(this,e,t.apply(this,arguments))}}function D$(e,t){return this.each((typeof t=="function"?R$:M$)(e,t))}function*B$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Kh=[null];function ht(e,t){this._groups=e,this._parents=t}function Lr(){return new ht([[document.documentElement]],Kh)}function L$(){return this}ht.prototype=Lr.prototype={constructor:ht,select:cS,selectAll:gS,selectChild:yS,selectChildren:SS,filter:$S,data:AS,enter:xS,exit:IS,join:PS,merge:OS,selection:L$,order:MS,sort:RS,call:BS,nodes:LS,node:zS,size:FS,empty:jS,each:US,attr:YS,style:QS,property:i$,classed:a$,text:d$,html:p$,raise:m$,lower:_$,append:w$,insert:S$,remove:x$,clone:T$,datum:C$,on:O$,dispatch:D$,[Symbol.iterator]:B$};function xn(e){return typeof e=="string"?new ht([[document.querySelector(e)]],[document.documentElement]):new ht([[e]],Kh)}function z$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function yn(e,t){if(e=z$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Va={capture:!0,passive:!1};function Wa(e){e.preventDefault(),e.stopImmediatePropagation()}function F$(e){var t=e.document.documentElement,n=xn(e).on("dragstart.drag",Wa,Va);"onselectstart"in t?n.on("selectstart.drag",Wa,Va):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function j$(e,t){var n=e.document.documentElement,i=xn(e).on("dragstart.drag",null);t&&(i.on("click.drag",Wa,Va),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Gl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yh(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function zr(){}var Er=.7,Zo=1/Er,Si="\\s*([+-]?\\d+)\\s*",kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",U$=/^#([0-9a-f]{3,8})$/,H$=new RegExp(`^rgb\\(${Si},${Si},${Si}\\)$`),V$=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),W$=new RegExp(`^rgba\\(${Si},${Si},${Si},${kr}\\)$`),q$=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${kr}\\)$`),G$=new RegExp(`^hsl\\(${kr},${Ht},${Ht}\\)$`),K$=new RegExp(`^hsla\\(${kr},${Ht},${Ht},${kr}\\)$`),Ac={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gl(zr,Tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nc,formatHex:Nc,formatHex8:Y$,formatHsl:X$,formatRgb:Ic,toString:Ic});function Nc(){return this.rgb().formatHex()}function Y$(){return this.rgb().formatHex8()}function X$(){return Xh(this).formatHsl()}function Ic(){return this.rgb().formatRgb()}function Tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=U$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Pc(t):n===3?new ut(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?no(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?no(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=H$.exec(e))?new ut(t[1],t[2],t[3],1):(t=V$.exec(e))?new ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W$.exec(e))?no(t[1],t[2],t[3],t[4]):(t=q$.exec(e))?no(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=G$.exec(e))?Rc(t[1],t[2]/100,t[3]/100,1):(t=K$.exec(e))?Rc(t[1],t[2]/100,t[3]/100,t[4]):Ac.hasOwnProperty(e)?Pc(Ac[e]):e==="transparent"?new ut(NaN,NaN,NaN,0):null}function Pc(e){return new ut(e>>16&255,e>>8&255,e&255,1)}function no(e,t,n,i){return i<=0&&(e=t=n=NaN),new ut(e,t,n,i)}function J$(e){return e instanceof zr||(e=Tr(e)),e?(e=e.rgb(),new ut(e.r,e.g,e.b,e.opacity)):new ut}function qa(e,t,n,i){return arguments.length===1?J$(e):new ut(e,t,n,i??1)}function ut(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Gl(ut,qa,Yh(zr,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Er:Math.pow(Er,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(Kn(this.r),Kn(this.g),Kn(this.b),Qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oc,formatHex:Oc,formatHex8:Z$,formatRgb:Mc,toString:Mc}));function Oc(){return`#${Vn(this.r)}${Vn(this.g)}${Vn(this.b)}`}function Z$(){return`#${Vn(this.r)}${Vn(this.g)}${Vn(this.b)}${Vn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mc(){const e=Qo(this.opacity);return`${e===1?"rgb(":"rgba("}${Kn(this.r)}, ${Kn(this.g)}, ${Kn(this.b)}${e===1?")":`, ${e})`}`}function Qo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vn(e){return e=Kn(e),(e<16?"0":"")+e.toString(16)}function Rc(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,n,i)}function Xh(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof zr||(e=Tr(e)),!e)return new xt;if(e instanceof xt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new xt(s,a,l,e.opacity)}function Q$(e,t,n,i){return arguments.length===1?Xh(e):new xt(e,t,n,i??1)}function xt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Gl(xt,Q$,Yh(zr,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Er:Math.pow(Er,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new ut(sa(e>=240?e-240:e+120,r,i),sa(e,r,i),sa(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new xt(Dc(this.h),io(this.s),io(this.l),Qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qo(this.opacity);return`${e===1?"hsl(":"hsla("}${Dc(this.h)}, ${io(this.s)*100}%, ${io(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dc(e){return e=(e||0)%360,e<0?e+360:e}function io(e){return Math.max(0,Math.min(1,e||0))}function sa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Jh=e=>()=>e;function ex(e,t){return function(n){return e+n*t}}function tx(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function nx(e){return(e=+e)==1?Zh:function(t,n){return n-t?tx(t,n,e):Jh(isNaN(t)?n:t)}}function Zh(e,t){var n=t-e;return n?ex(e,n):Jh(isNaN(e)?t:e)}const Bc=function e(t){var n=nx(t);function i(r,o){var s=n((r=qa(r)).r,(o=qa(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=Zh(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function $n(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aa=new RegExp(Ga.source,"g");function ix(e){return function(){return e}}function rx(e){return function(t){return e(t)+""}}function ox(e,t){var n=Ga.lastIndex=aa.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(i=Ga.exec(e))&&(r=aa.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:$n(i,r)})),n=aa.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?rx(l[0].x):ix(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Lc=180/Math.PI,Ka={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qh(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Lc,skewX:Math.atan(l)*Lc,scaleX:s,scaleY:a}}var ro;function sx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ka:Qh(t.a,t.b,t.c,t.d,t.e,t.f)}function ax(e){return e==null||(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",e),!(e=ro.transform.baseVal.consolidate()))?Ka:(e=e.matrix,Qh(e.a,e.b,e.c,e.d,e.e,e.f))}function eg(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,h,S){if(u!==d||c!==f){var b=h.push("translate(",null,t,null,n);S.push({i:b-4,x:$n(u,d)},{i:b-2,x:$n(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:$n(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:$n(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,f,h,S){if(u!==d||c!==f){var b=h.push(r(h)+"scale(",null,",",null,")");S.push({i:b-4,x:$n(u,d)},{i:b-2,x:$n(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var S=-1,b=f.length,E;++S<b;)d[(E=f[S]).i]=E.x(h);return d.join("")}}}var lx=eg(sx,"px, ","px)","deg)"),ux=eg(ax,", ",")",")"),cx=1e-12;function zc(e){return((e=Math.exp(e))+1/e)/2}function dx(e){return((e=Math.exp(e))-1/e)/2}function fx(e){return((e=Math.exp(2*e))-1)/(e+1)}const hx=function e(t,n,i){function r(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],d=s[1],f=s[2],h=c-a,S=d-l,b=h*h+S*S,E,k;if(b<cx)k=Math.log(f/u)/t,E=function(z){return[a+z*h,l+z*S,u*Math.exp(t*z*k)]};else{var C=Math.sqrt(b),_=(f*f-u*u+i*b)/(2*u*n*C),y=(f*f-u*u-i*b)/(2*f*n*C),D=Math.log(Math.sqrt(_*_+1)-_),U=Math.log(Math.sqrt(y*y+1)-y);k=(U-D)/t,E=function(z){var O=z*k,V=zc(D),H=u/(n*C)*(V*fx(t*O+D)-dx(D));return[a+H*h,l+H*S,u*V/zc(t*O+D)]}}return E.duration=k*1e3*t/Math.SQRT2,E}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},r}(Math.SQRT2,2,4);var Ii=0,Ki=0,Fi=0,tg=1e3,es,Yi,ts=0,Zn=0,Ps=0,Cr=typeof performance=="object"&&performance.now?performance:Date,ng=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kl(){return Zn||(ng(gx),Zn=Cr.now()+Ps)}function gx(){Zn=0}function ns(){this._call=this._time=this._next=null}ns.prototype=ig.prototype={constructor:ns,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Kl():+n)+(t==null?0:+t),!this._next&&Yi!==this&&(Yi?Yi._next=this:es=this,Yi=this),this._call=e,this._time=n,Ya()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ya())}};function ig(e,t,n){var i=new ns;return i.restart(e,t,n),i}function px(){Kl(),++Ii;for(var e=es,t;e;)(t=Zn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ii}function Fc(){Zn=(ts=Cr.now())+Ps,Ii=Ki=0;try{px()}finally{Ii=0,mx(),Zn=0}}function vx(){var e=Cr.now(),t=e-ts;t>tg&&(Ps-=t,ts=e)}function mx(){for(var e,t=es,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:es=n);Yi=e,Ya(i)}function Ya(e){if(!Ii){Ki&&(Ki=clearTimeout(Ki));var t=e-Zn;t>24?(e<1/0&&(Ki=setTimeout(Fc,e-Cr.now()-Ps)),Fi&&(Fi=clearInterval(Fi))):(Fi||(ts=Cr.now(),Fi=setInterval(vx,tg)),Ii=1,ng(Fc))}}function jc(e,t,n){var i=new ns;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var yx=Vl("start","end","cancel","interrupt"),_x=[],rg=0,Uc=1,Xa=2,xo=3,Hc=4,Ja=5,Eo=6;function Os(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;wx(e,n,{name:t,index:i,group:r,on:yx,tween:_x,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:rg})}function Yl(e,t){var n=At(e,t);if(n.state>rg)throw new Error("too late; already scheduled");return n}function Gt(e,t){var n=At(e,t);if(n.state>xo)throw new Error("too late; already running");return n}function At(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wx(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=ig(o,0,n.time);function o(u){n.state=Uc,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==Uc)return l();for(c in i)if(h=i[c],h.name===n.name){if(h.state===xo)return jc(s);h.state===Hc?(h.state=Eo,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Eo,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(jc(function(){n.state===xo&&(n.state=Hc,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Xa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xa){for(n.state=xo,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Ja,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Ja&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Eo,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function ko(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>Xa&&i.state<Ja,i.state=Eo,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function bx(e){return this.each(function(){ko(this,e)})}function Sx(e,t){var n,i;return function(){var r=Gt(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function $x(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Gt(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function xx(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=At(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?Sx:$x)(n,e,t))}function Xl(e,t,n){var i=e._id;return e.each(function(){var r=Gt(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return At(r,i).value[t]}}function og(e,t){var n;return(typeof t=="number"?$n:t instanceof Tr?Bc:(n=Tr(t))?(t=n,Bc):ox)(e,t)}function Ex(e){return function(){this.removeAttribute(e)}}function kx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tx(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function Cx(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function Ax(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function Nx(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function Ix(e,t){var n=Is(e),i=n==="transform"?ux:og;return this.attrTween(e,typeof t=="function"?(n.local?Nx:Ax)(n,i,Xl(this,"attr."+e,t)):t==null?(n.local?kx:Ex)(n):(n.local?Cx:Tx)(n,i,t))}function Px(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ox(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Mx(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Ox(e,o)),n}return r._value=t,r}function Rx(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Px(e,o)),n}return r._value=t,r}function Dx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Is(e);return this.tween(n,(i.local?Mx:Rx)(i,t))}function Bx(e,t){return function(){Yl(this,e).delay=+t.apply(this,arguments)}}function Lx(e,t){return t=+t,function(){Yl(this,e).delay=t}}function zx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bx:Lx)(t,e)):At(this.node(),t).delay}function Fx(e,t){return function(){Gt(this,e).duration=+t.apply(this,arguments)}}function jx(e,t){return t=+t,function(){Gt(this,e).duration=t}}function Ux(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fx:jx)(t,e)):At(this.node(),t).duration}function Hx(e,t){if(typeof t!="function")throw new Error;return function(){Gt(this,e).ease=t}}function Vx(e){var t=this._id;return arguments.length?this.each(Hx(t,e)):At(this.node(),t).ease}function Wx(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gt(this,e).ease=n}}function qx(e){if(typeof e!="function")throw new Error;return this.each(Wx(this._id,e))}function Gx(e){typeof e!="function"&&(e=zh(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new hn(i,this._parents,this._name,this._id)}function Kx(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<i;++a)s[a]=t[a];return new hn(s,this._parents,this._name,this._id)}function Yx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Xx(e,t,n){var i,r,o=Yx(t)?Yl:Gt;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function Jx(e,t){var n=this._id;return arguments.length<2?At(this.node(),n).on.on(e):this.each(Xx(n,e,t))}function Zx(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Qx(){return this.on("end.remove",Zx(this._id))}function eE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wl(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,u=o[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Os(u[f],t,n,f,u,At(c,n)));return new hn(o,this._parents,t,n)}function tE(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lh(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,S=At(c,n),b=0,E=f.length;b<E;++b)(h=f[b])&&Os(h,t,n,b,f,S);o.push(f),s.push(c)}return new hn(o,s,t,n)}var nE=Lr.prototype.constructor;function iE(){return new nE(this._groups,this._parents)}function rE(e,t){var n,i,r;return function(){var o=Ni(this,e),s=(this.style.removeProperty(e),Ni(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function sg(e){return function(){this.style.removeProperty(e)}}function oE(e,t,n){var i,r=n+"",o;return function(){var s=Ni(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function sE(e,t,n){var i,r,o;return function(){var s=Ni(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ni(this,e))),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function aE(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var l=Gt(this,e),u=l.on,c=l.value[o]==null?a||(a=sg(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(s,r=c),l.on=i}}function lE(e,t,n){var i=(e+="")=="transform"?lx:og;return t==null?this.styleTween(e,rE(e,i)).on("end.style."+e,sg(e)):typeof t=="function"?this.styleTween(e,sE(e,i,Xl(this,"style."+e,t))).each(aE(this._id,e)):this.styleTween(e,oE(e,i,t),n).on("end.style."+e,null)}function uE(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function cE(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&uE(e,s,n)),i}return o._value=t,o}function dE(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,cE(e,t,n??""))}function fE(e){return function(){this.textContent=e}}function hE(e){return function(){var t=e(this);this.textContent=t??""}}function gE(e){return this.tween("text",typeof e=="function"?hE(Xl(this,"text",e)):fE(e==null?"":e+""))}function pE(e){return function(t){this.textContent=e.call(this,t)}}function vE(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&pE(r)),t}return i._value=e,i}function mE(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vE(e))}function yE(){for(var e=this._name,t=this._id,n=ag(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=At(l,t);Os(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new hn(i,this._parents,e,n)}function _E(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var u=Gt(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&o()})}var wE=0;function hn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ag(){return++wE}var Xt=Lr.prototype;hn.prototype={constructor:hn,select:eE,selectAll:tE,selectChild:Xt.selectChild,selectChildren:Xt.selectChildren,filter:Gx,merge:Kx,selection:iE,transition:yE,call:Xt.call,nodes:Xt.nodes,node:Xt.node,size:Xt.size,empty:Xt.empty,each:Xt.each,on:Jx,attr:Ix,attrTween:Dx,style:lE,styleTween:dE,text:gE,textTween:mE,remove:Qx,tween:xx,delay:zx,duration:Ux,ease:Vx,easeVarying:qx,end:_E,[Symbol.iterator]:Xt[Symbol.iterator]};function bE(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SE={time:null,delay:0,duration:250,ease:bE};function $E(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xE(e){var t,n;e instanceof hn?(t=e._id,e=e._name):(t=ag(),(n=SE).time=Kl(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Os(l,e,t,u,s,n||$E(l,t));return new hn(i,this._parents,e,t)}Lr.prototype.interrupt=bx;Lr.prototype.transition=xE;const oo=e=>()=>e;function EE(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function sn(e,t,n){this.k=e,this.x=t,this.y=n}sn.prototype={constructor:sn,scale:function(e){return e===1?this:new sn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new sn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Jl=new sn(1,0,0);sn.prototype;function la(e){e.stopImmediatePropagation()}function ji(e){e.preventDefault(),e.stopImmediatePropagation()}function kE(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function TE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vc(){return this.__zoom||Jl}function CE(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function AE(){return navigator.maxTouchPoints||"ontouchstart"in this}function NE(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function IE(){var e=kE,t=TE,n=NE,i=CE,r=AE,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=hx,u=Vl("start","zoom","end"),c,d,f,h=500,S=150,b=0,E=10;function k(p){p.property("__zoom",Vc).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",W).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(p,M,x,I){var A=p.selection?p.selection():p;A.property("__zoom",Vc),p!==A?D(p,M,x,I):A.interrupt().each(function(){U(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},k.scaleBy=function(p,M,x,I){k.scaleTo(p,function(){var A=this.__zoom.k,L=typeof M=="function"?M.apply(this,arguments):M;return A*L},x,I)},k.scaleTo=function(p,M,x,I){k.transform(p,function(){var A=t.apply(this,arguments),L=this.__zoom,R=x==null?y(A):typeof x=="function"?x.apply(this,arguments):x,q=L.invert(R),J=typeof M=="function"?M.apply(this,arguments):M;return n(_(C(L,J),R,q),A,s)},x,I)},k.translateBy=function(p,M,x,I){k.transform(p,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),s)},null,I)},k.translateTo=function(p,M,x,I,A){k.transform(p,function(){var L=t.apply(this,arguments),R=this.__zoom,q=I==null?y(L):typeof I=="function"?I.apply(this,arguments):I;return n(Jl.translate(q[0],q[1]).scale(R.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof x=="function"?-x.apply(this,arguments):-x),L,s)},I,A)};function C(p,M){return M=Math.max(o[0],Math.min(o[1],M)),M===p.k?p:new sn(M,p.x,p.y)}function _(p,M,x){var I=M[0]-x[0]*p.k,A=M[1]-x[1]*p.k;return I===p.x&&A===p.y?p:new sn(p.k,I,A)}function y(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function D(p,M,x,I){p.on("start.zoom",function(){U(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(I).end()}).tween("zoom",function(){var A=this,L=arguments,R=U(A,L).event(I),q=t.apply(A,L),J=x==null?y(q):typeof x=="function"?x.apply(A,L):x,ie=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Y=A.__zoom,ee=typeof M=="function"?M.apply(A,L):M,X=l(Y.invert(J).concat(ie/Y.k),ee.invert(J).concat(ie/ee.k));return function(re){if(re===1)re=ee;else{var le=X(re),ce=ie/le[2];re=new sn(ce,J[0]-le[0]*ce,J[1]-le[1]*ce)}R.zoom(null,re)}})}function U(p,M,x){return!x&&p.__zooming||new z(p,M)}function z(p,M){this.that=p,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,M),this.taps=0}z.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,M){return this.mouse&&p!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var M=xn(this.that).datum();u.call(p,this.that,new EE(p,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:u}),M)}};function O(p,...M){if(!e.apply(this,arguments))return;var x=U(this,M).event(p),I=this.__zoom,A=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,i.apply(this,arguments)))),L=yn(p);if(x.wheel)(x.mouse[0][0]!==L[0]||x.mouse[0][1]!==L[1])&&(x.mouse[1]=I.invert(x.mouse[0]=L)),clearTimeout(x.wheel);else{if(I.k===A)return;x.mouse=[L,I.invert(L)],ko(this),x.start()}ji(p),x.wheel=setTimeout(R,S),x.zoom("mouse",n(_(C(I,A),x.mouse[0],x.mouse[1]),x.extent,s));function R(){x.wheel=null,x.end()}}function V(p,...M){if(f||!e.apply(this,arguments))return;var x=p.currentTarget,I=U(this,M,!0).event(p),A=xn(p.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",ie,!0),L=yn(p,x),R=p.clientX,q=p.clientY;F$(p.view),la(p),I.mouse=[L,this.__zoom.invert(L)],ko(this),I.start();function J(Y){if(ji(Y),!I.moved){var ee=Y.clientX-R,X=Y.clientY-q;I.moved=ee*ee+X*X>b}I.event(Y).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=yn(Y,x),I.mouse[1]),I.extent,s))}function ie(Y){A.on("mousemove.zoom mouseup.zoom",null),j$(Y.view,I.moved),ji(Y),I.event(Y).end()}}function H(p,...M){if(e.apply(this,arguments)){var x=this.__zoom,I=yn(p.changedTouches?p.changedTouches[0]:p,this),A=x.invert(I),L=x.k*(p.shiftKey?.5:2),R=n(_(C(x,L),I,A),t.apply(this,M),s);ji(p),a>0?xn(this).transition().duration(a).call(D,R,I,p):xn(this).call(k.transform,R,I,p)}}function W(p,...M){if(e.apply(this,arguments)){var x=p.touches,I=x.length,A=U(this,M,p.changedTouches.length===I).event(p),L,R,q,J;for(la(p),R=0;R<I;++R)q=x[R],J=yn(q,this),J=[J,this.__zoom.invert(J),q.identifier],A.touch0?!A.touch1&&A.touch0[2]!==J[2]&&(A.touch1=J,A.taps=0):(A.touch0=J,L=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),L&&(A.taps<2&&(d=J[0],c=setTimeout(function(){c=null},h)),ko(this),A.start())}}function P(p,...M){if(this.__zooming){var x=U(this,M).event(p),I=p.changedTouches,A=I.length,L,R,q,J;for(ji(p),L=0;L<A;++L)R=I[L],q=yn(R,this),x.touch0&&x.touch0[2]===R.identifier?x.touch0[0]=q:x.touch1&&x.touch1[2]===R.identifier&&(x.touch1[0]=q);if(R=x.that.__zoom,x.touch1){var ie=x.touch0[0],Y=x.touch0[1],ee=x.touch1[0],X=x.touch1[1],re=(re=ee[0]-ie[0])*re+(re=ee[1]-ie[1])*re,le=(le=X[0]-Y[0])*le+(le=X[1]-Y[1])*le;R=C(R,Math.sqrt(re/le)),q=[(ie[0]+ee[0])/2,(ie[1]+ee[1])/2],J=[(Y[0]+X[0])/2,(Y[1]+X[1])/2]}else if(x.touch0)q=x.touch0[0],J=x.touch0[1];else return;x.zoom("touch",n(_(R,q,J),x.extent,s))}}function Q(p,...M){if(this.__zooming){var x=U(this,M).event(p),I=p.changedTouches,A=I.length,L,R;for(la(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),L=0;L<A;++L)R=I[L],x.touch0&&x.touch0[2]===R.identifier?delete x.touch0:x.touch1&&x.touch1[2]===R.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(R=yn(R,this),Math.hypot(d[0]-R[0],d[1]-R[1])<E)){var q=xn(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return k.wheelDelta=function(p){return arguments.length?(i=typeof p=="function"?p:oo(+p),k):i},k.filter=function(p){return arguments.length?(e=typeof p=="function"?p:oo(!!p),k):e},k.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:oo(!!p),k):r},k.extent=function(p){return arguments.length?(t=typeof p=="function"?p:oo([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),k):t},k.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],k):[o[0],o[1]]},k.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],k):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},k.constrain=function(p){return arguments.length?(n=p,k):n},k.duration=function(p){return arguments.length?(a=+p,k):a},k.interpolate=function(p){return arguments.length?(l=p,k):l},k.on=function(){var p=u.on.apply(u,arguments);return p===u?k:p},k.clickDistance=function(p){return arguments.length?(b=(p=+p)*p,k):Math.sqrt(b)},k.tapDistance=function(p){return arguments.length?(E=+p,k):E},k}const lg=Symbol("MiniMapSlots"),PE=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],OE={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},ME=Ie({...OE,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,i=mt(lg),r=kl(),o=Se(()=>r.style??{});function s(d){t("click",d)}function a(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(se(),de(Ae,{key:0},[te(i)[`node-${n.type}`]?(se(),ze(Ln(te(i)[`node-${n.type}`]),Qg(gr({key:0},{...n,...d.$attrs})),null,16)):(se(),de("rect",gr({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||o.value.background||o.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:s,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,PE))],64)):Le("",!0)}}),RE=["width","height","viewBox","aria-labelledby"],DE=["id"],BE=["d","fill","stroke","stroke-width"],LE={name:"MiniMap",compatConfig:{MODE:3}},zE=Ie({...LE,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=tf(),i=kl(),r=200,o=150,{id:s,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:h,getNodesInitialized:S}=Oe(),b=Te();Tn(lg,n);const E=Se(()=>{var A;return e.width??((A=i.style)==null?void 0:A.width)??r}),k=Se(()=>{var A;return e.height??((A=i.style)==null?void 0:A.height)??o}),C=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",_=ue(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),y=ue(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),D=ue(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),U=ue(()=>zl(S.value.filter(A=>!A.hidden))),z=ue(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),O=ue(()=>S.value&&S.value.length?yw(U.value,z.value):z.value),V=ue(()=>{const A=O.value.width/E.value,L=O.value.height/k.value;return Math.max(A,L)}),H=ue(()=>{const A=V.value*E.value,L=V.value*k.value,R=e.offsetScale*V.value;return{offset:R,x:O.value.x-(A-O.value.width)/2-R,y:O.value.y-(L-O.value.height)/2-R,width:A+R*2,height:L+R*2}}),W=ue(()=>!H.value.x||!H.value.y?"":`
    M${H.value.x-H.value.offset},${H.value.y-H.value.offset}
    h${H.value.width+H.value.offset*2}
    v${H.value.height+H.value.offset*2}
    h${-H.value.width-H.value.offset*2}z
    M${z.value.x+e.maskBorderRadius},${z.value.y}
    h${z.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${z.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(z.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(z.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);mf(A=>{if(b.value){const L=xn(b.value),R=ie=>{if(ie.sourceEvent.type!=="wheel"||!f.value||!h.value)return;const Y=ie.sourceEvent.ctrlKey&&xr()?10:1,ee=-ie.sourceEvent.deltaY*(ie.sourceEvent.deltaMode===1?.05:ie.sourceEvent.deltaMode?1:.002)*e.zoomStep,X=l.value.zoom*2**(ee*Y);h.value.scaleTo(f.value,X)},q=ie=>{if(ie.sourceEvent.type!=="mousemove"||!f.value||!h.value)return;const Y=V.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),ee={x:l.value.x-ie.sourceEvent.movementX*Y,y:l.value.y-ie.sourceEvent.movementY*Y},X=[[0,0],[c.value.width,c.value.height]],re=Jl.translate(ee.x,ee.y).scale(l.value.zoom),le=h.value.constrain()(re,X,u.value);h.value.transform(f.value,le)},J=IE().wheelDelta(ie=>za(ie)*(e.zoomStep/10)).on("zoom",e.pannable?q:()=>{}).on("zoom.wheel",e.zoomable?R:()=>{});L.call(J),A(()=>{L.on("zoom",null)})}},{flush:"post"});function P(A){const[L,R]=yn(A);t("click",{event:A,position:{x:L,y:R}})}function Q(A,L){const R={event:A,node:L,connectedEdges:Fn([L],a.value)};d.miniMapNodeClick(R),t("nodeClick",R)}function p(A,L){const R={event:A,node:L,connectedEdges:Fn([L],a.value)};d.miniMapNodeDoubleClick(R),t("nodeDblclick",R)}function M(A,L){const R={event:A,node:L,connectedEdges:Fn([L],a.value)};d.miniMapNodeMouseEnter(R),t("nodeMouseenter",R)}function x(A,L){const R={event:A,node:L,connectedEdges:Fn([L],a.value)};d.miniMapNodeMouseMove(R),t("nodeMousemove",R)}function I(A,L){const R={event:A,node:L,connectedEdges:Fn([L],a.value)};d.miniMapNodeMouseLeave(R),t("nodeMouseleave",R)}return(A,L)=>(se(),ze(te(Mh),{position:A.position,class:rt(["vue-flow__minimap",{pannable:A.pannable,zoomable:A.zoomable}])},{default:pt(()=>[(se(),de("svg",{ref_key:"el",ref:b,width:E.value,height:k.value,viewBox:[H.value.x,H.value.y,H.value.width,H.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${te(s)}`,onClick:P},[A.ariaLabel?(se(),de("title",{key:0,id:`vue-flow__minimap-${te(s)}`},nn(A.ariaLabel),9,DE)):Le("",!0),(se(!0),de(Ae,null,Yn(te(S),R=>(se(),ze(ME,{id:R.id,key:R.id,f:"",position:R.computedPosition,dimensions:R.dimensions,selected:R.selected,dragging:R.dragging,style:We(R.style),class:rt(D.value(R)),color:_.value(R),"border-radius":A.nodeBorderRadius,"stroke-color":y.value(R),"stroke-width":A.nodeStrokeWidth,"shape-rendering":te(C),type:R.type,hidden:R.hidden,onClick:q=>Q(q,R),onDblclick:q=>p(q,R),onMouseenter:q=>M(q,R),onMousemove:q=>x(q,R),onMouseleave:q=>I(q,R)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),_e("path",{class:"vue-flow__minimap-mask",d:W.value,fill:A.maskColor,stroke:A.maskStrokeColor,"stroke-width":A.maskStrokeWidth,"fill-rule":"evenodd"},null,8,BE)],8,RE))]),_:1},8,["position","class"]))}});var Za="http://www.w3.org/1999/xhtml";const Wc={svg:"http://www.w3.org/2000/svg",xhtml:Za,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ug(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Wc.hasOwnProperty(t)?{space:Wc[t],local:e}:e}function FE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Za&&t.documentElement.namespaceURI===Za?t.createElement(e):t.createElementNS(n,e)}}function jE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cg(e){var t=ug(e);return(t.local?jE:FE)(t)}function UE(){}function dg(e){return e==null?UE:function(){return this.querySelector(e)}}function HE(e){typeof e!="function"&&(e=dg(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new _t(i,this._parents)}function VE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function WE(){return[]}function qE(e){return e==null?WE:function(){return this.querySelectorAll(e)}}function GE(e){return function(){return VE(e.apply(this,arguments))}}function KE(e){typeof e=="function"?e=GE(e):e=qE(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),r.push(l));return new _t(i,r)}function YE(e){return function(){return this.matches(e)}}function fg(e){return function(t){return t.matches(e)}}var XE=Array.prototype.find;function JE(e){return function(){return XE.call(this.children,e)}}function ZE(){return this.firstElementChild}function QE(e){return this.select(e==null?ZE:JE(typeof e=="function"?e:fg(e)))}var ek=Array.prototype.filter;function tk(){return Array.from(this.children)}function nk(e){return function(){return ek.call(this.children,e)}}function ik(e){return this.selectAll(e==null?tk:nk(typeof e=="function"?e:fg(e)))}function rk(e){typeof e!="function"&&(e=YE(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new _t(i,this._parents)}function hg(e){return new Array(e.length)}function ok(){return new _t(this._enter||this._groups.map(hg),this._parents)}function is(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}is.prototype={constructor:is,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sk(e){return function(){return e}}function ak(e,t,n,i,r,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new is(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function lk(e,t,n,i,r,o,s){var a,l,u=new Map,c=t.length,d=o.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(l=u.get(h))?(i[a]=l,l.__data__=o[a],u.delete(h)):n[a]=new is(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function uk(e){return e.__data__}function ck(e,t){if(!arguments.length)return Array.from(this,uk);var n=t?lk:ak,i=this._parents,r=this._groups;typeof e!="function"&&(e=sk(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],d=r[u],f=d.length,h=dk(e.call(c,c&&c.__data__,u,i)),S=h.length,b=a[u]=new Array(S),E=s[u]=new Array(S),k=l[u]=new Array(f);n(c,d,b,E,k,h,t);for(var C=0,_=0,y,D;C<S;++C)if(y=b[C]){for(C>=_&&(_=C+1);!(D=E[_])&&++_<S;);y._next=D||null}}return s=new _t(s,i),s._enter=a,s._exit=l,s}function dk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fk(){return new _t(this._exit||this._groups.map(hg),this._parents)}function hk(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function gk(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=i[l],d=u.length,f=a[l]=new Array(d),h,S=0;S<d;++S)(h=u[S]||c[S])&&(f[S]=h);for(;l<r;++l)a[l]=n[l];return new _t(a,this._parents)}function pk(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function vk(e){e||(e=mk);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new _t(r,this._parents).order()}function mk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yk(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _k(){return Array.from(this)}function wk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function bk(){let e=0;for(const t of this)++e;return e}function Sk(){return!this.node()}function $k(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function xk(e){return function(){this.removeAttribute(e)}}function Ek(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kk(e,t){return function(){this.setAttribute(e,t)}}function Tk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ck(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ak(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nk(e,t){var n=ug(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Ek:xk:typeof t=="function"?n.local?Ak:Ck:n.local?Tk:kk)(n,t))}function gg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ik(e){return function(){this.style.removeProperty(e)}}function Pk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ok(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Mk(e,t,n){return arguments.length>1?this.each((t==null?Ik:typeof t=="function"?Ok:Pk)(e,t,n??"")):Rk(this.node(),e)}function Rk(e,t){return e.style.getPropertyValue(t)||gg(e).getComputedStyle(e,null).getPropertyValue(t)}function Dk(e){return function(){delete this[e]}}function Bk(e,t){return function(){this[e]=t}}function Lk(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zk(e,t){return arguments.length>1?this.each((t==null?Dk:typeof t=="function"?Lk:Bk)(e,t)):this.node()[e]}function pg(e){return e.trim().split(/^|\s+/)}function Zl(e){return e.classList||new vg(e)}function vg(e){this._node=e,this._names=pg(e.getAttribute("class")||"")}vg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mg(e,t){for(var n=Zl(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function yg(e,t){for(var n=Zl(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Fk(e){return function(){mg(this,e)}}function jk(e){return function(){yg(this,e)}}function Uk(e,t){return function(){(t.apply(this,arguments)?mg:yg)(this,e)}}function Hk(e,t){var n=pg(e+"");if(arguments.length<2){for(var i=Zl(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Uk:t?Fk:jk)(n,t))}function Vk(){this.textContent=""}function Wk(e){return function(){this.textContent=e}}function qk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gk(e){return arguments.length?this.each(e==null?Vk:(typeof e=="function"?qk:Wk)(e)):this.node().textContent}function Kk(){this.innerHTML=""}function Yk(e){return function(){this.innerHTML=e}}function Xk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Jk(e){return arguments.length?this.each(e==null?Kk:(typeof e=="function"?Xk:Yk)(e)):this.node().innerHTML}function Zk(){this.nextSibling&&this.parentNode.appendChild(this)}function Qk(){return this.each(Zk)}function eT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tT(){return this.each(eT)}function nT(e){var t=typeof e=="function"?e:cg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iT(){return null}function rT(e,t){var n=typeof e=="function"?e:cg(e),i=t==null?iT:typeof t=="function"?t:dg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function oT(){var e=this.parentNode;e&&e.removeChild(this)}function sT(){return this.each(oT)}function aT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uT(e){return this.select(e?lT:aT)}function cT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dT(e){return function(t){e.call(this,t,this.__data__)}}function fT(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function hT(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function gT(e,t,n){return function(){var i=this.__on,r,o=dT(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function pT(e,t,n){var i=fT(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?gT:hT,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function _g(e,t,n){var i=gg(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function vT(e,t){return function(){return _g(this,e,t)}}function mT(e,t){return function(){return _g(this,e,t.apply(this,arguments))}}function yT(e,t){return this.each((typeof t=="function"?mT:vT)(e,t))}function*_T(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var wT=[null];function _t(e,t){this._groups=e,this._parents=t}function bT(){return this}_t.prototype={constructor:_t,select:HE,selectAll:KE,selectChild:QE,selectChildren:ik,filter:rk,data:ck,enter:ok,exit:fk,join:hk,merge:gk,selection:bT,order:pk,sort:vk,call:yk,nodes:_k,node:wk,size:bk,empty:Sk,each:$k,attr:Nk,style:Mk,property:zk,classed:Hk,text:Gk,html:Jk,raise:Qk,lower:tT,append:nT,insert:rT,remove:sT,clone:uT,datum:cT,on:pT,dispatch:yT,[Symbol.iterator]:_T};function Ar(e){return typeof e=="string"?new _t([[document.querySelector(e)]],[document.documentElement]):new _t([[e]],wT)}function ST(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qc(e,t){if(e=ST(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}var $T={value:()=>{}};function wg(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new To(n)}function To(e){this._=e}function xT(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}To.prototype=wg.prototype={constructor:To,on:function(e,t){var n=this._,i=xT(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=ET(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Gc(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Gc(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new To(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function ET(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Gc(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=$T,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}const kT={passive:!1},Nr={capture:!0,passive:!1};function ua(e){e.stopImmediatePropagation()}function $i(e){e.preventDefault(),e.stopImmediatePropagation()}function TT(e){var t=e.document.documentElement,n=Ar(e).on("dragstart.drag",$i,Nr);"onselectstart"in t?n.on("selectstart.drag",$i,Nr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function CT(e,t){var n=e.document.documentElement,i=Ar(e).on("dragstart.drag",null);t&&(i.on("click.drag",$i,Nr),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const so=e=>()=>e;function Qa(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Qa.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function AT(e){return!e.ctrlKey&&!e.button}function NT(){return this.parentNode}function IT(e,t){return t??{x:e.x,y:e.y}}function PT(){return navigator.maxTouchPoints||"ontouchstart"in this}function OT(){var e=AT,t=NT,n=IT,i=PT,r={},o=wg("start","drag","end"),s=0,a,l,u,c,d=0;function f(y){y.on("mousedown.drag",h).filter(i).on("touchstart.drag",E).on("touchmove.drag",k,kT).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,D){if(!(c||!e.call(this,y,D))){var U=_(this,t.call(this,y,D),y,D,"mouse");U&&(Ar(y.view).on("mousemove.drag",S,Nr).on("mouseup.drag",b,Nr),TT(y.view),ua(y),u=!1,a=y.clientX,l=y.clientY,U("start",y))}}function S(y){if($i(y),!u){var D=y.clientX-a,U=y.clientY-l;u=D*D+U*U>d}r.mouse("drag",y)}function b(y){Ar(y.view).on("mousemove.drag mouseup.drag",null),CT(y.view,u),$i(y),r.mouse("end",y)}function E(y,D){if(e.call(this,y,D)){var U=y.changedTouches,z=t.call(this,y,D),O=U.length,V,H;for(V=0;V<O;++V)(H=_(this,z,y,D,U[V].identifier,U[V]))&&(ua(y),H("start",y,U[V]))}}function k(y){var D=y.changedTouches,U=D.length,z,O;for(z=0;z<U;++z)(O=r[D[z].identifier])&&($i(y),O("drag",y,D[z]))}function C(y){var D=y.changedTouches,U=D.length,z,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),z=0;z<U;++z)(O=r[D[z].identifier])&&(ua(y),O("end",y,D[z]))}function _(y,D,U,z,O,V){var H=o.copy(),W=qc(V||U,D),P,Q,p;if((p=n.call(y,new Qa("beforestart",{sourceEvent:U,target:f,identifier:O,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:H}),z))!=null)return P=p.x-W[0]||0,Q=p.y-W[1]||0,function M(x,I,A){var L=W,R;switch(x){case"start":r[O]=M,R=s++;break;case"end":delete r[O],--s;case"drag":W=qc(A||I,D),R=s;break}H.call(x,y,new Qa(x,{sourceEvent:I,subject:p,target:f,identifier:O,active:R,x:W[0]+P,y:W[1]+Q,dx:W[0]-L[0],dy:W[1]-L[1],dispatch:H}),z)}}return f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:so(!!y),f):e},f.container=function(y){return arguments.length?(t=typeof y=="function"?y:so(y),f):t},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:so(y),f):n},f.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:so(!!y),f):i},f.on=function(){var y=o.on.apply(o,arguments);return y===o?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}var Qn=(e=>(e.Line="line",e.Handle="handle",e))(Qn||{});function MT({width:e,prevWidth:t,height:n,prevHeight:i,invertX:r,invertY:o}){const s=e-t,a=n-i,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}const RT={[Qn.Line]:"right",[Qn.Handle]:"bottom-right"},DT={[Qn.Line]:"borderColor",[Qn.Handle]:"backgroundColor"},BT={name:"ResizeControl",compatConfig:{MODE:3}},Kc=Ie({...BT,props:{nodeId:{},color:{},minWidth:{default:10},minHeight:{default:10},maxWidth:{default:Number.MAX_VALUE},maxHeight:{default:Number.MAX_VALUE},position:{},variant:{default:"handle"},shouldResize:{},keepAspectRatio:{type:[Boolean,Number],default:!1},autoScale:{type:Boolean,default:!0},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,i={width:0,height:0,x:0,y:0},r={...i,pointerX:0,pointerY:0,aspectRatio:1},{findNode:o,emits:s,viewport:a,noDragClassName:l}=Oe(),u=xh(),c=Te();let d=r,f=i;const h=Se(()=>n.position??RT[n.variant]),S=ue(()=>h.value.split("-")),b=Se(()=>n.color?{[DT[n.variant]]:n.color}:{});return mf(E=>{if(!c.value||!n.nodeId)return;const k=Ar(c.value),C=h.value.includes("right")||h.value.includes("left"),_=h.value.includes("bottom")||h.value.includes("top"),y=h.value.includes("left"),D=h.value.includes("top"),U=OT().on("start",z=>{const O=o(n.nodeId),{xSnapped:V,ySnapped:H}=u(z);f={width:(O==null?void 0:O.dimensions.width)??0,height:(O==null?void 0:O.dimensions.height)??0,x:(O==null?void 0:O.position.x)??0,y:(O==null?void 0:O.position.y)??0},d={...f,pointerX:V,pointerY:H,aspectRatio:f.width/f.height},t("resizeStart",{event:z,params:f})}).on("drag",z=>{var O;const{xSnapped:V,ySnapped:H}=u(z),W=o(n.nodeId);if(W){const P=[],{pointerX:Q,pointerY:p,width:M,height:x,x:I,y:A,aspectRatio:L}=d,{x:R,y:q,width:J,height:ie}=f,Y=Math.floor(C?V-Q:0),ee=Math.floor(_?H-p:0);let X=fn(M+(y?-Y:Y),n.minWidth,n.maxWidth),re=fn(x+(D?-ee:ee),n.minHeight,n.maxHeight);if(n.keepAspectRatio){const T=X/re;let g=L;typeof n.keepAspectRatio=="number"&&T!==n.keepAspectRatio&&(g=n.keepAspectRatio);const v=C&&_,w=C&&!_,m=_&&!C;X=T<=g&&v||m?re*g:X,re=T>g&&v||w?X/g:re,X>=n.maxWidth?(X=n.maxWidth,re=n.maxWidth/g):X<=n.minWidth&&(X=n.minWidth,re=n.minWidth/g),re>=n.maxHeight?(re=n.maxHeight,X=n.maxHeight*g):re<=n.minHeight&&(re=n.minHeight,X=n.minHeight*g)}const le=X!==J,ce=re!==ie;if(y||D){const T=y?I-(X-M):I,g=D?A-(re-x):A,v=T!==R&&le,w=g!==q&&ce;if(v||w){const m={id:W.id,type:"position",from:W.position,position:{x:v?T:R,y:w?g:q}};P.push(m),f.x=m.position.x,f.y=m.position.y}}if(n.nodeId&&(le||ce)){const T={id:n.nodeId,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:X,height:re}};P.push(T),f.width=X,f.height=re}if(P.length===0)return;const ve=MT({width:f.width,prevWidth:J,height:f.height,prevHeight:ie,invertX:y,invertY:D}),$e={...f,direction:ve};if(((O=n.shouldResize)==null?void 0:O.call(n,z,$e))===!1)return;t("resize",{event:z,params:$e}),s.nodesChange(P)}}).on("end",z=>{if(n.nodeId){const O={id:n.nodeId,type:"dimensions",resizing:!1};t("resizeEnd",{event:z,params:f}),s.nodesChange([O])}});k.call(U),E(()=>{k.on(".drag",null)})}),(E,k)=>(se(),de("div",{ref_key:"resizeControlRef",ref:c,class:rt(["vue-flow__resize-control",[...S.value,E.variant,te(l)]]),style:We({...b.value,scale:E.variant===te(Qn).Handle?`${Math.max(1/te(a).zoom,1)}`:void 0})},[Be(E.$slots,"default")],6))}}),LT={name:"NodeResizer",compatConfig:{MODE:3},inheritAttrs:!1},zT=Ie({...LT,props:{nodeId:{},color:{},handleClassName:{},handleStyle:{},lineClassName:{},lineStyle:{},isVisible:{type:Boolean,default:!0},minWidth:{},minHeight:{},maxWidth:{},maxHeight:{},shouldResize:{},keepAspectRatio:{type:[Boolean,Number]},autoScale:{type:Boolean,default:!0}},emits:["resizeStart","resize","resizeEnd"],setup(e,{emit:t}){const n=e,{findNode:i,emits:r}=Oe(),o=["top-left","top-right","bottom-left","bottom-right"],s=["top","right","bottom","left"],a=mt(Ul,null),l=Se(()=>typeof n.nodeId=="string"?n.nodeId:a),u=ue(()=>i(l.value));return be([()=>n.minWidth,()=>n.minHeight,()=>n.maxWidth,()=>n.maxHeight,()=>{var c;return!!((c=u.value)!=null&&c.dimensions.width)&&!!u.value.dimensions.height}],([c,d,f,h,S])=>{const b=u.value;if(b&&S){const E={id:b.id,type:"dimensions",updateStyle:!0,dimensions:{width:b.dimensions.width,height:b.dimensions.height}};c&&b.dimensions.width<c&&(E.dimensions.width=c),d&&b.dimensions.height<d&&(E.dimensions.height=d),f&&b.dimensions.width>f&&(E.dimensions.width=f),h&&b.dimensions.height>h&&(E.dimensions.height=h),(E.dimensions.width!==b.dimensions.width||E.dimensions.height!==b.dimensions.height)&&r.nodesChange([E])}},{flush:"post",immediate:!0}),(c,d)=>c.isVisible?(se(),de(Ae,{key:0},[(se(),de(Ae,null,Yn(s,f=>we(Kc,{key:f,class:rt(c.lineClassName),style:We(c.lineStyle),"node-id":l.value,position:f,variant:te(Qn).Line,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,"keep-aspect-ratio":c.keepAspectRatio,"auto-scale":c.autoScale,onResizeStart:d[0]||(d[0]=h=>t("resizeStart",h)),onResize:d[1]||(d[1]=h=>t("resize",h)),onResizeEnd:d[2]||(d[2]=h=>t("resizeEnd",h))},null,8,["class","style","node-id","position","variant","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio","auto-scale"])),64)),(se(),de(Ae,null,Yn(o,f=>we(Kc,{key:f,class:rt(c.handleClassName),style:We(c.handleStyle),"node-id":l.value,position:f,color:c.color,"min-width":c.minWidth,"min-height":c.minHeight,"max-width":c.maxWidth,"max-height":c.maxHeight,"should-resize":c.shouldResize,"keep-aspect-ratio":c.keepAspectRatio,"auto-scale":c.autoScale,onResizeStart:d[3]||(d[3]=h=>t("resizeStart",h)),onResize:d[4]||(d[4]=h=>t("resize",h)),onResizeEnd:d[5]||(d[5]=h=>t("resizeEnd",h))},null,8,["class","style","node-id","position","color","min-width","min-height","max-width","max-height","should-resize","keep-aspect-ratio","auto-scale"])),64))],64)):Le("",!0)}}),FT="modulepreload",jT=function(e){return"/system-block-diagram/"+e},Yc={},Fr=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=jT(l),l in Yc)return;Yc[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":FT,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},UT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fr(async()=>{const{default:i}=await Promise.resolve().then(()=>Oi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Ql extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class Xc extends Ql{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Jc extends Ql{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Zc extends Ql{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var el;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(el||(el={}));var HT=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};class VT{constructor(t,{headers:n={},customFetch:i,region:r=el.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=UT(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return HT(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:s,signal:a}=n;let l={},{region:u}=n;u||(u=this.region);const c=new URL(`${this.url}/${t}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=s):typeof s=="string"?(l["Content-Type"]="text/plain",d=s):typeof FormData<"u"&&s instanceof FormData?d=s:(l["Content-Type"]="application/json",d=JSON.stringify(s)));const f=yield this.fetch(c.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:d,signal:a}).catch(E=>{throw E.name==="AbortError"?E:new Xc(E)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Jc(f);if(!f.ok)throw new Zc(f);let S=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),b;return S==="application/json"?b=yield f.json():S==="application/octet-stream"?b=yield f.blob():S==="text/event-stream"?b=f:S==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null,response:f}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new Xc(r)}:{data:null,error:r,response:r instanceof Zc||r instanceof Jc?r.context:void 0}}})}}var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var at={},eu={},Ms={},jr={},Rs={},Ds={},qT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pi=qT();const GT=Pi.fetch,bg=Pi.fetch.bind(Pi),Sg=Pi.Headers,KT=Pi.Request,YT=Pi.Response,Oi=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sg,Request:KT,Response:YT,default:bg,fetch:GT},Symbol.toStringTag,{value:"Module"})),XT=WT(Oi);var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});let JT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Bs.default=JT;var $g=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ds,"__esModule",{value:!0});const ZT=$g(XT),QT=$g(Bs);let eC=class{constructor(t){var n,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ZT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l,u;let c=null,d=null,f=null,h=o.status,S=o.statusText;if(o.ok){if(this.method!=="HEAD"){const C=await o.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((s=this.headers.get("Accept"))===null||s===void 0)&&s.includes("application/vnd.pgrst.plan+text"))?d=C:d=JSON.parse(C))}const E=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),k=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");E&&k&&k.length>1&&(f=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,S="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const E=await o.text();try{c=JSON.parse(E),Array.isArray(c)&&o.status===404&&(d=[],c=null,h=200,S="OK")}catch{o.status===404&&E===""?(h=204,S="No Content"):c={message:E}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,h=200,S="OK"),c&&this.shouldThrowOnError)throw new QT.default(c)}return{error:c,data:d,count:f,status:h,statusText:S}});return this.shouldThrowOnError||(r=r.catch(o=>{var s,a,l;return{error:{message:`${(s=o==null?void 0:o.name)!==null&&s!==void 0?s:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,n)}returns(){return this}overrideTypes(){return this}};Ds.default=eC;var tC=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rs,"__esModule",{value:!0});const nC=tC(Ds);let iC=class extends nC.default{select(t){let n=!1;const i=(t??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:i,foreignTable:r,referencedTable:o=r}={}){const s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,n,{foreignTable:i,referencedTable:r=i}={}){const o=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:o=!1,format:s="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${u}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Rs.default=iC;var rC=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jr,"__esModule",{value:!0});const oC=rC(Rs);let sC=class extends oC.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:i,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const s=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${o}fts${s}.${n}`),this}match(t){return Object.entries(t).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(t,n,i){return this.url.searchParams.append(t,`not.${n}.${i}`),this}or(t,{foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,n,i){return this.url.searchParams.append(t,`${n}.${i}`),this}};jr.default=sC;var aC=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ms,"__esModule",{value:!0});const Ui=aC(jr);let lC=class{constructor(t,{headers:n={},schema:i,fetch:r}){this.url=t,this.headers=new Headers(n),this.schema=i,this.fetch=r}select(t,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let o=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),i&&this.headers.append("Prefer",`count=${i}`),new Ui.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:i=!0}={}){var r;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){const a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ui.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:o=!0}={}){var s;const a="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ui.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:n}={}){var i;const r="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Ui.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:t}={}){var n;const i="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ui.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ms.default=lC;var xg=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eu,"__esModule",{value:!0});const uC=xg(Ms),cC=xg(jr);let dC=class Eg{constructor(t,{headers:n={},schema:i,fetch:r}={}){this.url=t,this.headers=new Headers(n),this.schemaName=i,this.fetch=r}from(t){const n=new URL(`${this.url}/${t}`);return new uC.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Eg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:r=!1,count:o}={}){var s;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;i||r?(a=i?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(a="POST",u=n);const c=new Headers(this.headers);return o&&c.set("Prefer",`count=${o}`),new cC.default({method:a,url:l,headers:c,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};eu.default=dC;var Mi=wt&&wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});at.PostgrestError=at.PostgrestBuilder=at.PostgrestTransformBuilder=at.PostgrestFilterBuilder=at.PostgrestQueryBuilder=at.PostgrestClient=void 0;const kg=Mi(eu);at.PostgrestClient=kg.default;const Tg=Mi(Ms);at.PostgrestQueryBuilder=Tg.default;const Cg=Mi(jr);at.PostgrestFilterBuilder=Cg.default;const Ag=Mi(Rs);at.PostgrestTransformBuilder=Ag.default;const Ng=Mi(Ds);at.PostgrestBuilder=Ng.default;const Ig=Mi(Bs);at.PostgrestError=Ig.default;var fC=at.default={PostgrestClient:kg.default,PostgrestQueryBuilder:Tg.default,PostgrestFilterBuilder:Cg.default,PostgrestTransformBuilder:Ag.default,PostgrestBuilder:Ng.default,PostgrestError:Ig.default};const{PostgrestClient:hC,PostgrestQueryBuilder:CN,PostgrestFilterBuilder:AN,PostgrestTransformBuilder:NN,PostgrestBuilder:IN,PostgrestError:PN}=fC;class gC{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pC="2.15.5",vC=`realtime-js/${pC}`,mC="1.0.0",tl=1e4,yC=1e3,_C=100;var ar;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ar||(ar={}));var qe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(qe||(qe={}));var bt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bt||(bt={}));var nl;(function(e){e.websocket="websocket"})(nl||(nl={}));var Un;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Un||(Un={}));class wC{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const r=n.getUint8(1),o=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=i.decode(t.slice(s,s+r));s=s+r;const l=i.decode(t.slice(s,s+o));s=s+o;const u=JSON.parse(i.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Pg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Re||(Re={}));const Qc=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((o,s)=>(o[s]=bC(s,e,t,r),o),{})},bC=(e,t,n,i)=>{const r=t.find(a=>a.name===e),o=r==null?void 0:r.type,s=n[e];return o&&!i.includes(o)?Og(o,s):il(s)},Og=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return EC(t,n)}switch(e){case Re.bool:return SC(t);case Re.float4:case Re.float8:case Re.int2:case Re.int4:case Re.int8:case Re.numeric:case Re.oid:return $C(t);case Re.json:case Re.jsonb:return xC(t);case Re.timestamp:return kC(t);case Re.abstime:case Re.date:case Re.daterange:case Re.int4range:case Re.int8range:case Re.money:case Re.reltime:case Re.text:case Re.time:case Re.timestamptz:case Re.timetz:case Re.tsrange:case Re.tstzrange:return il(t);default:return il(t)}},il=e=>e,SC=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$C=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xC=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},EC=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let o;const s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>Og(t,a))}return e},kC=e=>typeof e=="string"?e.replace(" ","T"):e,Mg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ca{constructor(t,n,i={},r=tl){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ed;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ed||(ed={}));class lr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lr.syncState(this.state,r,o,s),this.pendingDiffs.forEach(l=>{this.state=lr.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=lr.syncDiff(this.state,r,o,s),a())}),this.onJoin((r,o,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:s})}),this.onLeave((r,o,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const o=this.cloneDeep(t),s=this.transformState(n),a={},l={};return this.map(o,(u,c)=>{s[u]||(l[u]=c)}),this.map(s,(u,c)=>{const d=o[u];if(d){const f=c.map(E=>E.presence_ref),h=d.map(E=>E.presence_ref),S=c.filter(E=>h.indexOf(E.presence_ref)<0),b=d.filter(E=>f.indexOf(E.presence_ref)<0);S.length>0&&(a[u]=S),b.length>0&&(l[u]=b)}else a[u]=c}),this.syncDiff(o,{joins:a,leaves:l},i,r)}static syncDiff(t,n,i,r){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}i(a,c,l)}),this.map(s,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,r(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var td;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(td||(td={}));var ur;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ur||(ur={}));var Zt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Zt||(Zt={}));class tu{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ca(this,bt.join,this.params,this.timeout),this.rejoinTimer=new Pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bt.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new lr(this),this.broadcastEndpointURL=Mg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==qe.closed){const{config:{broadcast:s,presence:a,private:l}}=this.params,u=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(h=>h.filter))!==null&&r!==void 0?r:[],c=!!this.bindings[ur.PRESENCE]&&this.bindings[ur.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},f={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Zt.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Zt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var S;if(this.socket.setAuth(),h===void 0){t==null||t(Zt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(S=b==null?void 0:b.length)!==null&&S!==void 0?S:0,k=[];for(let C=0;C<E;C++){const _=b[C],{filter:{event:y,schema:D,table:U,filter:z}}=_,O=h&&h[C];if(O&&O.event===y&&O.schema===D&&O.table===U&&O.filter===z)k.push(Object.assign(Object.assign({},_),{id:O.id}));else{this.unsubscribe(),this.state=qe.errored,t==null||t(Zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Zt.SUBSCRIBED);return}}).receive("error",h=>{this.state=qe.errored,t==null||t(Zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===qe.joined&&t===ur.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new ca(this,bt.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qe.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const r=new AbortController,o=setTimeout(()=>r.abort(),i),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),s}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ca(this,t,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>_C){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,o;const s=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=bt;if(i&&[a,l,u,c].indexOf(s)>=0&&i!==this._joinRef())return;let f=this._onMessage(s,n,i);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var S,b,E;return((S=h.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(b=h.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(h=>h.callback(f,i)):(o=this.bindings[s])===null||o===void 0||o.filter(h=>{var S,b,E,k,C,_;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const y=h.id,D=(S=h.filter)===null||S===void 0?void 0:S.event;return y&&((b=n.ids)===null||b===void 0?void 0:b.includes(y))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const y=(C=(k=h==null?void 0:h.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return y==="*"||y===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof f=="object"&&"ids"in f){const S=f.data,{schema:b,table:E,commit_timestamp:k,type:C,errors:_}=S;f=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:k,eventType:C,new:{},old:{},errors:_}),this._getPayloadRecords(S))}h.callback(f,i)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),o={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&tu.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bt.close,{},t)}_onError(t){this._on(bt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Qc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Qc(t.columns,t.old_record)),n}}const da=()=>{},ao={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TC=[1e3,2e3,5e3,1e4],CC=1e4,AC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class NC{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tl,this.transport=null,this.heartbeatIntervalMs=ao.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=da,this.ref=0,this.reconnectTimer=null,this.logger=da,this.conn=null,this.sendBuffer=[],this.serializer=new wC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...s)=>Fr(async()=>{const{default:a}=await Promise.resolve().then(()=>Oi);return{default:a}},void 0).then(({default:a})=>a(...s)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...s)=>o(...s)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${nl.websocket}`,this.httpEndpoint=Mg(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gC.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mC}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ar.connecting:return Un.Connecting;case ar.open:return Un.Open;case ar.closing:return Un.Closing;default:return Un.Closed}}isConnected(){return this.connectionState()===Un.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{const o=new tu(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:i,payload:r,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${i} (${o})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yC,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ao.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:o,ref:s}=n,a=s?`(${s})`:"",l=o.status||"";this.log("receive",`${l} ${i} ${r} ${a}`.trim(),o),this.channels.filter(u=>u._isMember(i)).forEach(u=>u._trigger(r,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([AC],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const r={access_token:n,version:vC};n&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(bt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Pg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ao.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,r,o,s,a,l,u,c;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:tl,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:ao.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:da,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>TC[d-1]||CC,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,f)=>f(JSON.stringify(d)),this.decode=(c=t==null?void 0:t.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class nu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class IC extends nu{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rl extends nu{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var PC=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};const Rg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fr(async()=>{const{default:i}=await Promise.resolve().then(()=>Oi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},OC=()=>PC(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fr(()=>Promise.resolve().then(()=>Oi),void 0)).Response:Response}),ol=e=>{if(Array.isArray(e))return e.map(n=>ol(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=ol(i)}),t},MC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ti=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};const fa=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RC=(e,t,n)=>ti(void 0,void 0,void 0,function*(){const i=yield OC();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const o=e.status||500,s=(r==null?void 0:r.statusCode)||o+"";t(new IC(fa(r),o,s))}).catch(r=>{t(new rl(fa(r),r))}):t(new rl(fa(e),e))}),DC=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?r:(MC(i)?(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n))};function Ur(e,t,n,i,r,o){return ti(this,void 0,void 0,function*(){return new Promise((s,a)=>{e(n,DC(t,i,r,o)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>RC(l,a,i))})})}function rs(e,t,n,i){return ti(this,void 0,void 0,function*(){return Ur(e,"GET",t,n,i)})}function Dt(e,t,n,i,r){return ti(this,void 0,void 0,function*(){return Ur(e,"POST",t,i,r,n)})}function sl(e,t,n,i,r){return ti(this,void 0,void 0,function*(){return Ur(e,"PUT",t,i,r,n)})}function BC(e,t,n,i){return ti(this,void 0,void 0,function*(){return Ur(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Dg(e,t,n,i,r){return ti(this,void 0,void 0,function*(){return Ur(e,"DELETE",t,i,r,n)})}var LC=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};class zC{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return LC(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}var FC=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};class jC{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new zC(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return FC(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}var st=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};const UC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class HC{constructor(t,n={},i,r){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=Rg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,r){return st(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},nd),r);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=i,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),d=yield(t=="PUT"?sl:Dt)(this.fetch,`${this.url}/object/${c}`,o,Object.assign({headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}upload(t,n,i){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,r){return st(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:nd.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl)):(l=i,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield sl(this.fetch,a.toString(),l,{headers:c});return{data:{path:o,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ue(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return st(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const o=yield Dt(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new nu("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}update(t,n,i){return st(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return st(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}copy(t,n,i){return st(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,i){return st(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),o=yield Dt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,i){return st(this,void 0,void 0,function*(){try{const r=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}download(t,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"",a=this._getFinalPath(t),l=()=>rs(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new jC(l,this.shouldThrowOnError)}info(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield rs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ol(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}exists(t){return st(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield BC(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i)&&i instanceof rl){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),r=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&r.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${u}`)}}}remove(t){return st(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}list(t,n,i){return st(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},UC),n),{prefix:t||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ue(r))return{data:null,error:r};throw r}})}listV2(t,n){return st(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const VC="2.12.2",WC={"X-Client-Info":`storage-js/${VC}`};var oi=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};class qC{constructor(t,n={},i,r){this.shouldThrowOnError=!1;const o=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},WC),n),this.fetch=Rg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return oi(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}getBucket(t){return oi(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return oi(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return oi(this,void 0,void 0,function*(){try{return{data:yield sl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ue(i))return{data:null,error:i};throw i}})}emptyBucket(t){return oi(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}deleteBucket(t){return oi(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ue(n))return{data:null,error:n};throw n}})}}class GC extends qC{constructor(t,n={},i,r){super(t,n,i,r)}from(t){return new HC(this.url,this.headers,t,this.fetch)}}const KC="2.58.0";let Xi="";typeof Deno<"u"?Xi="deno":typeof document<"u"?Xi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xi="react-native":Xi="node";const YC={"X-Client-Info":`supabase-js-${Xi}/${KC}`},XC={headers:YC},JC={schema:"public"},ZC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QC={};var eA=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};const tA=e=>{let t;return e?t=e:typeof fetch>"u"?t=bg:t=fetch,(...n)=>t(...n)},nA=()=>typeof Headers>"u"?Sg:Headers,iA=(e,t,n)=>{const i=tA(n),r=nA();return(o,s)=>eA(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new r(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),i(o,Object.assign(Object.assign({},s),{headers:u}))})};var rA=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};function oA(e){return e.endsWith("/")?e:e+"/"}function sA(e,t){var n,i;const{db:r,auth:o,realtime:s,global:a}=e,{db:l,auth:u,realtime:c,global:d}=t,f={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},c),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(i=a==null?void 0:a.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>rA(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function aA(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(oA(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Bg="2.72.0",di=30*1e3,al=3,ha=al*di,lA="http://localhost:9999",uA="supabase.auth.token",cA={"X-Client-Info":`gotrue-js/${Bg}`},ll="X-Supabase-Api-Version",Lg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fA=10*60*1e3;class iu extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function pe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class hA extends iu{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function gA(e){return pe(e)&&e.name==="AuthApiError"}class zg extends iu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class In extends iu{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class _n extends In{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pA(e){return pe(e)&&e.name==="AuthSessionMissingError"}class Hi extends In{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lo extends In{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class uo extends In{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vA(e){return pe(e)&&e.name==="AuthImplicitGrantRedirectError"}class id extends In{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ul extends In{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ga(e){return pe(e)&&e.name==="AuthRetryableFetchError"}class rd extends In{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class cl extends In{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const os="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),od=` 	
\r=`.split(""),mA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<od.length;t+=1)e[od[t].charCodeAt(0)]=-2;for(let t=0;t<os.length;t+=1)e[os[t].charCodeAt(0)]=t;return e})();function sd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(os[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(os[i]),t.queuedBits-=6}}function Fg(e,t,n){const i=mA[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ad(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=s=>{wA(s,i,n)};for(let s=0;s<e.length;s+=1)Fg(e.charCodeAt(s),r,o);return t.join("")}function yA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function _A(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}yA(i,t)}}function wA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function bA(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)Fg(e.charCodeAt(r),n,i);return new Uint8Array(t)}function SA(e){const t=[];return _A(e,n=>t.push(n)),new Uint8Array(t)}function $A(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>sd(r,n,i)),sd(null,n,i),t.join("")}function xA(e){return Math.round(Date.now()/1e3)+e}function EA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const gt=()=>typeof window<"u"&&typeof document<"u",Mn={tested:!1,writable:!1},jg=()=>{if(!gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mn.tested)return Mn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Mn.tested=!0,Mn.writable=!0}catch{Mn.tested=!0,Mn.writable=!1}return Mn.writable};function kA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const Ug=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Fr(async()=>{const{default:i}=await Promise.resolve().then(()=>Oi);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},TA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Rn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},vn=async(e,t)=>{await e.removeItem(t)};class Ls{constructor(){this.promise=new Ls.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ls.promiseConstructor=Promise;function pa(e){const t=e.split(".");if(t.length!==3)throw new cl("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!dA.test(t[i]))throw new cl("JWT not in base64url format");return{header:JSON.parse(ad(t[0])),payload:JSON.parse(ad(t[1])),signature:bA(t[2]),raw:{header:t[0],payload:t[1]}}}async function CA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AA(e,t){return new Promise((i,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await e(o);if(!t(o,null,s)){i(s);return}}catch(s){if(!t(o,s)){r(s);return}}})()})}function NA(e){return("0"+e.toString(16)).substr(-2)}function IA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,NA).join("")}async function PA(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function OA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await PA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function si(e,t,n=!1){const i=IA();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await fi(e,`${t}-code-verifier`,r);const o=await OA(i);return[o,i===o?"plain":"s256"]}const MA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RA(e){const t=e.headers.get(ll);if(!t||!t.match(MA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function DA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function BA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const LA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ai(e){if(!LA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function va(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ld(e){return JSON.parse(JSON.stringify(e))}var zA=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const Bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FA=[502,503,504];async function ud(e){var t;if(!TA(e))throw new ul(Bn(e),0);if(FA.includes(e.status))throw new ul(Bn(e),e.status);let n;try{n=await e.json()}catch(o){throw new zg(Bn(o),o)}let i;const r=RA(e);if(r&&r.getTime()>=Lg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new rd(Bn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new _n}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new rd(Bn(n),e.status,n.weak_password.reasons);throw new hA(Bn(n),e.status||500,i)}const jA=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function me(e,t,n,i){var r;const o=Object.assign({},i==null?void 0:i.headers);o[ll]||(o[ll]=Lg["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const s=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(s.redirect_to=i.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await UA(e,t,n+a,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function UA(e,t,n,i,r,o){const s=jA(t,i,r,o);let a;try{a=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new ul(Bn(l),0)}if(a.ok||await ud(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await ud(l)}}function Mt(e){var t;let n=null;qA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=xA(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function cd(e){const t=Mt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function En(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function HA(e){return{data:e,error:null}}function VA(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o}=e,s=zA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function WA(e){return e}function qA(e){return e.access_token&&e.refresh_token&&e.expires_in}const ma=["global","local","others"];var GA=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class KA{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=Ug(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=ma[0]){if(ma.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ma.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:En})}catch(i){if(pe(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=GA(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:VA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:En})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,o,s,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:WA});if(c.error)throw c.error;const d=await c.json(),f=(s=c.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(S=>{const b=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);u[`${E}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(pe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ai(t);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:En})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ai(t);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:En})}catch(i){if(pe(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){ai(t);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:En})}catch(i){if(pe(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){ai(t.userId);try{const{data:n,error:i}=await me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ai(t.userId),ai(t.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}}function dd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function YA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const li={debug:!!(globalThis&&jg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class XA extends Hg{}async function JA(e,t,n){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),li.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{li.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw li.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new XA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(li.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Vg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function ZA(e){return parseInt(e,16)}function QA(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function eN(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=Vg(e.address),S=c?`${c}://${i}`:i,b=e.statement?`${e.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${h}

${b}`;let k=`URI: ${d}
Version: ${f}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(r&&(k+=`
Expiration Time: ${r.toISOString()}`),a&&(k+=`
Not Before: ${a.toISOString()}`),l&&(k+=`
Request ID: ${l}`),u){let C=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);C+=`
- ${_}`}k+=C}return`${E}
${k}`}YA();const tN={url:lA,storageKey:uA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fd(e,t,n){return await n()}const ui={};class Ir{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ir.nextInstanceID,Ir.nextInstanceID+=1,this.instanceID>0&&gt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},tN),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new KA({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ug(r.fetch),this.lock=r.lock||fd,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:gt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JA:this.lock=fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:jg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dd(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=dd(this.memoryStorage)),gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=ui[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ui[this.storageKey]=Object.assign(Object.assign({},ui[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ui[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ui[this.storageKey]=Object.assign(Object.assign({},ui[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=kA(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),gt()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),vA(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return pe(n)?{error:n}:{error:new zg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Mt}),{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(pe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,i,r;try{let o;if("email"in t){const{email:c,password:d,options:f}=t;let h=null,S=null;this.flowType==="pkce"&&([h,S]=await si(this.storage,this.storageKey)),o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:S},xform:Mt})}else if("phone"in t){const{phone:c,password:d,options:f}=t;o=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Mt})}else throw new lo("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(pe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:s,options:a}=t;n=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cd})}else if("phone"in t){const{phone:o,password:s,options:a}=t;n=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:cd})}else throw new lo("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Hi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,r,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,r,o,s,a,l,u,c,d,f;let h,S;if("message"in t)h=t.message,S=t.signature;else{const{chain:b,wallet:E,statement:k,options:C}=t;let _;if(gt())if(typeof E=="object")_=E;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")_=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=E}const y=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href),D=await _.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=Vg(D[0]);let z=(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!z){const V=await _.request({method:"eth_chainId"});z=ZA(V)}const O={domain:y.host,address:U,statement:k,uri:y.href,version:"1",chainId:z,nonce:(r=C==null?void 0:C.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(s=(o=C==null?void 0:C.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=C==null?void 0:C.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=C==null?void 0:C.signInWithEthereum)===null||c===void 0?void 0:c.resources};h=eN(O),S=await _.request({method:"personal_sign",params:[QA(h),U]})}try{const{data:b,error:E}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:S},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Mt});if(E)throw E;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Hi}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:E})}catch(b){if(pe(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,i,r,o,s,a,l,u,c,d,f,h;let S,b;if("message"in t)S=t.message,b=t.signature;else{const{chain:E,wallet:k,statement:C,options:_}=t;let y;if(gt())if(typeof k=="object")y=k;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))y=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=k}const D=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in y&&y.signIn){const U=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let z;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")z=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)z=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)S=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),b=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${D.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(r=(i=_==null?void 0:_.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const U=await y.signMessage(new TextEncoder().encode(S),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=U}}try{const{data:E,error:k}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:$A(b)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Mt});if(k)throw k;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new Hi}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:k})}catch(E){if(pe(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(t){const n=await Rn(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{const{data:o,error:s}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Mt});if(await vn(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Hi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:s})}catch(o){if(pe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:o,nonce:s}=t,a=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Hi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,r,o,s;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await si(this.storage,this.storageKey));const{error:d}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new lo("You must provide either an email or phone number.")}catch(a){if(pe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,i;try{let r,o;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:s,error:a}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Mt});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,i,r;try{let o=null,s=null;return this.flowType==="pkce"&&([o,s]=await si(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:HA})}catch(o){if(pe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new _n;const{error:r}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(pe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:o}=t,{error:s}=await me(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:i,type:r,options:o}=t,{data:s,error:a}=await me(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a}}throw new lo("You must provide either an email or phone number and a type")}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<ha:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const s=await Rn(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=va()}if(this.storage.isServer&&t.user){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!s&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:En}):await this._useSession(async n=>{var i,r,o;const{data:s,error:a}=n;if(a)throw a;return!(!((i=s.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _n}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:En})})}catch(n){if(pe(n))return pA(n)&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:o}=i;if(o)throw o;if(!r.session)throw new _n;const s=r.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await si(this.storage,this.storageKey));const{data:u,error:c}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:s.access_token,xform:En});if(c)throw c;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(i){if(pe(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new _n;const n=Date.now()/1e3;let i=n,r=!0,o=null;const{payload:s}=pa(t.access_token);if(s.exp&&(i=s.exp,r=i<=n),r){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(pe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:s,error:a}=n;if(a)throw a;t=(i=s.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new _n;const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!gt())throw new uo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new uo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new id("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new id("No code detected.");const{data:C,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:o,refresh_token:s,expires_in:a,expires_at:l,token_type:u}=t;if(!o||!a||!s||!u)throw new uo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=di&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const S=f-d;c-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,c):c-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,f,c);const{data:b,error:E}=await this._getUser(o);if(E)throw E;const k={provider_token:i,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:f,refresh_token:s,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(i){if(pe(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Rn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return{error:o};const s=(i=r.session)===null||i===void 0?void 0:i.access_token;if(s){const{error:a}=await this.admin.signOut(s,t);if(a&&!(gA(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=EA(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:o},error:s}=n;if(s)throw s;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await si(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(pe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:r}=await this._useSession(async o=>{var s,a,l,u,c;const{data:d,error:f}=o;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return gt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(pe(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:s}=n;if(s)throw s;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await AA(async r=>(r>0&&await CA(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Mt})),(r,o)=>{const s=200*Math.pow(2,r);return o&&ga(o)&&Date.now()+s-i<di})}catch(i){if(this._debug(n,"error",i),pe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),gt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Rn(this.storage,this.storageKey);if(r&&this.userStorage){let s=await Rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:r.user},await fi(this.userStorage,this.storageKey+"-user",s)),r.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:va()}else if(r&&!r.user&&!r.user){const s=await Rn(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(r.user=s.user,await vn(this.storage,this.storageKey+"-user"),await fi(this.storage,this.storageKey,r)):r.user=va()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const o=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ha;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${ha}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),ga(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:a}=await this._getUser(r.access_token);!a&&(s!=null&&s.user)?(r.user=s.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(i,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new _n;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ls;const{data:o,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!o.session)throw new _n;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(r,"error",o),pe(o)){const s={session:null,error:o};return ga(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){o.push(l)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await fi(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const o=ld(r);await fi(this.storage,this.storageKey,o)}else{const r=ld(n);await fi(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await vn(this.storage,this.storageKey),await vn(this.storage,this.storageKey+"-code-verifier"),await vn(this.storage,this.storageKey+"-user"),this.userStorage&&await vn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),di);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/di);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${di}ms, refresh threshold is ${al} ticks`),r<=al&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,s]=await si(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);r.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?{data:null,error:o}:await me(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await me(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return{data:null,error:o};const{data:s,error:a}=await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?{data:null,error:o}:await me(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(t==null?void 0:t.factors)||[],r=i.filter(s=>s.factor_type==="totp"&&s.status==="verified"),o=i.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:i,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:r},error:o}=t;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=pa(r.access_token);let a=null;s.aal&&(a=s.aal);let l=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const c=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(a=>a.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(a=>a.kid===t),i&&this.jwks_cached_at+fA>r)return i;const{data:o,error:s}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=r,i=o.keys.find(a=>a.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:h,error:S}=await this.getSession();if(S||!h.session)return{data:null,error:S};i=h.session.access_token}const{header:r,payload:o,signature:s,raw:{header:a,payload:l}}=pa(i);n!=null&&n.allowExpired||DA(o.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(i);if(h)throw h;return{data:{claims:o,header:r,signature:s},error:null}}const c=BA(r.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,s,SA(`${a}.${l}`)))throw new cl("Invalid JWT signature");return{data:{claims:o,header:r,signature:s},error:null}}catch(i){if(pe(i))return{data:null,error:i};throw i}}}Ir.nextInstanceID=0;const nN=Ir;class iN extends nN{constructor(t){super(t)}}var rN=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(c){try{u(i.next(c))}catch(d){s(d)}}function l(c){try{u(i.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((i=i.apply(e,t||[])).next())})};class oN{constructor(t,n,i){var r,o,s;this.supabaseUrl=t,this.supabaseKey=n;const a=aA(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:JC,realtime:QC,auth:Object.assign(Object.assign({},ZC),{storageKey:l}),global:XC},c=sA(i??{},u);this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=c.auth)!==null&&s!==void 0?s:{},this.headers,c.global.fetch),this.fetch=iA(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new hC(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new GC(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new VT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return rN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:o,storageKey:s,flowType:a,lock:l,debug:u},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iN({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:o,flowType:a,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new NC(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sN=(e,t,n)=>new oN(e,t,n);function aN(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}aN()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lN="https://iotqxpgkopjhquuqxmua.supabase.co",uN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlvdHF4cGdrb3BqaHF1dXF4bXVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MTk0OTEsImV4cCI6MjA3NTI5NTQ5MX0.EAyQhCARmS_Lhbz8pKAmkFFR9acSYvOJMEEGIpvPPoM",co=sN(lN,uN),cN={key:0,class:"absolute top-2 right-2 bg-gray-200 text-xs px-2 py-1 rounded shadow"},dN={style:{flex:"1",width:"100%",height:"100%"},class:"w-full h-full flex flex-col"},fN={class:"p-3 flex items-center gap-2 bg-white border-b"},hN=["value"],gN={style:{flex:"1",width:"100%",height:"100%"}},pN=["title"],vN={class:"font-semibold text-sm"},mN={class:"text-xs opacity-80"},fo="diagram_layout_v1",yN=Ie({__name:"Diagram",setup(e){const n=new URLSearchParams(window.location.search).get("readonly")==="true",i=Te([]),r=Te("");function o(O){return{backgroundColor:{infra:"#22c55e",backend:"#3b82f6",monitoring:"#a855f7",frontend:"#f97316",default:"#6b7280"}[O??"default"],color:"white"}}const s=Te({visible:!1,text:"",x:0,y:0}),a=Lu.nodes.map(O=>({id:O.id,type:"block",position:{x:O.x,y:O.y},data:{label:O.label,tooltip:O.tooltip,type:O.type},style:{width:O.width,height:O.height}})),l=Lu.edges,u=Te(JSON.parse(JSON.stringify(a))),c=Te(JSON.parse(JSON.stringify(l)));let d=null,f=!1;be([u,c],()=>{f||(d&&clearTimeout(d),d=window.setTimeout(()=>{try{const O={nodes:u.value,edges:c.value};localStorage.setItem(fo,JSON.stringify(O)),console.log("[diagram] autosaved layout")}catch(O){console.error("[diagram] autosave error",O)}},1e3))},{deep:!0});function h(){localStorage.setItem(fo,JSON.stringify({nodes:u.value,edges:c.value})),alert("Layout saved to localStorage")}function S(){const O=localStorage.getItem(fo);if(!O)return alert("No saved layout found");const V=JSON.parse(O);f=!0,u.value=V.nodes,c.value=V.edges,setTimeout(()=>{f=!1},200),alert("Layout loaded")}function b(){const O=JSON.stringify({nodes:u.value,edges:c.value},null,2),V=new Blob([O],{type:"application/json"}),H=URL.createObjectURL(V),W=document.createElement("a");W.href=H,W.download="diagram-layout.json",W.click(),URL.revokeObjectURL(H)}const E=Te(null);function k(){var O;(O=E.value)==null||O.click()}function C(O){var P;const V=O.target;if(!((P=V.files)!=null&&P.length))return;const H=V.files[0],W=new FileReader;W.onload=()=>{try{const Q=JSON.parse(String(W.result));Q.nodes&&Q.edges?(f=!0,u.value=Q.nodes,c.value=Q.edges,setTimeout(()=>{f=!1},200),alert("Layout imported ✅")):alert("Invalid file: missing nodes/edges")}catch(Q){console.error(Q),alert("Failed to parse JSON")}V.value=""},W.readAsText(H)}function _(){confirm("Reset to original default layout?")&&(f=!0,u.value=JSON.parse(JSON.stringify(a)),c.value=JSON.parse(JSON.stringify(l)),localStorage.removeItem(fo),setTimeout(()=>{f=!1},200),alert("Layout reset"))}async function y(){const{data:O,error:V}=await co.from("diagrams").select("id, name, created_at").order("created_at",{ascending:!1});!V&&O&&(i.value=O)}async function D(){const O={nodes:u.value,edges:c.value};if(r.value){const{error:V}=await co.from("diagrams").update({json:O,updated_at:new Date}).eq("id",r.value);alert(V?"Update failed: "+V.message:"Diagram updated ☁️")}else{const V=prompt("Enter diagram name:");if(!V)return;const{data:H,error:W}=await co.from("diagrams").insert([{name:V,json:O}]).select();W?alert("Save failed: "+W.message):(alert("Diagram saved ☁️"),await y(),r.value=H[0].id)}}async function U(){if(!r.value)return alert("Select a diagram first!");const{data:O,error:V}=await co.from("diagrams").select("json").eq("id",r.value).single();if(V)return alert("Load failed: "+V.message);O!=null&&O.json&&(u.value=O.json.nodes,c.value=O.json.edges,alert("Loaded from cloud ✅"))}function z(){const O=[()=>`${Math.floor(Math.random()*150)} req/s`,()=>`${(Math.random()*500).toFixed(0)} ms avg`,()=>`${Math.floor(Math.random()*50)} sessions`,()=>`${(Math.random()*2).toFixed(1)}k logs/min`];return O[Math.floor(Math.random()*O.length)]()}return Wt(()=>{y(),setInterval(()=>{u.value=u.value.map(O=>({...O,data:{...O.data,metric:z()}}))},5e3)}),(O,V)=>(se(),de(Ae,null,[n?(se(),de("div",cN," Read-Only Mode ")):Le("",!0),_e("div",dN,[_e("div",fN,[_e("button",{onClick:h,class:"px-3 py-1 bg-blue-600 text-white rounded"},"Save"),_e("button",{onClick:S,class:"px-3 py-1 bg-gray-200 rounded"},"Load"),Lp(_e("select",{"onUpdate:modelValue":V[0]||(V[0]=H=>r.value=H),class:"border rounded px-2 py-1"},[V[3]||(V[3]=_e("option",{disabled:"",value:""},"-- Select Diagram --",-1)),(se(!0),de(Ae,null,Yn(i.value,H=>(se(),de("option",{key:H.id,value:H.id},nn(H.name),9,hN))),128))],512),[[sm,r.value]]),_e("button",{onClick:D,class:"text-blue-600"},"Save to Cloud"),_e("button",{onClick:U,class:"text-blue-600"},"Load from Cloud"),_e("button",{onClick:b,class:"px-3 py-1 bg-green-600 text-white rounded"},"Export JSON"),_e("button",{onClick:k,class:"px-3 py-1 bg-yellow-500 text-white rounded"},"Import JSON"),_e("button",{onClick:_,class:"px-3 py-1 bg-red-500 text-white rounded"},"Reset"),V[4]||(V[4]=_e("div",{class:"ml-auto text-sm text-gray-500"},"Autosave: on (1s debounce)",-1)),_e("input",{ref_key:"fileInput",ref:E,type:"file",accept:"application/json",onChange:C,style:{display:"none"}},null,544)]),_e("div",gN,[we(te(y1),{nodes:u.value,"onUpdate:nodes":V[1]||(V[1]=H=>u.value=H),edges:c.value,"onUpdate:edges":V[2]||(V[2]=H=>c.value=H),"nodes-draggable":!n,"nodes-connectable":!n,"elements-selectable":!n,"zoom-on-scroll":!n,"zoom-on-pinching":!n,"pan-on-drag":!n,"fit-view":"",class:"w-full h-full"},{"node-block":pt(({data:H})=>[_e("div",{title:H.tooltip,class:"p-3 w-full h-full border rounded-xl shadow hover:shadow-md transition-all text-white",style:We(o(H.type))},[_e("div",vN,nn(H.label),1),_e("div",mN,nn(H.metric??"—"),1),we(te(zT),{"min-width":140,"min-height":70})],12,pN)]),default:pt(()=>[we(te(k1)),we(te(zE)),n?Le("",!0):(se(),ze(te(iS),{key:0}))]),_:1},8,["nodes","edges","nodes-draggable","nodes-connectable","elements-selectable","zoom-on-scroll","zoom-on-pinching","pan-on-drag"])]),V[5]||(V[5]=Nv('<div class="absolute bottom-24 right-4 bg-white/80 p-3 rounded shadow text-sm" data-v-287bd283><div class="font-semibold mb-1" data-v-287bd283>Legend</div><div class="flex flex-col gap-1" data-v-287bd283><div data-v-287bd283><span class="inline-block w-3 h-3 bg-green-500 mr-1" data-v-287bd283></span>Infra</div><div data-v-287bd283><span class="inline-block w-3 h-3 bg-blue-500 mr-1" data-v-287bd283></span>Backend /API</div><div data-v-287bd283><span class="inline-block w-3 h-3 bg-purple-500 mr-1" data-v-287bd283></span>Monitoring</div><div data-v-287bd283><span class="inline-block w-3 h-3 bg-orange-500 mr-1" data-v-287bd283></span>Frontend /UI</div></div></div>',1)),s.value.visible?(se(),de("div",{key:0,class:"fixed z-50 bg-gray-800 text-white text-xs px-2 py-1 rounded shadow",style:We({left:s.value.x+"px",top:s.value.y+"px"})},nn(s.value.text),5)):Le("",!0)])],64))}}),_N=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},wN=_N(yN,[["__scopeId","data-v-287bd283"]]),bN={id:"app-container",style:{width:"100vw",height:"100vh",background:"#f9fafb"}},SN={__name:"App",setup(e){return(t,n)=>(se(),de("div",bN,[we(wN)]))}};um(SN).mount("#app");
